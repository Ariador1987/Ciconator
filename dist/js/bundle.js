"use strict";!function(){var __webpack_modules__={"./src/js/accordion.js":function srcJsAccordionJs(){eval('const accordions = document.querySelectorAll(".accordion");\r\nconst accordionContents = document.querySelectorAll(".accordion-content");\r\n\r\naccordions.forEach((acc) =>\r\n    acc.addEventListener("click", (e) => {\r\n        handleAccordions(acc, e);\r\n    })\r\n);\r\n\r\nfunction handleAccordions(accordion, event) {\r\n    if (!event.target.classList.contains("accordion-heading--icon")) return;\r\n\r\n    event.target.textContent.trim() === "+"\r\n        ? (event.target.textContent = "-")\r\n        : (event.target.textContent = "+");\r\n\r\n    if (\r\n        accordion.firstElementChild.nextElementSibling.classList.contains(\r\n            "hidden"\r\n        )\r\n    ) {\r\n        accordion.firstElementChild.nextElementSibling.classList.remove(\r\n            "hidden"\r\n        );\r\n        accordion.firstElementChild.nextElementSibling.classList.add("show");\r\n    } else {\r\n        accordion.firstElementChild.nextElementSibling.classList.remove("show");\r\n        accordion.firstElementChild.nextElementSibling.classList.add("hidden");\r\n    }\r\n}\r\n\r\nwindow.addEventListener("DOMContentLoaded", () => {\r\n    [...accordionContents].forEach((el) => el.classList.add("hidden"));\r\n});\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/accordion.js?')},"./src/js/counter.js":function srcJsCounterJs(){eval('const counters = document.querySelectorAll(".counter__item--number");\r\nconst counterEl = document.querySelector(".counter");\r\nlet wasCounted = false;\r\n\r\nconst obsCb = (entries, observer) => {\r\n    const [entry] = entries;\r\n    if (entry.isIntersecting && !wasCounted) {\r\n        startCounting();\r\n        observer.disconnect();\r\n    }\r\n};\r\nconst obsOptions = {\r\n    root: null,\r\n    threshold: 0.45,\r\n};\r\n\r\nconst observer = new IntersectionObserver(obsCb, obsOptions);\r\nobserver.observe(counterEl);\r\n\r\nconst startCounting = () => {\r\n    counters.forEach((counter) => {\r\n        counter.textContent = "0";\r\n\r\n        const updateCounter = () => {\r\n            const target = +counter.getAttribute("data-target");\r\n\r\n            const c = +counter.textContent;\r\n\r\n            const increment = target / 100;\r\n\r\n            if (c < target) {\r\n                counter.textContent = `${Math.ceil(c + increment)}`;\r\n                setTimeout(updateCounter, 1);\r\n            } else {\r\n                counter.textContent = target + "+";\r\n            }\r\n        };\r\n\r\n        updateCounter();\r\n        wasCounted = true;\r\n    });\r\n};\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/counter.js?')},"./src/js/glightbox.js":function srcJsGlightboxJs(module){eval('!(function (e, t) {\r\n     true\r\n        ? (module.exports = t())\r\n        : 0;\r\n})(this, function () {\r\n    "use strict";\r\n    function e(t) {\r\n        return (e =\r\n            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator\r\n                ? function (e) {\r\n                      return typeof e;\r\n                  }\r\n                : function (e) {\r\n                      return e &&\r\n                          "function" == typeof Symbol &&\r\n                          e.constructor === Symbol &&\r\n                          e !== Symbol.prototype\r\n                          ? "symbol"\r\n                          : typeof e;\r\n                  })(t);\r\n    }\r\n    function t(e, t) {\r\n        if (!(e instanceof t))\r\n            throw new TypeError("Cannot call a class as a function");\r\n    }\r\n    function i(e, t) {\r\n        for (var i = 0; i < t.length; i++) {\r\n            var n = t[i];\r\n            (n.enumerable = n.enumerable || !1),\r\n                (n.configurable = !0),\r\n                "value" in n && (n.writable = !0),\r\n                Object.defineProperty(e, n.key, n);\r\n        }\r\n    }\r\n    function n(e, t, n) {\r\n        return t && i(e.prototype, t), n && i(e, n), e;\r\n    }\r\n    var s = Date.now();\r\n    function l() {\r\n        var e = {},\r\n            t = !0,\r\n            i = 0,\r\n            n = arguments.length;\r\n        "[object Boolean]" === Object.prototype.toString.call(arguments[0]) &&\r\n            ((t = arguments[0]), i++);\r\n        for (\r\n            var s = function (i) {\r\n                for (var n in i)\r\n                    Object.prototype.hasOwnProperty.call(i, n) &&\r\n                        (t &&\r\n                        "[object Object]" ===\r\n                            Object.prototype.toString.call(i[n])\r\n                            ? (e[n] = l(!0, e[n], i[n]))\r\n                            : (e[n] = i[n]));\r\n            };\r\n            i < n;\r\n            i++\r\n        ) {\r\n            var o = arguments[i];\r\n            s(o);\r\n        }\r\n        return e;\r\n    }\r\n    function o(e, t) {\r\n        if (\r\n            ((k(e) || e === window || e === document) && (e = [e]),\r\n            A(e) || L(e) || (e = [e]),\r\n            0 != P(e))\r\n        )\r\n            if (A(e) && !L(e))\r\n                for (\r\n                    var i = e.length, n = 0;\r\n                    n < i && !1 !== t.call(e[n], e[n], n, e);\r\n                    n++\r\n                );\r\n            else if (L(e))\r\n                for (var s in e)\r\n                    if (O(e, s) && !1 === t.call(e[s], e[s], s, e)) break;\r\n    }\r\n    function r(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : null,\r\n            i =\r\n                arguments.length > 2 && void 0 !== arguments[2]\r\n                    ? arguments[2]\r\n                    : null,\r\n            n = (e[s] = e[s] || []),\r\n            l = { all: n, evt: null, found: null };\r\n        return (\r\n            t &&\r\n                i &&\r\n                P(n) > 0 &&\r\n                o(n, function (e, n) {\r\n                    if (e.eventName == t && e.fn.toString() == i.toString())\r\n                        return (l.found = !0), (l.evt = n), !1;\r\n                }),\r\n            l\r\n        );\r\n    }\r\n    function a(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : {},\r\n            i = t.onElement,\r\n            n = t.withCallback,\r\n            s = t.avoidDuplicate,\r\n            l = void 0 === s || s,\r\n            a = t.once,\r\n            h = void 0 !== a && a,\r\n            d = t.useCapture,\r\n            c = void 0 !== d && d,\r\n            u = arguments.length > 2 ? arguments[2] : void 0,\r\n            g = i || [];\r\n        function v(e) {\r\n            T(n) && n.call(u, e, this), h && v.destroy();\r\n        }\r\n        return (\r\n            C(g) && (g = document.querySelectorAll(g)),\r\n            (v.destroy = function () {\r\n                o(g, function (t) {\r\n                    var i = r(t, e, v);\r\n                    i.found && i.all.splice(i.evt, 1),\r\n                        t.removeEventListener && t.removeEventListener(e, v, c);\r\n                });\r\n            }),\r\n            o(g, function (t) {\r\n                var i = r(t, e, v);\r\n                ((t.addEventListener && l && !i.found) || !l) &&\r\n                    (t.addEventListener(e, v, c),\r\n                    i.all.push({ eventName: e, fn: v }));\r\n            }),\r\n            v\r\n        );\r\n    }\r\n    function h(e, t) {\r\n        o(t.split(" "), function (t) {\r\n            return e.classList.add(t);\r\n        });\r\n    }\r\n    function d(e, t) {\r\n        o(t.split(" "), function (t) {\r\n            return e.classList.remove(t);\r\n        });\r\n    }\r\n    function c(e, t) {\r\n        return e.classList.contains(t);\r\n    }\r\n    function u(e, t) {\r\n        for (; e !== document.body; ) {\r\n            if (!(e = e.parentElement)) return !1;\r\n            if (\r\n                "function" == typeof e.matches\r\n                    ? e.matches(t)\r\n                    : e.msMatchesSelector(t)\r\n            )\r\n                return e;\r\n        }\r\n    }\r\n    function g(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : "",\r\n            i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\r\n        if (!e || "" === t) return !1;\r\n        if ("none" == t) return T(i) && i(), !1;\r\n        var n = x(),\r\n            s = t.split(" ");\r\n        o(s, function (t) {\r\n            h(e, "g" + t);\r\n        }),\r\n            a(n, {\r\n                onElement: e,\r\n                avoidDuplicate: !1,\r\n                once: !0,\r\n                withCallback: function (e, t) {\r\n                    o(s, function (e) {\r\n                        d(t, "g" + e);\r\n                    }),\r\n                        T(i) && i();\r\n                },\r\n            });\r\n    }\r\n    function v(e) {\r\n        var t =\r\n            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";\r\n        if ("" == t)\r\n            return (\r\n                (e.style.webkitTransform = ""),\r\n                (e.style.MozTransform = ""),\r\n                (e.style.msTransform = ""),\r\n                (e.style.OTransform = ""),\r\n                (e.style.transform = ""),\r\n                !1\r\n            );\r\n        (e.style.webkitTransform = t),\r\n            (e.style.MozTransform = t),\r\n            (e.style.msTransform = t),\r\n            (e.style.OTransform = t),\r\n            (e.style.transform = t);\r\n    }\r\n    function f(e) {\r\n        e.style.display = "block";\r\n    }\r\n    function p(e) {\r\n        e.style.display = "none";\r\n    }\r\n    function m(e) {\r\n        var t = document.createDocumentFragment(),\r\n            i = document.createElement("div");\r\n        for (i.innerHTML = e; i.firstChild; ) t.appendChild(i.firstChild);\r\n        return t;\r\n    }\r\n    function y() {\r\n        return {\r\n            width:\r\n                window.innerWidth ||\r\n                document.documentElement.clientWidth ||\r\n                document.body.clientWidth,\r\n            height:\r\n                window.innerHeight ||\r\n                document.documentElement.clientHeight ||\r\n                document.body.clientHeight,\r\n        };\r\n    }\r\n    function x() {\r\n        var e,\r\n            t = document.createElement("fakeelement"),\r\n            i = {\r\n                animation: "animationend",\r\n                OAnimation: "oAnimationEnd",\r\n                MozAnimation: "animationend",\r\n                WebkitAnimation: "webkitAnimationEnd",\r\n            };\r\n        for (e in i) if (void 0 !== t.style[e]) return i[e];\r\n    }\r\n    function b(e, t, i, n) {\r\n        if (e()) t();\r\n        else {\r\n            var s;\r\n            i || (i = 100);\r\n            var l = setInterval(function () {\r\n                e() && (clearInterval(l), s && clearTimeout(s), t());\r\n            }, i);\r\n            n &&\r\n                (s = setTimeout(function () {\r\n                    clearInterval(l);\r\n                }, n));\r\n        }\r\n    }\r\n    function S(e, t, i) {\r\n        if (I(e)) console.error("Inject assets error");\r\n        else if ((T(t) && ((i = t), (t = !1)), C(t) && t in window))\r\n            T(i) && i();\r\n        else {\r\n            var n;\r\n            if (-1 !== e.indexOf(".css")) {\r\n                if (\r\n                    (n = document.querySelectorAll(\'link[href="\' + e + \'"]\')) &&\r\n                    n.length > 0\r\n                )\r\n                    return void (T(i) && i());\r\n                var s = document.getElementsByTagName("head")[0],\r\n                    l = s.querySelectorAll(\'link[rel="stylesheet"]\'),\r\n                    o = document.createElement("link");\r\n                return (\r\n                    (o.rel = "stylesheet"),\r\n                    (o.type = "text/css"),\r\n                    (o.href = e),\r\n                    (o.media = "all"),\r\n                    l ? s.insertBefore(o, l[0]) : s.appendChild(o),\r\n                    void (T(i) && i())\r\n                );\r\n            }\r\n            if (\r\n                (n = document.querySelectorAll(\'script[src="\' + e + \'"]\')) &&\r\n                n.length > 0\r\n            ) {\r\n                if (T(i)) {\r\n                    if (C(t))\r\n                        return (\r\n                            b(\r\n                                function () {\r\n                                    return void 0 !== window[t];\r\n                                },\r\n                                function () {\r\n                                    i();\r\n                                }\r\n                            ),\r\n                            !1\r\n                        );\r\n                    i();\r\n                }\r\n            } else {\r\n                var r = document.createElement("script");\r\n                (r.type = "text/javascript"),\r\n                    (r.src = e),\r\n                    (r.onload = function () {\r\n                        if (T(i)) {\r\n                            if (C(t))\r\n                                return (\r\n                                    b(\r\n                                        function () {\r\n                                            return void 0 !== window[t];\r\n                                        },\r\n                                        function () {\r\n                                            i();\r\n                                        }\r\n                                    ),\r\n                                    !1\r\n                                );\r\n                            i();\r\n                        }\r\n                    }),\r\n                    document.body.appendChild(r);\r\n            }\r\n        }\r\n    }\r\n    function w() {\r\n        return (\r\n            "navigator" in window &&\r\n            window.navigator.userAgent.match(\r\n                /(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i\r\n            )\r\n        );\r\n    }\r\n    function T(e) {\r\n        return "function" == typeof e;\r\n    }\r\n    function C(e) {\r\n        return "string" == typeof e;\r\n    }\r\n    function k(e) {\r\n        return !(!e || !e.nodeType || 1 != e.nodeType);\r\n    }\r\n    function E(e) {\r\n        return Array.isArray(e);\r\n    }\r\n    function A(e) {\r\n        return e && e.length && isFinite(e.length);\r\n    }\r\n    function L(t) {\r\n        return "object" === e(t) && null != t && !T(t) && !E(t);\r\n    }\r\n    function I(e) {\r\n        return null == e;\r\n    }\r\n    function O(e, t) {\r\n        return null !== e && hasOwnProperty.call(e, t);\r\n    }\r\n    function P(e) {\r\n        if (L(e)) {\r\n            if (e.keys) return e.keys().length;\r\n            var t = 0;\r\n            for (var i in e) O(e, i) && t++;\r\n            return t;\r\n        }\r\n        return e.length;\r\n    }\r\n    function M(e) {\r\n        return !isNaN(parseFloat(e)) && isFinite(e);\r\n    }\r\n    function z() {\r\n        var e =\r\n                arguments.length > 0 && void 0 !== arguments[0]\r\n                    ? arguments[0]\r\n                    : -1,\r\n            t = document.querySelectorAll(\r\n                ".gbtn[data-taborder]:not(.disabled)"\r\n            );\r\n        if (!t.length) return !1;\r\n        if (1 == t.length) return t[0];\r\n        "string" == typeof e && (e = parseInt(e));\r\n        var i = [];\r\n        o(t, function (e) {\r\n            i.push(e.getAttribute("data-taborder"));\r\n        });\r\n        var n = Math.max.apply(\r\n                Math,\r\n                i.map(function (e) {\r\n                    return parseInt(e);\r\n                })\r\n            ),\r\n            s = e < 0 ? 1 : e + 1;\r\n        s > n && (s = "1");\r\n        var l = i.filter(function (e) {\r\n                return e >= parseInt(s);\r\n            }),\r\n            r = l.sort()[0];\r\n        return document.querySelector(\'.gbtn[data-taborder="\'.concat(r, \'"]\'));\r\n    }\r\n    function X(e) {\r\n        if (e.events.hasOwnProperty("keyboard")) return !1;\r\n        e.events.keyboard = a("keydown", {\r\n            onElement: window,\r\n            withCallback: function (t, i) {\r\n                var n = (t = t || window.event).keyCode;\r\n                if (9 == n) {\r\n                    var s = document.querySelector(".gbtn.focused");\r\n                    if (!s) {\r\n                        var l =\r\n                            !(\r\n                                !document.activeElement ||\r\n                                !document.activeElement.nodeName\r\n                            ) &&\r\n                            document.activeElement.nodeName.toLocaleLowerCase();\r\n                        if ("input" == l || "textarea" == l || "button" == l)\r\n                            return;\r\n                    }\r\n                    t.preventDefault();\r\n                    var o = document.querySelectorAll(".gbtn[data-taborder]");\r\n                    if (!o || o.length <= 0) return;\r\n                    if (!s) {\r\n                        var r = z();\r\n                        return void (r && (r.focus(), h(r, "focused")));\r\n                    }\r\n                    var a = z(s.getAttribute("data-taborder"));\r\n                    d(s, "focused"), a && (a.focus(), h(a, "focused"));\r\n                }\r\n                39 == n && e.nextSlide(),\r\n                    37 == n && e.prevSlide(),\r\n                    27 == n && e.close();\r\n            },\r\n        });\r\n    }\r\n    function Y(e) {\r\n        return Math.sqrt(e.x * e.x + e.y * e.y);\r\n    }\r\n    function q(e, t) {\r\n        var i = (function (e, t) {\r\n            var i = Y(e) * Y(t);\r\n            if (0 === i) return 0;\r\n            var n =\r\n                (function (e, t) {\r\n                    return e.x * t.x + e.y * t.y;\r\n                })(e, t) / i;\r\n            return n > 1 && (n = 1), Math.acos(n);\r\n        })(e, t);\r\n        return (\r\n            (function (e, t) {\r\n                return e.x * t.y - t.x * e.y;\r\n            })(e, t) > 0 && (i *= -1),\r\n            (180 * i) / Math.PI\r\n        );\r\n    }\r\n    var N = (function () {\r\n        function e(i) {\r\n            t(this, e), (this.handlers = []), (this.el = i);\r\n        }\r\n        return (\r\n            n(e, [\r\n                {\r\n                    key: "add",\r\n                    value: function (e) {\r\n                        this.handlers.push(e);\r\n                    },\r\n                },\r\n                {\r\n                    key: "del",\r\n                    value: function (e) {\r\n                        e || (this.handlers = []);\r\n                        for (var t = this.handlers.length; t >= 0; t--)\r\n                            this.handlers[t] === e &&\r\n                                this.handlers.splice(t, 1);\r\n                    },\r\n                },\r\n                {\r\n                    key: "dispatch",\r\n                    value: function () {\r\n                        for (var e = 0, t = this.handlers.length; e < t; e++) {\r\n                            var i = this.handlers[e];\r\n                            "function" == typeof i &&\r\n                                i.apply(this.el, arguments);\r\n                        }\r\n                    },\r\n                },\r\n            ]),\r\n            e\r\n        );\r\n    })();\r\n    function D(e, t) {\r\n        var i = new N(e);\r\n        return i.add(t), i;\r\n    }\r\n    var _ = (function () {\r\n        function e(i, n) {\r\n            t(this, e),\r\n                (this.element =\r\n                    "string" == typeof i ? document.querySelector(i) : i),\r\n                (this.start = this.start.bind(this)),\r\n                (this.move = this.move.bind(this)),\r\n                (this.end = this.end.bind(this)),\r\n                (this.cancel = this.cancel.bind(this)),\r\n                this.element.addEventListener("touchstart", this.start, !1),\r\n                this.element.addEventListener("touchmove", this.move, !1),\r\n                this.element.addEventListener("touchend", this.end, !1),\r\n                this.element.addEventListener("touchcancel", this.cancel, !1),\r\n                (this.preV = { x: null, y: null }),\r\n                (this.pinchStartLen = null),\r\n                (this.zoom = 1),\r\n                (this.isDoubleTap = !1);\r\n            var s = function () {};\r\n            (this.rotate = D(this.element, n.rotate || s)),\r\n                (this.touchStart = D(this.element, n.touchStart || s)),\r\n                (this.multipointStart = D(\r\n                    this.element,\r\n                    n.multipointStart || s\r\n                )),\r\n                (this.multipointEnd = D(this.element, n.multipointEnd || s)),\r\n                (this.pinch = D(this.element, n.pinch || s)),\r\n                (this.swipe = D(this.element, n.swipe || s)),\r\n                (this.tap = D(this.element, n.tap || s)),\r\n                (this.doubleTap = D(this.element, n.doubleTap || s)),\r\n                (this.longTap = D(this.element, n.longTap || s)),\r\n                (this.singleTap = D(this.element, n.singleTap || s)),\r\n                (this.pressMove = D(this.element, n.pressMove || s)),\r\n                (this.twoFingerPressMove = D(\r\n                    this.element,\r\n                    n.twoFingerPressMove || s\r\n                )),\r\n                (this.touchMove = D(this.element, n.touchMove || s)),\r\n                (this.touchEnd = D(this.element, n.touchEnd || s)),\r\n                (this.touchCancel = D(this.element, n.touchCancel || s)),\r\n                (this.translateContainer = this.element),\r\n                (this._cancelAllHandler = this.cancelAll.bind(this)),\r\n                window.addEventListener("scroll", this._cancelAllHandler),\r\n                (this.delta = null),\r\n                (this.last = null),\r\n                (this.now = null),\r\n                (this.tapTimeout = null),\r\n                (this.singleTapTimeout = null),\r\n                (this.longTapTimeout = null),\r\n                (this.swipeTimeout = null),\r\n                (this.x1 = this.x2 = this.y1 = this.y2 = null),\r\n                (this.preTapPosition = { x: null, y: null });\r\n        }\r\n        return (\r\n            n(e, [\r\n                {\r\n                    key: "start",\r\n                    value: function (e) {\r\n                        if (e.touches) {\r\n                            if (\r\n                                e.target &&\r\n                                e.target.nodeName &&\r\n                                ["a", "button", "input"].indexOf(\r\n                                    e.target.nodeName.toLowerCase()\r\n                                ) >= 0\r\n                            )\r\n                                console.log(\r\n                                    "ignore drag for this touched element",\r\n                                    e.target.nodeName.toLowerCase()\r\n                                );\r\n                            else {\r\n                                (this.now = Date.now()),\r\n                                    (this.x1 = e.touches[0].pageX),\r\n                                    (this.y1 = e.touches[0].pageY),\r\n                                    (this.delta =\r\n                                        this.now - (this.last || this.now)),\r\n                                    this.touchStart.dispatch(e, this.element),\r\n                                    null !== this.preTapPosition.x &&\r\n                                        ((this.isDoubleTap =\r\n                                            this.delta > 0 &&\r\n                                            this.delta <= 250 &&\r\n                                            Math.abs(\r\n                                                this.preTapPosition.x - this.x1\r\n                                            ) < 30 &&\r\n                                            Math.abs(\r\n                                                this.preTapPosition.y - this.y1\r\n                                            ) < 30),\r\n                                        this.isDoubleTap &&\r\n                                            clearTimeout(\r\n                                                this.singleTapTimeout\r\n                                            )),\r\n                                    (this.preTapPosition.x = this.x1),\r\n                                    (this.preTapPosition.y = this.y1),\r\n                                    (this.last = this.now);\r\n                                var t = this.preV;\r\n                                if (e.touches.length > 1) {\r\n                                    this._cancelLongTap(),\r\n                                        this._cancelSingleTap();\r\n                                    var i = {\r\n                                        x: e.touches[1].pageX - this.x1,\r\n                                        y: e.touches[1].pageY - this.y1,\r\n                                    };\r\n                                    (t.x = i.x),\r\n                                        (t.y = i.y),\r\n                                        (this.pinchStartLen = Y(t)),\r\n                                        this.multipointStart.dispatch(\r\n                                            e,\r\n                                            this.element\r\n                                        );\r\n                                }\r\n                                (this._preventTap = !1),\r\n                                    (this.longTapTimeout = setTimeout(\r\n                                        function () {\r\n                                            this.longTap.dispatch(\r\n                                                e,\r\n                                                this.element\r\n                                            ),\r\n                                                (this._preventTap = !0);\r\n                                        }.bind(this),\r\n                                        750\r\n                                    ));\r\n                            }\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "move",\r\n                    value: function (e) {\r\n                        if (e.touches) {\r\n                            var t = this.preV,\r\n                                i = e.touches.length,\r\n                                n = e.touches[0].pageX,\r\n                                s = e.touches[0].pageY;\r\n                            if (((this.isDoubleTap = !1), i > 1)) {\r\n                                var l = e.touches[1].pageX,\r\n                                    o = e.touches[1].pageY,\r\n                                    r = {\r\n                                        x: e.touches[1].pageX - n,\r\n                                        y: e.touches[1].pageY - s,\r\n                                    };\r\n                                null !== t.x &&\r\n                                    (this.pinchStartLen > 0 &&\r\n                                        ((e.zoom = Y(r) / this.pinchStartLen),\r\n                                        this.pinch.dispatch(e, this.element)),\r\n                                    (e.angle = q(r, t)),\r\n                                    this.rotate.dispatch(e, this.element)),\r\n                                    (t.x = r.x),\r\n                                    (t.y = r.y),\r\n                                    null !== this.x2 && null !== this.sx2\r\n                                        ? ((e.deltaX =\r\n                                              (n - this.x2 + l - this.sx2) / 2),\r\n                                          (e.deltaY =\r\n                                              (s - this.y2 + o - this.sy2) / 2))\r\n                                        : ((e.deltaX = 0), (e.deltaY = 0)),\r\n                                    this.twoFingerPressMove.dispatch(\r\n                                        e,\r\n                                        this.element\r\n                                    ),\r\n                                    (this.sx2 = l),\r\n                                    (this.sy2 = o);\r\n                            } else {\r\n                                if (null !== this.x2) {\r\n                                    (e.deltaX = n - this.x2),\r\n                                        (e.deltaY = s - this.y2);\r\n                                    var a = Math.abs(this.x1 - this.x2),\r\n                                        h = Math.abs(this.y1 - this.y2);\r\n                                    (a > 10 || h > 10) &&\r\n                                        (this._preventTap = !0);\r\n                                } else (e.deltaX = 0), (e.deltaY = 0);\r\n                                this.pressMove.dispatch(e, this.element);\r\n                            }\r\n                            this.touchMove.dispatch(e, this.element),\r\n                                this._cancelLongTap(),\r\n                                (this.x2 = n),\r\n                                (this.y2 = s),\r\n                                i > 1 && e.preventDefault();\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "end",\r\n                    value: function (e) {\r\n                        if (e.changedTouches) {\r\n                            this._cancelLongTap();\r\n                            var t = this;\r\n                            e.touches.length < 2 &&\r\n                                (this.multipointEnd.dispatch(e, this.element),\r\n                                (this.sx2 = this.sy2 = null)),\r\n                                (this.x2 && Math.abs(this.x1 - this.x2) > 30) ||\r\n                                (this.y2 && Math.abs(this.y1 - this.y2) > 30)\r\n                                    ? ((e.direction = this._swipeDirection(\r\n                                          this.x1,\r\n                                          this.x2,\r\n                                          this.y1,\r\n                                          this.y2\r\n                                      )),\r\n                                      (this.swipeTimeout = setTimeout(\r\n                                          function () {\r\n                                              t.swipe.dispatch(e, t.element);\r\n                                          },\r\n                                          0\r\n                                      )))\r\n                                    : ((this.tapTimeout = setTimeout(\r\n                                          function () {\r\n                                              t._preventTap ||\r\n                                                  t.tap.dispatch(e, t.element),\r\n                                                  t.isDoubleTap &&\r\n                                                      (t.doubleTap.dispatch(\r\n                                                          e,\r\n                                                          t.element\r\n                                                      ),\r\n                                                      (t.isDoubleTap = !1));\r\n                                          },\r\n                                          0\r\n                                      )),\r\n                                      t.isDoubleTap ||\r\n                                          (t.singleTapTimeout = setTimeout(\r\n                                              function () {\r\n                                                  t.singleTap.dispatch(\r\n                                                      e,\r\n                                                      t.element\r\n                                                  );\r\n                                              },\r\n                                              250\r\n                                          ))),\r\n                                this.touchEnd.dispatch(e, this.element),\r\n                                (this.preV.x = 0),\r\n                                (this.preV.y = 0),\r\n                                (this.zoom = 1),\r\n                                (this.pinchStartLen = null),\r\n                                (this.x1 = this.x2 = this.y1 = this.y2 = null);\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "cancelAll",\r\n                    value: function () {\r\n                        (this._preventTap = !0),\r\n                            clearTimeout(this.singleTapTimeout),\r\n                            clearTimeout(this.tapTimeout),\r\n                            clearTimeout(this.longTapTimeout),\r\n                            clearTimeout(this.swipeTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "cancel",\r\n                    value: function (e) {\r\n                        this.cancelAll(),\r\n                            this.touchCancel.dispatch(e, this.element);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_cancelLongTap",\r\n                    value: function () {\r\n                        clearTimeout(this.longTapTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_cancelSingleTap",\r\n                    value: function () {\r\n                        clearTimeout(this.singleTapTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_swipeDirection",\r\n                    value: function (e, t, i, n) {\r\n                        return Math.abs(e - t) >= Math.abs(i - n)\r\n                            ? e - t > 0\r\n                                ? "Left"\r\n                                : "Right"\r\n                            : i - n > 0\r\n                            ? "Up"\r\n                            : "Down";\r\n                    },\r\n                },\r\n                {\r\n                    key: "on",\r\n                    value: function (e, t) {\r\n                        this[e] && this[e].add(t);\r\n                    },\r\n                },\r\n                {\r\n                    key: "off",\r\n                    value: function (e, t) {\r\n                        this[e] && this[e].del(t);\r\n                    },\r\n                },\r\n                {\r\n                    key: "destroy",\r\n                    value: function () {\r\n                        return (\r\n                            this.singleTapTimeout &&\r\n                                clearTimeout(this.singleTapTimeout),\r\n                            this.tapTimeout && clearTimeout(this.tapTimeout),\r\n                            this.longTapTimeout &&\r\n                                clearTimeout(this.longTapTimeout),\r\n                            this.swipeTimeout &&\r\n                                clearTimeout(this.swipeTimeout),\r\n                            this.element.removeEventListener(\r\n                                "touchstart",\r\n                                this.start\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchmove",\r\n                                this.move\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchend",\r\n                                this.end\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchcancel",\r\n                                this.cancel\r\n                            ),\r\n                            this.rotate.del(),\r\n                            this.touchStart.del(),\r\n                            this.multipointStart.del(),\r\n                            this.multipointEnd.del(),\r\n                            this.pinch.del(),\r\n                            this.swipe.del(),\r\n                            this.tap.del(),\r\n                            this.doubleTap.del(),\r\n                            this.longTap.del(),\r\n                            this.singleTap.del(),\r\n                            this.pressMove.del(),\r\n                            this.twoFingerPressMove.del(),\r\n                            this.touchMove.del(),\r\n                            this.touchEnd.del(),\r\n                            this.touchCancel.del(),\r\n                            (this.preV =\r\n                                this.pinchStartLen =\r\n                                this.zoom =\r\n                                this.isDoubleTap =\r\n                                this.delta =\r\n                                this.last =\r\n                                this.now =\r\n                                this.tapTimeout =\r\n                                this.singleTapTimeout =\r\n                                this.longTapTimeout =\r\n                                this.swipeTimeout =\r\n                                this.x1 =\r\n                                this.x2 =\r\n                                this.y1 =\r\n                                this.y2 =\r\n                                this.preTapPosition =\r\n                                this.rotate =\r\n                                this.touchStart =\r\n                                this.multipointStart =\r\n                                this.multipointEnd =\r\n                                this.pinch =\r\n                                this.swipe =\r\n                                this.tap =\r\n                                this.doubleTap =\r\n                                this.longTap =\r\n                                this.singleTap =\r\n                                this.pressMove =\r\n                                this.touchMove =\r\n                                this.touchEnd =\r\n                                this.touchCancel =\r\n                                this.twoFingerPressMove =\r\n                                    null),\r\n                            window.removeEventListener(\r\n                                "scroll",\r\n                                this._cancelAllHandler\r\n                            ),\r\n                            null\r\n                        );\r\n                    },\r\n                },\r\n            ]),\r\n            e\r\n        );\r\n    })();\r\n    function W(e) {\r\n        var t = (function () {\r\n                var e,\r\n                    t = document.createElement("fakeelement"),\r\n                    i = {\r\n                        transition: "transitionend",\r\n                        OTransition: "oTransitionEnd",\r\n                        MozTransition: "transitionend",\r\n                        WebkitTransition: "webkitTransitionEnd",\r\n                    };\r\n                for (e in i) if (void 0 !== t.style[e]) return i[e];\r\n            })(),\r\n            i =\r\n                window.innerWidth ||\r\n                document.documentElement.clientWidth ||\r\n                document.body.clientWidth,\r\n            n = c(e, "gslide-media") ? e : e.querySelector(".gslide-media"),\r\n            s = u(n, ".ginner-container"),\r\n            l = e.querySelector(".gslide-description");\r\n        i > 769 && (n = s),\r\n            h(n, "greset"),\r\n            v(n, "translate3d(0, 0, 0)"),\r\n            a(t, {\r\n                onElement: n,\r\n                once: !0,\r\n                withCallback: function (e, t) {\r\n                    d(n, "greset");\r\n                },\r\n            }),\r\n            (n.style.opacity = ""),\r\n            l && (l.style.opacity = "");\r\n    }\r\n    function B(e) {\r\n        if (e.events.hasOwnProperty("touch")) return !1;\r\n        var t,\r\n            i,\r\n            n,\r\n            s = y(),\r\n            l = s.width,\r\n            o = s.height,\r\n            r = !1,\r\n            a = null,\r\n            g = null,\r\n            f = null,\r\n            p = !1,\r\n            m = 1,\r\n            x = 1,\r\n            b = !1,\r\n            S = !1,\r\n            w = null,\r\n            T = null,\r\n            C = null,\r\n            k = null,\r\n            E = 0,\r\n            A = 0,\r\n            L = !1,\r\n            I = !1,\r\n            O = {},\r\n            P = {},\r\n            M = 0,\r\n            z = 0,\r\n            X = document.getElementById("glightbox-slider"),\r\n            Y = document.querySelector(".goverlay"),\r\n            q = new _(X, {\r\n                touchStart: function (t) {\r\n                    if (\r\n                        ((r = !0),\r\n                        (c(t.targetTouches[0].target, "ginner-container") ||\r\n                            u(t.targetTouches[0].target, ".gslide-desc") ||\r\n                            "a" ==\r\n                                t.targetTouches[0].target.nodeName.toLowerCase()) &&\r\n                            (r = !1),\r\n                        u(t.targetTouches[0].target, ".gslide-inline") &&\r\n                            !c(\r\n                                t.targetTouches[0].target.parentNode,\r\n                                "gslide-inline"\r\n                            ) &&\r\n                            (r = !1),\r\n                        r)\r\n                    ) {\r\n                        if (\r\n                            ((P = t.targetTouches[0]),\r\n                            (O.pageX = t.targetTouches[0].pageX),\r\n                            (O.pageY = t.targetTouches[0].pageY),\r\n                            (M = t.targetTouches[0].clientX),\r\n                            (z = t.targetTouches[0].clientY),\r\n                            (a = e.activeSlide),\r\n                            (g = a.querySelector(".gslide-media")),\r\n                            (n = a.querySelector(".gslide-inline")),\r\n                            (f = null),\r\n                            c(g, "gslide-image") &&\r\n                                (f = g.querySelector("img")),\r\n                            (window.innerWidth ||\r\n                                document.documentElement.clientWidth ||\r\n                                document.body.clientWidth) > 769 &&\r\n                                (g = a.querySelector(".ginner-container")),\r\n                            d(Y, "greset"),\r\n                            t.pageX > 20 && t.pageX < window.innerWidth - 20)\r\n                        )\r\n                            return;\r\n                        t.preventDefault();\r\n                    }\r\n                },\r\n                touchMove: function (s) {\r\n                    if (r && ((P = s.targetTouches[0]), !b && !S)) {\r\n                        if (n && n.offsetHeight > o) {\r\n                            var a = O.pageX - P.pageX;\r\n                            if (Math.abs(a) <= 13) return !1;\r\n                        }\r\n                        p = !0;\r\n                        var h,\r\n                            d = s.targetTouches[0].clientX,\r\n                            c = s.targetTouches[0].clientY,\r\n                            u = M - d,\r\n                            m = z - c;\r\n                        if (\r\n                            (Math.abs(u) > Math.abs(m)\r\n                                ? ((L = !1), (I = !0))\r\n                                : ((I = !1), (L = !0)),\r\n                            (t = P.pageX - O.pageX),\r\n                            (E = (100 * t) / l),\r\n                            (i = P.pageY - O.pageY),\r\n                            (A = (100 * i) / o),\r\n                            L &&\r\n                                f &&\r\n                                ((h = 1 - Math.abs(i) / o),\r\n                                (Y.style.opacity = h),\r\n                                e.settings.touchFollowAxis && (E = 0)),\r\n                            I &&\r\n                                ((h = 1 - Math.abs(t) / l),\r\n                                (g.style.opacity = h),\r\n                                e.settings.touchFollowAxis && (A = 0)),\r\n                            !f)\r\n                        )\r\n                            return v(g, "translate3d(".concat(E, "%, 0, 0)"));\r\n                        v(\r\n                            g,\r\n                            "translate3d(".concat(E, "%, ").concat(A, "%, 0)")\r\n                        );\r\n                    }\r\n                },\r\n                touchEnd: function () {\r\n                    if (r) {\r\n                        if (((p = !1), S || b)) return (C = w), void (k = T);\r\n                        var t = Math.abs(parseInt(A)),\r\n                            i = Math.abs(parseInt(E));\r\n                        if (!(t > 29 && f))\r\n                            return t < 29 && i < 25\r\n                                ? (h(Y, "greset"), (Y.style.opacity = 1), W(g))\r\n                                : void 0;\r\n                        e.close();\r\n                    }\r\n                },\r\n                multipointEnd: function () {\r\n                    setTimeout(function () {\r\n                        b = !1;\r\n                    }, 50);\r\n                },\r\n                multipointStart: function () {\r\n                    (b = !0), (m = x || 1);\r\n                },\r\n                pinch: function (e) {\r\n                    if (!f || p) return !1;\r\n                    (b = !0), (f.scaleX = f.scaleY = m * e.zoom);\r\n                    var t = m * e.zoom;\r\n                    if (((S = !0), t <= 1))\r\n                        return (\r\n                            (S = !1),\r\n                            (t = 1),\r\n                            (k = null),\r\n                            (C = null),\r\n                            (w = null),\r\n                            (T = null),\r\n                            void f.setAttribute("style", "")\r\n                        );\r\n                    t > 4.5 && (t = 4.5),\r\n                        (f.style.transform = "scale3d("\r\n                            .concat(t, ", ")\r\n                            .concat(t, ", 1)")),\r\n                        (x = t);\r\n                },\r\n                pressMove: function (e) {\r\n                    if (S && !b) {\r\n                        var t = P.pageX - O.pageX,\r\n                            i = P.pageY - O.pageY;\r\n                        C && (t += C), k && (i += k), (w = t), (T = i);\r\n                        var n = "translate3d("\r\n                            .concat(t, "px, ")\r\n                            .concat(i, "px, 0)");\r\n                        x &&\r\n                            (n += " scale3d("\r\n                                .concat(x, ", ")\r\n                                .concat(x, ", 1)")),\r\n                            v(f, n);\r\n                    }\r\n                },\r\n                swipe: function (t) {\r\n                    if (!S)\r\n                        if (b) b = !1;\r\n                        else {\r\n                            if ("Left" == t.direction) {\r\n                                if (e.index == e.elements.length - 1)\r\n                                    return W(g);\r\n                                e.nextSlide();\r\n                            }\r\n                            if ("Right" == t.direction) {\r\n                                if (0 == e.index) return W(g);\r\n                                e.prevSlide();\r\n                            }\r\n                        }\r\n                },\r\n            });\r\n        e.events.touch = q;\r\n    }\r\n    var H = (function () {\r\n            function e(i, n) {\r\n                var s = this,\r\n                    l =\r\n                        arguments.length > 2 && void 0 !== arguments[2]\r\n                            ? arguments[2]\r\n                            : null;\r\n                if (\r\n                    (t(this, e),\r\n                    (this.img = i),\r\n                    (this.slide = n),\r\n                    (this.onclose = l),\r\n                    this.img.setZoomEvents)\r\n                )\r\n                    return !1;\r\n                (this.active = !1),\r\n                    (this.zoomedIn = !1),\r\n                    (this.dragging = !1),\r\n                    (this.currentX = null),\r\n                    (this.currentY = null),\r\n                    (this.initialX = null),\r\n                    (this.initialY = null),\r\n                    (this.xOffset = 0),\r\n                    (this.yOffset = 0),\r\n                    this.img.addEventListener(\r\n                        "mousedown",\r\n                        function (e) {\r\n                            return s.dragStart(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "mouseup",\r\n                        function (e) {\r\n                            return s.dragEnd(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "mousemove",\r\n                        function (e) {\r\n                            return s.drag(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "click",\r\n                        function (e) {\r\n                            return s.slide.classList.contains("dragging-nav")\r\n                                ? (s.zoomOut(), !1)\r\n                                : s.zoomedIn\r\n                                ? void (\r\n                                      s.zoomedIn &&\r\n                                      !s.dragging &&\r\n                                      s.zoomOut()\r\n                                  )\r\n                                : s.zoomIn();\r\n                        },\r\n                        !1\r\n                    ),\r\n                    (this.img.setZoomEvents = !0);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "zoomIn",\r\n                        value: function () {\r\n                            var e = this.widowWidth();\r\n                            if (!(this.zoomedIn || e <= 768)) {\r\n                                var t = this.img;\r\n                                if (\r\n                                    (t.setAttribute(\r\n                                        "data-style",\r\n                                        t.getAttribute("style")\r\n                                    ),\r\n                                    (t.style.maxWidth = t.naturalWidth + "px"),\r\n                                    (t.style.maxHeight =\r\n                                        t.naturalHeight + "px"),\r\n                                    t.naturalWidth > e)\r\n                                ) {\r\n                                    var i = e / 2 - t.naturalWidth / 2;\r\n                                    this.setTranslate(\r\n                                        this.img.parentNode,\r\n                                        i,\r\n                                        0\r\n                                    );\r\n                                }\r\n                                this.slide.classList.add("zoomed"),\r\n                                    (this.zoomedIn = !0);\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "zoomOut",\r\n                        value: function () {\r\n                            this.img.parentNode.setAttribute("style", ""),\r\n                                this.img.setAttribute(\r\n                                    "style",\r\n                                    this.img.getAttribute("data-style")\r\n                                ),\r\n                                this.slide.classList.remove("zoomed"),\r\n                                (this.zoomedIn = !1),\r\n                                (this.currentX = null),\r\n                                (this.currentY = null),\r\n                                (this.initialX = null),\r\n                                (this.initialY = null),\r\n                                (this.xOffset = 0),\r\n                                (this.yOffset = 0),\r\n                                this.onclose &&\r\n                                    "function" == typeof this.onclose &&\r\n                                    this.onclose();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragStart",\r\n                        value: function (e) {\r\n                            e.preventDefault(),\r\n                                this.zoomedIn\r\n                                    ? ("touchstart" === e.type\r\n                                          ? ((this.initialX =\r\n                                                e.touches[0].clientX -\r\n                                                this.xOffset),\r\n                                            (this.initialY =\r\n                                                e.touches[0].clientY -\r\n                                                this.yOffset))\r\n                                          : ((this.initialX =\r\n                                                e.clientX - this.xOffset),\r\n                                            (this.initialY =\r\n                                                e.clientY - this.yOffset)),\r\n                                      e.target === this.img &&\r\n                                          ((this.active = !0),\r\n                                          this.img.classList.add("dragging")))\r\n                                    : (this.active = !1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragEnd",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            e.preventDefault(),\r\n                                (this.initialX = this.currentX),\r\n                                (this.initialY = this.currentY),\r\n                                (this.active = !1),\r\n                                setTimeout(function () {\r\n                                    (t.dragging = !1),\r\n                                        (t.img.isDragging = !1),\r\n                                        t.img.classList.remove("dragging");\r\n                                }, 100);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "drag",\r\n                        value: function (e) {\r\n                            this.active &&\r\n                                (e.preventDefault(),\r\n                                "touchmove" === e.type\r\n                                    ? ((this.currentX =\r\n                                          e.touches[0].clientX - this.initialX),\r\n                                      (this.currentY =\r\n                                          e.touches[0].clientY - this.initialY))\r\n                                    : ((this.currentX =\r\n                                          e.clientX - this.initialX),\r\n                                      (this.currentY =\r\n                                          e.clientY - this.initialY)),\r\n                                (this.xOffset = this.currentX),\r\n                                (this.yOffset = this.currentY),\r\n                                (this.img.isDragging = !0),\r\n                                (this.dragging = !0),\r\n                                this.setTranslate(\r\n                                    this.img,\r\n                                    this.currentX,\r\n                                    this.currentY\r\n                                ));\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "onMove",\r\n                        value: function (e) {\r\n                            if (this.zoomedIn) {\r\n                                var t = e.clientX - this.img.naturalWidth / 2,\r\n                                    i = e.clientY - this.img.naturalHeight / 2;\r\n                                this.setTranslate(this.img, t, i);\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setTranslate",\r\n                        value: function (e, t, i) {\r\n                            e.style.transform =\r\n                                "translate3d(" + t + "px, " + i + "px, 0)";\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "widowWidth",\r\n                        value: function () {\r\n                            return (\r\n                                window.innerWidth ||\r\n                                document.documentElement.clientWidth ||\r\n                                document.body.clientWidth\r\n                            );\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        V = (function () {\r\n            function e() {\r\n                var i = this,\r\n                    n =\r\n                        arguments.length > 0 && void 0 !== arguments[0]\r\n                            ? arguments[0]\r\n                            : {};\r\n                t(this, e);\r\n                var s = n.dragEl,\r\n                    l = n.toleranceX,\r\n                    o = void 0 === l ? 40 : l,\r\n                    r = n.toleranceY,\r\n                    a = void 0 === r ? 65 : r,\r\n                    h = n.slide,\r\n                    d = void 0 === h ? null : h,\r\n                    c = n.instance,\r\n                    u = void 0 === c ? null : c;\r\n                (this.el = s),\r\n                    (this.active = !1),\r\n                    (this.dragging = !1),\r\n                    (this.currentX = null),\r\n                    (this.currentY = null),\r\n                    (this.initialX = null),\r\n                    (this.initialY = null),\r\n                    (this.xOffset = 0),\r\n                    (this.yOffset = 0),\r\n                    (this.direction = null),\r\n                    (this.lastDirection = null),\r\n                    (this.toleranceX = o),\r\n                    (this.toleranceY = a),\r\n                    (this.toleranceReached = !1),\r\n                    (this.dragContainer = this.el),\r\n                    (this.slide = d),\r\n                    (this.instance = u),\r\n                    this.el.addEventListener(\r\n                        "mousedown",\r\n                        function (e) {\r\n                            return i.dragStart(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.el.addEventListener(\r\n                        "mouseup",\r\n                        function (e) {\r\n                            return i.dragEnd(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.el.addEventListener(\r\n                        "mousemove",\r\n                        function (e) {\r\n                            return i.drag(e);\r\n                        },\r\n                        !1\r\n                    );\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "dragStart",\r\n                        value: function (e) {\r\n                            if (this.slide.classList.contains("zoomed"))\r\n                                this.active = !1;\r\n                            else {\r\n                                "touchstart" === e.type\r\n                                    ? ((this.initialX =\r\n                                          e.touches[0].clientX - this.xOffset),\r\n                                      (this.initialY =\r\n                                          e.touches[0].clientY - this.yOffset))\r\n                                    : ((this.initialX =\r\n                                          e.clientX - this.xOffset),\r\n                                      (this.initialY =\r\n                                          e.clientY - this.yOffset));\r\n                                var t = e.target.nodeName.toLowerCase();\r\n                                e.target.classList.contains("nodrag") ||\r\n                                u(e.target, ".nodrag") ||\r\n                                -1 !==\r\n                                    [\r\n                                        "input",\r\n                                        "select",\r\n                                        "textarea",\r\n                                        "button",\r\n                                        "a",\r\n                                    ].indexOf(t)\r\n                                    ? (this.active = !1)\r\n                                    : (e.preventDefault(),\r\n                                      (e.target === this.el ||\r\n                                          ("img" !== t &&\r\n                                              u(e.target, ".gslide-inline"))) &&\r\n                                          ((this.active = !0),\r\n                                          this.el.classList.add("dragging"),\r\n                                          (this.dragContainer = u(\r\n                                              e.target,\r\n                                              ".ginner-container"\r\n                                          ))));\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragEnd",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            e && e.preventDefault(),\r\n                                (this.initialX = 0),\r\n                                (this.initialY = 0),\r\n                                (this.currentX = null),\r\n                                (this.currentY = null),\r\n                                (this.initialX = null),\r\n                                (this.initialY = null),\r\n                                (this.xOffset = 0),\r\n                                (this.yOffset = 0),\r\n                                (this.active = !1),\r\n                                this.doSlideChange &&\r\n                                    ((this.instance.preventOutsideClick = !0),\r\n                                    "right" == this.doSlideChange &&\r\n                                        this.instance.prevSlide(),\r\n                                    "left" == this.doSlideChange &&\r\n                                        this.instance.nextSlide()),\r\n                                this.doSlideClose && this.instance.close(),\r\n                                this.toleranceReached ||\r\n                                    this.setTranslate(\r\n                                        this.dragContainer,\r\n                                        0,\r\n                                        0,\r\n                                        !0\r\n                                    ),\r\n                                setTimeout(function () {\r\n                                    (t.instance.preventOutsideClick = !1),\r\n                                        (t.toleranceReached = !1),\r\n                                        (t.lastDirection = null),\r\n                                        (t.dragging = !1),\r\n                                        (t.el.isDragging = !1),\r\n                                        t.el.classList.remove("dragging"),\r\n                                        t.slide.classList.remove(\r\n                                            "dragging-nav"\r\n                                        ),\r\n                                        (t.dragContainer.style.transform = ""),\r\n                                        (t.dragContainer.style.transition = "");\r\n                                }, 100);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "drag",\r\n                        value: function (e) {\r\n                            if (this.active) {\r\n                                e.preventDefault(),\r\n                                    this.slide.classList.add("dragging-nav"),\r\n                                    "touchmove" === e.type\r\n                                        ? ((this.currentX =\r\n                                              e.touches[0].clientX -\r\n                                              this.initialX),\r\n                                          (this.currentY =\r\n                                              e.touches[0].clientY -\r\n                                              this.initialY))\r\n                                        : ((this.currentX =\r\n                                              e.clientX - this.initialX),\r\n                                          (this.currentY =\r\n                                              e.clientY - this.initialY)),\r\n                                    (this.xOffset = this.currentX),\r\n                                    (this.yOffset = this.currentY),\r\n                                    (this.el.isDragging = !0),\r\n                                    (this.dragging = !0),\r\n                                    (this.doSlideChange = !1),\r\n                                    (this.doSlideClose = !1);\r\n                                var t = Math.abs(this.currentX),\r\n                                    i = Math.abs(this.currentY);\r\n                                if (\r\n                                    t > 0 &&\r\n                                    t >= Math.abs(this.currentY) &&\r\n                                    (!this.lastDirection ||\r\n                                        "x" == this.lastDirection)\r\n                                ) {\r\n                                    (this.yOffset = 0),\r\n                                        (this.lastDirection = "x"),\r\n                                        this.setTranslate(\r\n                                            this.dragContainer,\r\n                                            this.currentX,\r\n                                            0\r\n                                        );\r\n                                    var n = this.shouldChange();\r\n                                    if (\r\n                                        (!this.instance.settings.dragAutoSnap &&\r\n                                            n &&\r\n                                            (this.doSlideChange = n),\r\n                                        this.instance.settings.dragAutoSnap &&\r\n                                            n)\r\n                                    )\r\n                                        return (\r\n                                            (this.instance.preventOutsideClick =\r\n                                                !0),\r\n                                            (this.toleranceReached = !0),\r\n                                            (this.active = !1),\r\n                                            (this.instance.preventOutsideClick =\r\n                                                !0),\r\n                                            this.dragEnd(null),\r\n                                            "right" == n &&\r\n                                                this.instance.prevSlide(),\r\n                                            void (\r\n                                                "left" == n &&\r\n                                                this.instance.nextSlide()\r\n                                            )\r\n                                        );\r\n                                }\r\n                                if (\r\n                                    this.toleranceY > 0 &&\r\n                                    i > 0 &&\r\n                                    i >= t &&\r\n                                    (!this.lastDirection ||\r\n                                        "y" == this.lastDirection)\r\n                                ) {\r\n                                    (this.xOffset = 0),\r\n                                        (this.lastDirection = "y"),\r\n                                        this.setTranslate(\r\n                                            this.dragContainer,\r\n                                            0,\r\n                                            this.currentY\r\n                                        );\r\n                                    var s = this.shouldClose();\r\n                                    return (\r\n                                        !this.instance.settings.dragAutoSnap &&\r\n                                            s &&\r\n                                            (this.doSlideClose = !0),\r\n                                        void (\r\n                                            this.instance.settings\r\n                                                .dragAutoSnap &&\r\n                                            s &&\r\n                                            this.instance.close()\r\n                                        )\r\n                                    );\r\n                                }\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "shouldChange",\r\n                        value: function () {\r\n                            var e = !1;\r\n                            if (Math.abs(this.currentX) >= this.toleranceX) {\r\n                                var t = this.currentX > 0 ? "right" : "left";\r\n                                (("left" == t &&\r\n                                    this.slide !==\r\n                                        this.slide.parentNode.lastChild) ||\r\n                                    ("right" == t &&\r\n                                        this.slide !==\r\n                                            this.slide.parentNode\r\n                                                .firstChild)) &&\r\n                                    (e = t);\r\n                            }\r\n                            return e;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "shouldClose",\r\n                        value: function () {\r\n                            var e = !1;\r\n                            return (\r\n                                Math.abs(this.currentY) >= this.toleranceY &&\r\n                                    (e = !0),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setTranslate",\r\n                        value: function (e, t, i) {\r\n                            var n =\r\n                                arguments.length > 3 &&\r\n                                void 0 !== arguments[3] &&\r\n                                arguments[3];\r\n                            (e.style.transition = n ? "all .2s ease" : ""),\r\n                                (e.style.transform = "translate3d("\r\n                                    .concat(t, "px, ")\r\n                                    .concat(i, "px, 0)"));\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })();\r\n    function j(e, t, i, n) {\r\n        var s = e.querySelector(".gslide-media"),\r\n            l = new Image(),\r\n            o = "gSlideTitle_" + i,\r\n            r = "gSlideDesc_" + i;\r\n        l.addEventListener(\r\n            "load",\r\n            function () {\r\n                T(n) && n();\r\n            },\r\n            !1\r\n        ),\r\n            (l.src = t.href),\r\n            "" != t.sizes &&\r\n                "" != t.srcset &&\r\n                ((l.sizes = t.sizes), (l.srcset = t.srcset)),\r\n            (l.alt = ""),\r\n            I(t.alt) || "" === t.alt || (l.alt = t.alt),\r\n            "" !== t.title && l.setAttribute("aria-labelledby", o),\r\n            "" !== t.description && l.setAttribute("aria-describedby", r),\r\n            t.hasOwnProperty("_hasCustomWidth") &&\r\n                t._hasCustomWidth &&\r\n                (l.style.width = t.width),\r\n            t.hasOwnProperty("_hasCustomHeight") &&\r\n                t._hasCustomHeight &&\r\n                (l.style.height = t.height),\r\n            s.insertBefore(l, s.firstChild);\r\n    }\r\n    function F(e, t, i, n) {\r\n        var s = this,\r\n            l = e.querySelector(".ginner-container"),\r\n            o = "gvideo" + i,\r\n            r = e.querySelector(".gslide-media"),\r\n            a = this.getAllPlayers();\r\n        h(l, "gvideo-container"),\r\n            r.insertBefore(\r\n                m(\'<div class="gvideo-wrapper"></div>\'),\r\n                r.firstChild\r\n            );\r\n        var d = e.querySelector(".gvideo-wrapper");\r\n        S(this.settings.plyr.css, "Plyr");\r\n        var c = t.href,\r\n            u = location.protocol.replace(":", ""),\r\n            g = "",\r\n            v = "",\r\n            f = !1;\r\n        "file" == u && (u = "http"),\r\n            (r.style.maxWidth = t.width),\r\n            S(this.settings.plyr.js, "Plyr", function () {\r\n                if (c.match(/vimeo\\.com\\/([0-9]*)/)) {\r\n                    var l = /vimeo.*\\/(\\d+)/i.exec(c);\r\n                    (g = "vimeo"), (v = l[1]);\r\n                }\r\n                if (\r\n                    c.match(\r\n                        /(youtube\\.com|youtube-nocookie\\.com)\\/watch\\?v=([a-zA-Z0-9\\-_]+)/\r\n                    ) ||\r\n                    c.match(/youtu\\.be\\/([a-zA-Z0-9\\-_]+)/) ||\r\n                    c.match(\r\n                        /(youtube\\.com|youtube-nocookie\\.com)\\/embed\\/([a-zA-Z0-9\\-_]+)/\r\n                    )\r\n                ) {\r\n                    var r = (function (e) {\r\n                        var t = "";\r\n                        t =\r\n                            void 0 !==\r\n                            (e = e\r\n                                .replace(/(>|<)/gi, "")\r\n                                .split(\r\n                                    /(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/\r\n                                ))[2]\r\n                                ? (t = e[2].split(/[^0-9a-z_\\-]/i))[0]\r\n                                : e;\r\n                        return t;\r\n                    })(c);\r\n                    (g = "youtube"), (v = r);\r\n                }\r\n                if (null !== c.match(/\\.(mp4|ogg|webm|mov)$/)) {\r\n                    g = "local";\r\n                    var u = \'<video id="\' + o + \'" \';\r\n                    (u += \'style="background:#000; max-width: \'.concat(\r\n                        t.width,\r\n                        \';" \'\r\n                    )),\r\n                        (u += \'preload="metadata" \'),\r\n                        (u += \'x-webkit-airplay="allow" \'),\r\n                        (u += "playsinline "),\r\n                        (u += "controls "),\r\n                        (u += \'class="gvideo-local">\');\r\n                    var p = c.toLowerCase().split(".").pop(),\r\n                        y = { mp4: "", ogg: "", webm: "" };\r\n                    for (var x in ((y[(p = "mov" == p ? "mp4" : p)] = c), y))\r\n                        if (y.hasOwnProperty(x)) {\r\n                            var S = y[x];\r\n                            t.hasOwnProperty(x) && (S = t[x]),\r\n                                "" !== S &&\r\n                                    (u += \'<source src="\'\r\n                                        .concat(S, \'" type="video/\')\r\n                                        .concat(x, \'">\'));\r\n                        }\r\n                    f = m((u += "</video>"));\r\n                }\r\n                var w =\r\n                    f ||\r\n                    m(\r\n                        \'<div id="\'\r\n                            .concat(o, \'" data-plyr-provider="\')\r\n                            .concat(g, \'" data-plyr-embed-id="\')\r\n                            .concat(v, \'"></div>\')\r\n                    );\r\n                h(d, "".concat(g, "-video gvideo")),\r\n                    d.appendChild(w),\r\n                    d.setAttribute("data-id", o),\r\n                    d.setAttribute("data-index", i);\r\n                var C = O(s.settings.plyr, "config")\r\n                        ? s.settings.plyr.config\r\n                        : {},\r\n                    k = new Plyr("#" + o, C);\r\n                k.on("ready", function (e) {\r\n                    var t = e.detail.plyr;\r\n                    (a[o] = t), T(n) && n();\r\n                }),\r\n                    b(\r\n                        function () {\r\n                            return (\r\n                                e.querySelector("iframe") &&\r\n                                "true" ==\r\n                                    e.querySelector("iframe").dataset.ready\r\n                            );\r\n                        },\r\n                        function () {\r\n                            s.resize(e);\r\n                        }\r\n                    ),\r\n                    k.on("enterfullscreen", R),\r\n                    k.on("exitfullscreen", R);\r\n            });\r\n    }\r\n    function R(e) {\r\n        var t = u(e.target, ".gslide-media");\r\n        "enterfullscreen" == e.type && h(t, "fullscreen"),\r\n            "exitfullscreen" == e.type && d(t, "fullscreen");\r\n    }\r\n    function G(e, t, i, n) {\r\n        var s,\r\n            l = this,\r\n            o = e.querySelector(".gslide-media"),\r\n            r = !(!O(t, "href") || !t.href) && t.href.split("#").pop().trim(),\r\n            d = !(!O(t, "content") || !t.content) && t.content;\r\n        if (\r\n            d &&\r\n            (C(d) &&\r\n                (s = m(\'<div class="ginlined-content">\'.concat(d, "</div>"))),\r\n            k(d))\r\n        ) {\r\n            "none" == d.style.display && (d.style.display = "block");\r\n            var c = document.createElement("div");\r\n            (c.className = "ginlined-content"), c.appendChild(d), (s = c);\r\n        }\r\n        if (r) {\r\n            var u = document.getElementById(r);\r\n            if (!u) return !1;\r\n            var g = u.cloneNode(!0);\r\n            (g.style.height = t.height),\r\n                (g.style.maxWidth = t.width),\r\n                h(g, "ginlined-content"),\r\n                (s = g);\r\n        }\r\n        if (!s)\r\n            return (\r\n                console.error("Unable to append inline slide content", t), !1\r\n            );\r\n        (o.style.height = t.height),\r\n            (o.style.width = t.width),\r\n            o.appendChild(s),\r\n            (this.events["inlineclose" + r] = a("click", {\r\n                onElement: o.querySelectorAll(".gtrigger-close"),\r\n                withCallback: function (e) {\r\n                    e.preventDefault(), l.close();\r\n                },\r\n            })),\r\n            T(n) && n();\r\n    }\r\n    function Z(e, t, i, n) {\r\n        var s = e.querySelector(".gslide-media"),\r\n            l = (function (e) {\r\n                var t = e.url,\r\n                    i = e.allow,\r\n                    n = e.callback,\r\n                    s = e.appendTo,\r\n                    l = document.createElement("iframe");\r\n                return (\r\n                    (l.className = "vimeo-video gvideo"),\r\n                    (l.src = t),\r\n                    (l.style.width = "100%"),\r\n                    (l.style.height = "100%"),\r\n                    i && l.setAttribute("allow", i),\r\n                    (l.onload = function () {\r\n                        h(l, "node-ready"), T(n) && n();\r\n                    }),\r\n                    s && s.appendChild(l),\r\n                    l\r\n                );\r\n            })({ url: t.href, callback: n });\r\n        (s.parentNode.style.maxWidth = t.width),\r\n            (s.parentNode.style.height = t.height),\r\n            s.appendChild(l);\r\n    }\r\n    var $ = (function () {\r\n            function e() {\r\n                var i =\r\n                    arguments.length > 0 && void 0 !== arguments[0]\r\n                        ? arguments[0]\r\n                        : {};\r\n                t(this, e),\r\n                    (this.defaults = {\r\n                        href: "",\r\n                        sizes: "",\r\n                        srcset: "",\r\n                        title: "",\r\n                        type: "",\r\n                        description: "",\r\n                        alt: "",\r\n                        descPosition: "bottom",\r\n                        effect: "",\r\n                        width: "",\r\n                        height: "",\r\n                        content: !1,\r\n                        zoomable: !0,\r\n                        draggable: !0,\r\n                    }),\r\n                    L(i) && (this.defaults = l(this.defaults, i));\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "sourceType",\r\n                        value: function (e) {\r\n                            var t = e;\r\n                            if (\r\n                                null !==\r\n                                (e = e.toLowerCase()).match(\r\n                                    /\\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/\r\n                                )\r\n                            )\r\n                                return "image";\r\n                            if (\r\n                                e.match(\r\n                                    /(youtube\\.com|youtube-nocookie\\.com)\\/watch\\?v=([a-zA-Z0-9\\-_]+)/\r\n                                ) ||\r\n                                e.match(/youtu\\.be\\/([a-zA-Z0-9\\-_]+)/) ||\r\n                                e.match(\r\n                                    /(youtube\\.com|youtube-nocookie\\.com)\\/embed\\/([a-zA-Z0-9\\-_]+)/\r\n                                )\r\n                            )\r\n                                return "video";\r\n                            if (e.match(/vimeo\\.com\\/([0-9]*)/)) return "video";\r\n                            if (null !== e.match(/\\.(mp4|ogg|webm|mov)/))\r\n                                return "video";\r\n                            if (null !== e.match(/\\.(mp3|wav|wma|aac|ogg)/))\r\n                                return "audio";\r\n                            if (\r\n                                e.indexOf("#") > -1 &&\r\n                                "" !== t.split("#").pop().trim()\r\n                            )\r\n                                return "inline";\r\n                            return e.indexOf("goajax=true") > -1\r\n                                ? "ajax"\r\n                                : "external";\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "parseConfig",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = l(\r\n                                    { descPosition: t.descPosition },\r\n                                    this.defaults\r\n                                );\r\n                            if (L(e) && !k(e)) {\r\n                                O(e, "type") ||\r\n                                    (O(e, "content") && e.content\r\n                                        ? (e.type = "inline")\r\n                                        : O(e, "href") &&\r\n                                          (e.type = this.sourceType(e.href)));\r\n                                var s = l(n, e);\r\n                                return this.setSize(s, t), s;\r\n                            }\r\n                            var r = "",\r\n                                a = e.getAttribute("data-glightbox"),\r\n                                h = e.nodeName.toLowerCase();\r\n                            if (\r\n                                ("a" === h && (r = e.href),\r\n                                "img" === h && ((r = e.src), (n.alt = e.alt)),\r\n                                (n.href = r),\r\n                                o(n, function (s, l) {\r\n                                    O(t, l) && "width" !== l && (n[l] = t[l]);\r\n                                    var o = e.dataset[l];\r\n                                    I(o) || (n[l] = i.sanitizeValue(o));\r\n                                }),\r\n                                n.content && (n.type = "inline"),\r\n                                !n.type && r && (n.type = this.sourceType(r)),\r\n                                I(a))\r\n                            ) {\r\n                                if (!n.title && "a" == h) {\r\n                                    var d = e.title;\r\n                                    I(d) || "" === d || (n.title = d);\r\n                                }\r\n                                if (!n.title && "img" == h) {\r\n                                    var c = e.alt;\r\n                                    I(c) || "" === c || (n.title = c);\r\n                                }\r\n                            } else {\r\n                                var u = [];\r\n                                o(n, function (e, t) {\r\n                                    u.push(";\\\\s?" + t);\r\n                                }),\r\n                                    (u = u.join("\\\\s?:|")),\r\n                                    "" !== a.trim() &&\r\n                                        o(n, function (e, t) {\r\n                                            var s = a,\r\n                                                l = new RegExp(\r\n                                                    "s?" +\r\n                                                        t +\r\n                                                        "s?:s?(.*?)(" +\r\n                                                        u +\r\n                                                        "s?:|$)"\r\n                                                ),\r\n                                                o = s.match(l);\r\n                                            if (o && o.length && o[1]) {\r\n                                                var r = o[1]\r\n                                                    .trim()\r\n                                                    .replace(/;\\s*$/, "");\r\n                                                n[t] = i.sanitizeValue(r);\r\n                                            }\r\n                                        });\r\n                            }\r\n                            if (\r\n                                n.description &&\r\n                                "." === n.description.substring(0, 1)\r\n                            ) {\r\n                                var g;\r\n                                try {\r\n                                    g = document.querySelector(\r\n                                        n.description\r\n                                    ).innerHTML;\r\n                                } catch (e) {\r\n                                    if (!(e instanceof DOMException)) throw e;\r\n                                }\r\n                                g && (n.description = g);\r\n                            }\r\n                            if (!n.description) {\r\n                                var v = e.querySelector(".glightbox-desc");\r\n                                v && (n.description = v.innerHTML);\r\n                            }\r\n                            return (\r\n                                this.setSize(n, t, e), (this.slideConfig = n), n\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setSize",\r\n                        value: function (e, t) {\r\n                            var i =\r\n                                    arguments.length > 2 &&\r\n                                    void 0 !== arguments[2]\r\n                                        ? arguments[2]\r\n                                        : null,\r\n                                n =\r\n                                    "video" == e.type\r\n                                        ? this.checkSize(t.videosWidth)\r\n                                        : this.checkSize(t.width),\r\n                                s = this.checkSize(t.height);\r\n                            return (\r\n                                (e.width =\r\n                                    O(e, "width") && "" !== e.width\r\n                                        ? this.checkSize(e.width)\r\n                                        : n),\r\n                                (e.height =\r\n                                    O(e, "height") && "" !== e.height\r\n                                        ? this.checkSize(e.height)\r\n                                        : s),\r\n                                i &&\r\n                                    "image" == e.type &&\r\n                                    ((e._hasCustomWidth = !!i.dataset.width),\r\n                                    (e._hasCustomHeight = !!i.dataset.height)),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "checkSize",\r\n                        value: function (e) {\r\n                            return M(e) ? "".concat(e, "px") : e;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "sanitizeValue",\r\n                        value: function (e) {\r\n                            return "true" !== e && "false" !== e\r\n                                ? e\r\n                                : "true" === e;\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        U = (function () {\r\n            function e(i, n, s) {\r\n                t(this, e),\r\n                    (this.element = i),\r\n                    (this.instance = n),\r\n                    (this.index = s);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "setContent",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : null,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1] &&\r\n                                    arguments[1];\r\n                            if (c(t, "loaded")) return !1;\r\n                            var n = this.instance.settings,\r\n                                s = this.slideConfig,\r\n                                l = w();\r\n                            T(n.beforeSlideLoad) &&\r\n                                n.beforeSlideLoad({\r\n                                    index: this.index,\r\n                                    slide: t,\r\n                                    player: !1,\r\n                                });\r\n                            var o = s.type,\r\n                                r = s.descPosition,\r\n                                a = t.querySelector(".gslide-media"),\r\n                                d = t.querySelector(".gslide-title"),\r\n                                u = t.querySelector(".gslide-desc"),\r\n                                g = t.querySelector(".gdesc-inner"),\r\n                                v = i,\r\n                                f = "gSlideTitle_" + this.index,\r\n                                p = "gSlideDesc_" + this.index;\r\n                            if (\r\n                                (T(n.afterSlideLoad) &&\r\n                                    (v = function () {\r\n                                        T(i) && i(),\r\n                                            n.afterSlideLoad({\r\n                                                index: e.index,\r\n                                                slide: t,\r\n                                                player: e.instance.getSlidePlayerInstance(\r\n                                                    e.index\r\n                                                ),\r\n                                            });\r\n                                    }),\r\n                                "" == s.title && "" == s.description\r\n                                    ? g &&\r\n                                      g.parentNode.parentNode.removeChild(\r\n                                          g.parentNode\r\n                                      )\r\n                                    : (d && "" !== s.title\r\n                                          ? ((d.id = f),\r\n                                            (d.innerHTML = s.title))\r\n                                          : d.parentNode.removeChild(d),\r\n                                      u && "" !== s.description\r\n                                          ? ((u.id = p),\r\n                                            l && n.moreLength > 0\r\n                                                ? ((s.smallDescription =\r\n                                                      this.slideShortDesc(\r\n                                                          s.description,\r\n                                                          n.moreLength,\r\n                                                          n.moreText\r\n                                                      )),\r\n                                                  (u.innerHTML =\r\n                                                      s.smallDescription),\r\n                                                  this.descriptionEvents(u, s))\r\n                                                : (u.innerHTML = s.description))\r\n                                          : u.parentNode.removeChild(u),\r\n                                      h(a.parentNode, "desc-".concat(r)),\r\n                                      h(\r\n                                          g.parentNode,\r\n                                          "description-".concat(r)\r\n                                      )),\r\n                                h(a, "gslide-".concat(o)),\r\n                                h(t, "loaded"),\r\n                                "video" !== o)\r\n                            ) {\r\n                                if ("external" !== o)\r\n                                    return "inline" === o\r\n                                        ? (G.apply(this.instance, [\r\n                                              t,\r\n                                              s,\r\n                                              this.index,\r\n                                              v,\r\n                                          ]),\r\n                                          void (\r\n                                              s.draggable &&\r\n                                              new V({\r\n                                                  dragEl: t.querySelector(\r\n                                                      ".gslide-inline"\r\n                                                  ),\r\n                                                  toleranceX: n.dragToleranceX,\r\n                                                  toleranceY: n.dragToleranceY,\r\n                                                  slide: t,\r\n                                                  instance: this.instance,\r\n                                              })\r\n                                          ))\r\n                                        : void ("image" !== o\r\n                                              ? T(v) && v()\r\n                                              : j(\r\n                                                    t,\r\n                                                    s,\r\n                                                    this.index,\r\n                                                    function () {\r\n                                                        var i =\r\n                                                            t.querySelector(\r\n                                                                "img"\r\n                                                            );\r\n                                                        s.draggable &&\r\n                                                            new V({\r\n                                                                dragEl: i,\r\n                                                                toleranceX:\r\n                                                                    n.dragToleranceX,\r\n                                                                toleranceY:\r\n                                                                    n.dragToleranceY,\r\n                                                                slide: t,\r\n                                                                instance:\r\n                                                                    e.instance,\r\n                                                            }),\r\n                                                            s.zoomable &&\r\n                                                                i.naturalWidth >\r\n                                                                    i.offsetWidth &&\r\n                                                                (h(\r\n                                                                    i,\r\n                                                                    "zoomable"\r\n                                                                ),\r\n                                                                new H(\r\n                                                                    i,\r\n                                                                    t,\r\n                                                                    function () {\r\n                                                                        e.instance.resize();\r\n                                                                    }\r\n                                                                )),\r\n                                                            T(v) && v();\r\n                                                    }\r\n                                                ));\r\n                                Z.apply(this, [t, s, this.index, v]);\r\n                            } else\r\n                                F.apply(this.instance, [t, s, this.index, v]);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideShortDesc",\r\n                        value: function (e) {\r\n                            var t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : 50,\r\n                                i =\r\n                                    arguments.length > 2 &&\r\n                                    void 0 !== arguments[2] &&\r\n                                    arguments[2],\r\n                                n = document.createElement("div");\r\n                            n.innerHTML = e;\r\n                            var s = n.innerText,\r\n                                l = i;\r\n                            if ((e = s.trim()).length <= t) return e;\r\n                            var o = e.substr(0, t - 1);\r\n                            return l\r\n                                ? ((n = null),\r\n                                  o +\r\n                                      \'... <a href="#" class="desc-more">\' +\r\n                                      i +\r\n                                      "</a>")\r\n                                : o;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "descriptionEvents",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = e.querySelector(".desc-more");\r\n                            if (!n) return !1;\r\n                            a("click", {\r\n                                onElement: n,\r\n                                withCallback: function (e, n) {\r\n                                    e.preventDefault();\r\n                                    var s = document.body,\r\n                                        l = u(n, ".gslide-desc");\r\n                                    if (!l) return !1;\r\n                                    (l.innerHTML = t.description),\r\n                                        h(s, "gdesc-open");\r\n                                    var o = a("click", {\r\n                                        onElement: [\r\n                                            s,\r\n                                            u(l, ".gslide-description"),\r\n                                        ],\r\n                                        withCallback: function (e, n) {\r\n                                            "a" !==\r\n                                                e.target.nodeName.toLowerCase() &&\r\n                                                (d(s, "gdesc-open"),\r\n                                                h(s, "gdesc-closed"),\r\n                                                (l.innerHTML =\r\n                                                    t.smallDescription),\r\n                                                i.descriptionEvents(l, t),\r\n                                                setTimeout(function () {\r\n                                                    d(s, "gdesc-closed");\r\n                                                }, 400),\r\n                                                o.destroy());\r\n                                        },\r\n                                    });\r\n                                },\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "create",\r\n                        value: function () {\r\n                            return m(this.instance.settings.slideHTML);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getConfig",\r\n                        value: function () {\r\n                            k(this.element) ||\r\n                                this.element.hasOwnProperty("draggable") ||\r\n                                (this.element.draggable =\r\n                                    this.instance.settings.draggable);\r\n                            var e = new $(\r\n                                this.instance.settings.slideExtraAttributes\r\n                            );\r\n                            return (\r\n                                (this.slideConfig = e.parseConfig(\r\n                                    this.element,\r\n                                    this.instance.settings\r\n                                )),\r\n                                this.slideConfig\r\n                            );\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        J = w(),\r\n        K =\r\n            null !== w() ||\r\n            void 0 !== document.createTouch ||\r\n            "ontouchstart" in window ||\r\n            "onmsgesturechange" in window ||\r\n            navigator.msMaxTouchPoints,\r\n        Q = document.getElementsByTagName("html")[0],\r\n        ee = {\r\n            selector: ".glightbox",\r\n            elements: null,\r\n            skin: "clean",\r\n            theme: "clean",\r\n            closeButton: !0,\r\n            startAt: null,\r\n            autoplayVideos: !0,\r\n            autofocusVideos: !0,\r\n            descPosition: "bottom",\r\n            width: "900px",\r\n            height: "506px",\r\n            videosWidth: "960px",\r\n            beforeSlideChange: null,\r\n            afterSlideChange: null,\r\n            beforeSlideLoad: null,\r\n            afterSlideLoad: null,\r\n            slideInserted: null,\r\n            slideRemoved: null,\r\n            slideExtraAttributes: null,\r\n            onOpen: null,\r\n            onClose: null,\r\n            loop: !1,\r\n            zoomable: !0,\r\n            draggable: !0,\r\n            dragAutoSnap: !1,\r\n            dragToleranceX: 40,\r\n            dragToleranceY: 65,\r\n            preload: !0,\r\n            oneSlidePerOpen: !1,\r\n            touchNavigation: !0,\r\n            touchFollowAxis: !0,\r\n            keyboardNavigation: !0,\r\n            closeOnOutsideClick: !0,\r\n            plugins: !1,\r\n            plyr: {\r\n                css: "https://cdn.plyr.io/3.6.8/plyr.css",\r\n                js: "https://cdn.plyr.io/3.6.8/plyr.js",\r\n                config: {\r\n                    ratio: "16:9",\r\n                    fullscreen: { enabled: !0, iosNative: !0 },\r\n                    youtube: {\r\n                        noCookie: !0,\r\n                        rel: 0,\r\n                        showinfo: 0,\r\n                        iv_load_policy: 3,\r\n                    },\r\n                    vimeo: {\r\n                        byline: !1,\r\n                        portrait: !1,\r\n                        title: !1,\r\n                        transparent: !1,\r\n                    },\r\n                },\r\n            },\r\n            openEffect: "zoom",\r\n            closeEffect: "zoom",\r\n            slideEffect: "slide",\r\n            moreText: "See more",\r\n            moreLength: 60,\r\n            cssEfects: {\r\n                fade: { in: "fadeIn", out: "fadeOut" },\r\n                zoom: { in: "zoomIn", out: "zoomOut" },\r\n                slide: { in: "slideInRight", out: "slideOutLeft" },\r\n                slideBack: { in: "slideInLeft", out: "slideOutRight" },\r\n                none: { in: "none", out: "none" },\r\n            },\r\n            svg: {\r\n                close: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>\',\r\n                next: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>\',\r\n                prev: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>\',\r\n            },\r\n            slideHTML:\r\n                \'<div class="gslide">\\n    <div class="gslide-inner-content">\\n        <div class="ginner-container">\\n            <div class="gslide-media">\\n            </div>\\n            <div class="gslide-description">\\n                <div class="gdesc-inner">\\n                    <h4 class="gslide-title"></h4>\\n                    <div class="gslide-desc"></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\',\r\n            lightboxHTML:\r\n                \'<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\\n    <div class="gloader visible"></div>\\n    <div class="goverlay"></div>\\n    <div class="gcontainer">\\n    <div id="glightbox-slider" class="gslider"></div>\\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\\n</div>\\n</div>\',\r\n        },\r\n        te = (function () {\r\n            function e() {\r\n                var i =\r\n                    arguments.length > 0 && void 0 !== arguments[0]\r\n                        ? arguments[0]\r\n                        : {};\r\n                t(this, e),\r\n                    (this.customOptions = i),\r\n                    (this.settings = l(ee, i)),\r\n                    (this.effectsClasses = this.getAnimationClasses()),\r\n                    (this.videoPlayers = {}),\r\n                    (this.apiEvents = []),\r\n                    (this.fullElementsList = !1);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "init",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t = this.getSelector();\r\n                            t &&\r\n                                (this.baseEvents = a("click", {\r\n                                    onElement: t,\r\n                                    withCallback: function (t, i) {\r\n                                        t.preventDefault(), e.open(i);\r\n                                    },\r\n                                })),\r\n                                (this.elements = this.getElements());\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "open",\r\n                        value: function () {\r\n                            var e =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : null,\r\n                                t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : null;\r\n                            if (0 == this.elements.length) return !1;\r\n                            (this.activeSlide = null),\r\n                                (this.prevActiveSlideIndex = null),\r\n                                (this.prevActiveSlide = null);\r\n                            var i = M(t) ? t : this.settings.startAt;\r\n                            if (k(e)) {\r\n                                var n = e.getAttribute("data-gallery");\r\n                                n &&\r\n                                    ((this.fullElementsList = this.elements),\r\n                                    (this.elements = this.getGalleryElements(\r\n                                        this.elements,\r\n                                        n\r\n                                    ))),\r\n                                    I(i) &&\r\n                                        (i = this.getElementIndex(e)) < 0 &&\r\n                                        (i = 0);\r\n                            }\r\n                            M(i) || (i = 0),\r\n                                this.build(),\r\n                                g(\r\n                                    this.overlay,\r\n                                    "none" == this.settings.openEffect\r\n                                        ? "none"\r\n                                        : this.settings.cssEfects.fade.in\r\n                                );\r\n                            var s = document.body,\r\n                                l =\r\n                                    window.innerWidth -\r\n                                    document.documentElement.clientWidth;\r\n                            if (l > 0) {\r\n                                var o = document.createElement("style");\r\n                                (o.type = "text/css"),\r\n                                    (o.className = "gcss-styles"),\r\n                                    (o.innerText =\r\n                                        ".gscrollbar-fixer {margin-right: ".concat(\r\n                                            l,\r\n                                            "px}"\r\n                                        )),\r\n                                    document.head.appendChild(o),\r\n                                    h(s, "gscrollbar-fixer");\r\n                            }\r\n                            h(s, "glightbox-open"),\r\n                                h(Q, "glightbox-open"),\r\n                                J &&\r\n                                    (h(document.body, "glightbox-mobile"),\r\n                                    (this.settings.slideEffect = "slide")),\r\n                                this.showSlide(i, !0),\r\n                                1 == this.elements.length\r\n                                    ? (h(\r\n                                          this.prevButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ),\r\n                                      h(\r\n                                          this.nextButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ))\r\n                                    : (d(\r\n                                          this.prevButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ),\r\n                                      d(\r\n                                          this.nextButton,\r\n                                          "glightbox-button-hidden"\r\n                                      )),\r\n                                (this.lightboxOpen = !0),\r\n                                this.trigger("open"),\r\n                                T(this.settings.onOpen) &&\r\n                                    this.settings.onOpen(),\r\n                                K && this.settings.touchNavigation && B(this),\r\n                                this.settings.keyboardNavigation && X(this);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "openAt",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : 0;\r\n                            this.open(null, e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "showSlide",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : 0,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1] &&\r\n                                    arguments[1];\r\n                            f(this.loader), (this.index = parseInt(t));\r\n                            var n =\r\n                                this.slidesContainer.querySelector(".current");\r\n                            n && d(n, "current"), this.slideAnimateOut();\r\n                            var s =\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[t];\r\n                            if (c(s, "loaded"))\r\n                                this.slideAnimateIn(s, i), p(this.loader);\r\n                            else {\r\n                                f(this.loader);\r\n                                var l = this.elements[t],\r\n                                    o = {\r\n                                        index: this.index,\r\n                                        slide: s,\r\n                                        slideNode: s,\r\n                                        slideConfig: l.slideConfig,\r\n                                        slideIndex: this.index,\r\n                                        trigger: l.node,\r\n                                        player: null,\r\n                                    };\r\n                                this.trigger("slide_before_load", o),\r\n                                    l.instance.setContent(s, function () {\r\n                                        p(e.loader),\r\n                                            e.resize(),\r\n                                            e.slideAnimateIn(s, i),\r\n                                            e.trigger("slide_after_load", o);\r\n                                    });\r\n                            }\r\n                            (this.slideDescription = s.querySelector(\r\n                                ".gslide-description"\r\n                            )),\r\n                                (this.slideDescriptionContained =\r\n                                    this.slideDescription &&\r\n                                    c(\r\n                                        this.slideDescription.parentNode,\r\n                                        "gslide-media"\r\n                                    )),\r\n                                this.settings.preload &&\r\n                                    (this.preloadSlide(t + 1),\r\n                                    this.preloadSlide(t - 1)),\r\n                                this.updateNavigationClasses(),\r\n                                (this.activeSlide = s);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "preloadSlide",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            if (e < 0 || e > this.elements.length - 1)\r\n                                return !1;\r\n                            if (I(this.elements[e])) return !1;\r\n                            var i =\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[e];\r\n                            if (c(i, "loaded")) return !1;\r\n                            var n = this.elements[e],\r\n                                s = n.type,\r\n                                l = {\r\n                                    index: e,\r\n                                    slide: i,\r\n                                    slideNode: i,\r\n                                    slideConfig: n.slideConfig,\r\n                                    slideIndex: e,\r\n                                    trigger: n.node,\r\n                                    player: null,\r\n                                };\r\n                            this.trigger("slide_before_load", l),\r\n                                "video" == s || "external" == s\r\n                                    ? setTimeout(function () {\r\n                                          n.instance.setContent(i, function () {\r\n                                              t.trigger("slide_after_load", l);\r\n                                          });\r\n                                      }, 200)\r\n                                    : n.instance.setContent(i, function () {\r\n                                          t.trigger("slide_after_load", l);\r\n                                      });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "prevSlide",\r\n                        value: function () {\r\n                            this.goToSlide(this.index - 1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "nextSlide",\r\n                        value: function () {\r\n                            this.goToSlide(this.index + 1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "goToSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 &&\r\n                                void 0 !== arguments[0] &&\r\n                                arguments[0];\r\n                            if (\r\n                                ((this.prevActiveSlide = this.activeSlide),\r\n                                (this.prevActiveSlideIndex = this.index),\r\n                                !this.loop() &&\r\n                                    (e < 0 || e > this.elements.length - 1))\r\n                            )\r\n                                return !1;\r\n                            e < 0\r\n                                ? (e = this.elements.length - 1)\r\n                                : e >= this.elements.length && (e = 0),\r\n                                this.showSlide(e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "insertSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : {},\r\n                                t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : -1;\r\n                            t < 0 && (t = this.elements.length);\r\n                            var i = new U(e, this, t),\r\n                                n = i.getConfig(),\r\n                                s = l({}, n),\r\n                                o = i.create(),\r\n                                r = this.elements.length - 1;\r\n                            (s.index = t),\r\n                                (s.node = !1),\r\n                                (s.instance = i),\r\n                                (s.slideConfig = n),\r\n                                this.elements.splice(t, 0, s);\r\n                            var a = null,\r\n                                h = null;\r\n                            if (this.slidesContainer) {\r\n                                if (t > r) this.slidesContainer.appendChild(o);\r\n                                else {\r\n                                    var d =\r\n                                        this.slidesContainer.querySelectorAll(\r\n                                            ".gslide"\r\n                                        )[t];\r\n                                    this.slidesContainer.insertBefore(o, d);\r\n                                }\r\n                                ((this.settings.preload &&\r\n                                    0 == this.index &&\r\n                                    0 == t) ||\r\n                                    this.index - 1 == t ||\r\n                                    this.index + 1 == t) &&\r\n                                    this.preloadSlide(t),\r\n                                    0 == this.index &&\r\n                                        0 == t &&\r\n                                        (this.index = 1),\r\n                                    this.updateNavigationClasses(),\r\n                                    (a =\r\n                                        this.slidesContainer.querySelectorAll(\r\n                                            ".gslide"\r\n                                        )[t]),\r\n                                    (h = this.getSlidePlayerInstance(t)),\r\n                                    (s.slideNode = a);\r\n                            }\r\n                            this.trigger("slide_inserted", {\r\n                                index: t,\r\n                                slide: a,\r\n                                slideNode: a,\r\n                                slideConfig: n,\r\n                                slideIndex: t,\r\n                                trigger: null,\r\n                                player: h,\r\n                            }),\r\n                                T(this.settings.slideInserted) &&\r\n                                    this.settings.slideInserted({\r\n                                        index: t,\r\n                                        slide: a,\r\n                                        player: h,\r\n                                    });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "removeSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : -1;\r\n                            if (e < 0 || e > this.elements.length - 1)\r\n                                return !1;\r\n                            var t =\r\n                                this.slidesContainer &&\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[e];\r\n                            t &&\r\n                                (this.getActiveSlideIndex() == e &&\r\n                                    (e == this.elements.length - 1\r\n                                        ? this.prevSlide()\r\n                                        : this.nextSlide()),\r\n                                t.parentNode.removeChild(t)),\r\n                                this.elements.splice(e, 1),\r\n                                this.trigger("slide_removed", e),\r\n                                T(this.settings.slideRemoved) &&\r\n                                    this.settings.slideRemoved(e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideAnimateIn",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = e.querySelector(".gslide-media"),\r\n                                s = e.querySelector(".gslide-description"),\r\n                                l = {\r\n                                    index: this.prevActiveSlideIndex,\r\n                                    slide: this.prevActiveSlide,\r\n                                    slideNode: this.prevActiveSlide,\r\n                                    slideIndex: this.prevActiveSlide,\r\n                                    slideConfig: I(this.prevActiveSlideIndex)\r\n                                        ? null\r\n                                        : this.elements[\r\n                                              this.prevActiveSlideIndex\r\n                                          ].slideConfig,\r\n                                    trigger: I(this.prevActiveSlideIndex)\r\n                                        ? null\r\n                                        : this.elements[\r\n                                              this.prevActiveSlideIndex\r\n                                          ].node,\r\n                                    player: this.getSlidePlayerInstance(\r\n                                        this.prevActiveSlideIndex\r\n                                    ),\r\n                                },\r\n                                o = {\r\n                                    index: this.index,\r\n                                    slide: this.activeSlide,\r\n                                    slideNode: this.activeSlide,\r\n                                    slideConfig:\r\n                                        this.elements[this.index].slideConfig,\r\n                                    slideIndex: this.index,\r\n                                    trigger: this.elements[this.index].node,\r\n                                    player: this.getSlidePlayerInstance(\r\n                                        this.index\r\n                                    ),\r\n                                };\r\n                            if (\r\n                                (n.offsetWidth > 0 &&\r\n                                    s &&\r\n                                    (p(s), (s.style.display = "")),\r\n                                d(e, this.effectsClasses),\r\n                                t)\r\n                            )\r\n                                g(\r\n                                    e,\r\n                                    this.settings.cssEfects[\r\n                                        this.settings.openEffect\r\n                                    ].in,\r\n                                    function () {\r\n                                        i.settings.autoplayVideos &&\r\n                                            i.slidePlayerPlay(e),\r\n                                            i.trigger("slide_changed", {\r\n                                                prev: l,\r\n                                                current: o,\r\n                                            }),\r\n                                            T(i.settings.afterSlideChange) &&\r\n                                                i.settings.afterSlideChange.apply(\r\n                                                    i,\r\n                                                    [l, o]\r\n                                                );\r\n                                    }\r\n                                );\r\n                            else {\r\n                                var r = this.settings.slideEffect,\r\n                                    a =\r\n                                        "none" !== r\r\n                                            ? this.settings.cssEfects[r].in\r\n                                            : r;\r\n                                this.prevActiveSlideIndex > this.index &&\r\n                                    "slide" == this.settings.slideEffect &&\r\n                                    (a = this.settings.cssEfects.slideBack.in),\r\n                                    g(e, a, function () {\r\n                                        i.settings.autoplayVideos &&\r\n                                            i.slidePlayerPlay(e),\r\n                                            i.trigger("slide_changed", {\r\n                                                prev: l,\r\n                                                current: o,\r\n                                            }),\r\n                                            T(i.settings.afterSlideChange) &&\r\n                                                i.settings.afterSlideChange.apply(\r\n                                                    i,\r\n                                                    [l, o]\r\n                                                );\r\n                                    });\r\n                            }\r\n                            setTimeout(function () {\r\n                                i.resize(e);\r\n                            }, 100),\r\n                                h(e, "current");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideAnimateOut",\r\n                        value: function () {\r\n                            if (!this.prevActiveSlide) return !1;\r\n                            var e = this.prevActiveSlide;\r\n                            d(e, this.effectsClasses), h(e, "prev");\r\n                            var t = this.settings.slideEffect,\r\n                                i =\r\n                                    "none" !== t\r\n                                        ? this.settings.cssEfects[t].out\r\n                                        : t;\r\n                            this.slidePlayerPause(e),\r\n                                this.trigger("slide_before_change", {\r\n                                    prev: {\r\n                                        index: this.prevActiveSlideIndex,\r\n                                        slide: this.prevActiveSlide,\r\n                                        slideNode: this.prevActiveSlide,\r\n                                        slideIndex: this.prevActiveSlideIndex,\r\n                                        slideConfig: I(\r\n                                            this.prevActiveSlideIndex\r\n                                        )\r\n                                            ? null\r\n                                            : this.elements[\r\n                                                  this.prevActiveSlideIndex\r\n                                              ].slideConfig,\r\n                                        trigger: I(this.prevActiveSlideIndex)\r\n                                            ? null\r\n                                            : this.elements[\r\n                                                  this.prevActiveSlideIndex\r\n                                              ].node,\r\n                                        player: this.getSlidePlayerInstance(\r\n                                            this.prevActiveSlideIndex\r\n                                        ),\r\n                                    },\r\n                                    current: {\r\n                                        index: this.index,\r\n                                        slide: this.activeSlide,\r\n                                        slideNode: this.activeSlide,\r\n                                        slideIndex: this.index,\r\n                                        slideConfig:\r\n                                            this.elements[this.index]\r\n                                                .slideConfig,\r\n                                        trigger: this.elements[this.index].node,\r\n                                        player: this.getSlidePlayerInstance(\r\n                                            this.index\r\n                                        ),\r\n                                    },\r\n                                }),\r\n                                T(this.settings.beforeSlideChange) &&\r\n                                    this.settings.beforeSlideChange.apply(\r\n                                        this,\r\n                                        [\r\n                                            {\r\n                                                index: this\r\n                                                    .prevActiveSlideIndex,\r\n                                                slide: this.prevActiveSlide,\r\n                                                player: this.getSlidePlayerInstance(\r\n                                                    this.prevActiveSlideIndex\r\n                                                ),\r\n                                            },\r\n                                            {\r\n                                                index: this.index,\r\n                                                slide: this.activeSlide,\r\n                                                player: this.getSlidePlayerInstance(\r\n                                                    this.index\r\n                                                ),\r\n                                            },\r\n                                        ]\r\n                                    ),\r\n                                this.prevActiveSlideIndex > this.index &&\r\n                                    "slide" == this.settings.slideEffect &&\r\n                                    (i = this.settings.cssEfects.slideBack.out),\r\n                                g(e, i, function () {\r\n                                    var t =\r\n                                            e.querySelector(\r\n                                                ".ginner-container"\r\n                                            ),\r\n                                        i = e.querySelector(".gslide-media"),\r\n                                        n = e.querySelector(\r\n                                            ".gslide-description"\r\n                                        );\r\n                                    (t.style.transform = ""),\r\n                                        (i.style.transform = ""),\r\n                                        d(i, "greset"),\r\n                                        (i.style.opacity = ""),\r\n                                        n && (n.style.opacity = ""),\r\n                                        d(e, "prev");\r\n                                });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getAllPlayers",\r\n                        value: function () {\r\n                            return this.videoPlayers;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getSlidePlayerInstance",\r\n                        value: function (e) {\r\n                            var t = "gvideo" + e,\r\n                                i = this.getAllPlayers();\r\n                            return !(!O(i, t) || !i[t]) && i[t];\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "stopSlideVideo",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            console.log(\r\n                                "stopSlideVideo is deprecated, use slidePlayerPause"\r\n                            );\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && i.playing && i.pause();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slidePlayerPause",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && i.playing && i.pause();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "playSlideVideo",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            console.log(\r\n                                "playSlideVideo is deprecated, use slidePlayerPlay"\r\n                            );\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && !i.playing && i.play();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slidePlayerPlay",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i &&\r\n                                !i.playing &&\r\n                                (i.play(),\r\n                                this.settings.autofocusVideos &&\r\n                                    i.elements.container.focus());\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setElements",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            this.settings.elements = !1;\r\n                            var i = [];\r\n                            e &&\r\n                                e.length &&\r\n                                o(e, function (e, n) {\r\n                                    var s = new U(e, t, n),\r\n                                        o = s.getConfig(),\r\n                                        r = l({}, o);\r\n                                    (r.slideConfig = o),\r\n                                        (r.instance = s),\r\n                                        (r.index = n),\r\n                                        i.push(r);\r\n                                }),\r\n                                (this.elements = i),\r\n                                this.lightboxOpen &&\r\n                                    ((this.slidesContainer.innerHTML = ""),\r\n                                    this.elements.length &&\r\n                                        (o(this.elements, function () {\r\n                                            var e = m(t.settings.slideHTML);\r\n                                            t.slidesContainer.appendChild(e);\r\n                                        }),\r\n                                        this.showSlide(0, !0)));\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getElementIndex",\r\n                        value: function (e) {\r\n                            var t = !1;\r\n                            return (\r\n                                o(this.elements, function (i, n) {\r\n                                    if (O(i, "node") && i.node == e)\r\n                                        return (t = n), !0;\r\n                                }),\r\n                                t\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getElements",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t = [];\r\n                            (this.elements = this.elements\r\n                                ? this.elements\r\n                                : []),\r\n                                !I(this.settings.elements) &&\r\n                                    E(this.settings.elements) &&\r\n                                    this.settings.elements.length &&\r\n                                    o(this.settings.elements, function (i, n) {\r\n                                        var s = new U(i, e, n),\r\n                                            o = s.getConfig(),\r\n                                            r = l({}, o);\r\n                                        (r.node = !1),\r\n                                            (r.index = n),\r\n                                            (r.instance = s),\r\n                                            (r.slideConfig = o),\r\n                                            t.push(r);\r\n                                    });\r\n                            var i = !1;\r\n                            return (\r\n                                this.getSelector() &&\r\n                                    (i = document.querySelectorAll(\r\n                                        this.getSelector()\r\n                                    )),\r\n                                i\r\n                                    ? (o(i, function (i, n) {\r\n                                          var s = new U(i, e, n),\r\n                                              o = s.getConfig(),\r\n                                              r = l({}, o);\r\n                                          (r.node = i),\r\n                                              (r.index = n),\r\n                                              (r.instance = s),\r\n                                              (r.slideConfig = o),\r\n                                              (r.gallery =\r\n                                                  i.getAttribute(\r\n                                                      "data-gallery"\r\n                                                  )),\r\n                                              t.push(r);\r\n                                      }),\r\n                                      t)\r\n                                    : t\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getGalleryElements",\r\n                        value: function (e, t) {\r\n                            return e.filter(function (e) {\r\n                                return e.gallery == t;\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getSelector",\r\n                        value: function () {\r\n                            return (\r\n                                !this.settings.elements &&\r\n                                (this.settings.selector &&\r\n                                "data-" ==\r\n                                    this.settings.selector.substring(0, 5)\r\n                                    ? "*[".concat(this.settings.selector, "]")\r\n                                    : this.settings.selector)\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getActiveSlide",\r\n                        value: function () {\r\n                            return this.slidesContainer.querySelectorAll(\r\n                                ".gslide"\r\n                            )[this.index];\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getActiveSlideIndex",\r\n                        value: function () {\r\n                            return this.index;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getAnimationClasses",\r\n                        value: function () {\r\n                            var e = [];\r\n                            for (var t in this.settings.cssEfects)\r\n                                if (this.settings.cssEfects.hasOwnProperty(t)) {\r\n                                    var i = this.settings.cssEfects[t];\r\n                                    e.push("g".concat(i.in)),\r\n                                        e.push("g".concat(i.out));\r\n                                }\r\n                            return e.join(" ");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "build",\r\n                        value: function () {\r\n                            var e = this;\r\n                            if (this.built) return !1;\r\n                            var t = document.body.childNodes,\r\n                                i = [];\r\n                            o(t, function (e) {\r\n                                e.parentNode == document.body &&\r\n                                    "#" !== e.nodeName.charAt(0) &&\r\n                                    e.hasAttribute &&\r\n                                    !e.hasAttribute("aria-hidden") &&\r\n                                    (i.push(e),\r\n                                    e.setAttribute("aria-hidden", "true"));\r\n                            });\r\n                            var n = O(this.settings.svg, "next")\r\n                                    ? this.settings.svg.next\r\n                                    : "",\r\n                                s = O(this.settings.svg, "prev")\r\n                                    ? this.settings.svg.prev\r\n                                    : "",\r\n                                l = O(this.settings.svg, "close")\r\n                                    ? this.settings.svg.close\r\n                                    : "",\r\n                                r = this.settings.lightboxHTML;\r\n                            (r = m(\r\n                                (r = (r = (r = r.replace(\r\n                                    /{nextSVG}/g,\r\n                                    n\r\n                                )).replace(/{prevSVG}/g, s)).replace(\r\n                                    /{closeSVG}/g,\r\n                                    l\r\n                                ))\r\n                            )),\r\n                                document.body.appendChild(r);\r\n                            var d = document.getElementById("glightbox-body");\r\n                            this.modal = d;\r\n                            var g = d.querySelector(".gclose");\r\n                            (this.prevButton = d.querySelector(".gprev")),\r\n                                (this.nextButton = d.querySelector(".gnext")),\r\n                                (this.overlay = d.querySelector(".goverlay")),\r\n                                (this.loader = d.querySelector(".gloader")),\r\n                                (this.slidesContainer =\r\n                                    document.getElementById(\r\n                                        "glightbox-slider"\r\n                                    )),\r\n                                (this.bodyHiddenChildElms = i),\r\n                                (this.events = {}),\r\n                                h(\r\n                                    this.modal,\r\n                                    "glightbox-" + this.settings.skin\r\n                                ),\r\n                                this.settings.closeButton &&\r\n                                    g &&\r\n                                    (this.events.close = a("click", {\r\n                                        onElement: g,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.close();\r\n                                        },\r\n                                    })),\r\n                                g &&\r\n                                    !this.settings.closeButton &&\r\n                                    g.parentNode.removeChild(g),\r\n                                this.nextButton &&\r\n                                    (this.events.next = a("click", {\r\n                                        onElement: this.nextButton,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.nextSlide();\r\n                                        },\r\n                                    })),\r\n                                this.prevButton &&\r\n                                    (this.events.prev = a("click", {\r\n                                        onElement: this.prevButton,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.prevSlide();\r\n                                        },\r\n                                    })),\r\n                                this.settings.closeOnOutsideClick &&\r\n                                    (this.events.outClose = a("click", {\r\n                                        onElement: d,\r\n                                        withCallback: function (t, i) {\r\n                                            e.preventOutsideClick ||\r\n                                                c(\r\n                                                    document.body,\r\n                                                    "glightbox-mobile"\r\n                                                ) ||\r\n                                                u(\r\n                                                    t.target,\r\n                                                    ".ginner-container"\r\n                                                ) ||\r\n                                                u(t.target, ".gbtn") ||\r\n                                                c(t.target, "gnext") ||\r\n                                                c(t.target, "gprev") ||\r\n                                                e.close();\r\n                                        },\r\n                                    })),\r\n                                o(this.elements, function (t, i) {\r\n                                    e.slidesContainer.appendChild(\r\n                                        t.instance.create()\r\n                                    ),\r\n                                        (t.slideNode =\r\n                                            e.slidesContainer.querySelectorAll(\r\n                                                ".gslide"\r\n                                            )[i]);\r\n                                }),\r\n                                K && h(document.body, "glightbox-touch"),\r\n                                (this.events.resize = a("resize", {\r\n                                    onElement: window,\r\n                                    withCallback: function () {\r\n                                        e.resize();\r\n                                    },\r\n                                })),\r\n                                (this.built = !0);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "resize",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : null;\r\n                            if (\r\n                                (e = e || this.activeSlide) &&\r\n                                !c(e, "zoomed")\r\n                            ) {\r\n                                var t = y(),\r\n                                    i = e.querySelector(".gvideo-wrapper"),\r\n                                    n = e.querySelector(".gslide-image"),\r\n                                    s = this.slideDescription,\r\n                                    l = t.width,\r\n                                    o = t.height;\r\n                                if (\r\n                                    (l <= 768\r\n                                        ? h(document.body, "glightbox-mobile")\r\n                                        : d(document.body, "glightbox-mobile"),\r\n                                    i || n)\r\n                                ) {\r\n                                    var r = !1;\r\n                                    if (\r\n                                        (s &&\r\n                                            (c(s, "description-bottom") ||\r\n                                                c(s, "description-top")) &&\r\n                                            !c(s, "gabsolute") &&\r\n                                            (r = !0),\r\n                                        n)\r\n                                    )\r\n                                        if (l <= 768) n.querySelector("img");\r\n                                        else if (r) {\r\n                                            var a = s.offsetHeight,\r\n                                                u = n.querySelector("img");\r\n                                            u.setAttribute(\r\n                                                "style",\r\n                                                "max-height: calc(100vh - ".concat(\r\n                                                    a,\r\n                                                    "px)"\r\n                                                )\r\n                                            ),\r\n                                                s.setAttribute(\r\n                                                    "style",\r\n                                                    "max-width: ".concat(\r\n                                                        u.offsetWidth,\r\n                                                        "px;"\r\n                                                    )\r\n                                                );\r\n                                        }\r\n                                    if (i) {\r\n                                        var g = O(\r\n                                            this.settings.plyr.config,\r\n                                            "ratio"\r\n                                        )\r\n                                            ? this.settings.plyr.config.ratio\r\n                                            : "";\r\n                                        if (!g) {\r\n                                            var v = i.clientWidth,\r\n                                                f = i.clientHeight,\r\n                                                p = v / f;\r\n                                            g = ""\r\n                                                .concat(v / p, ":")\r\n                                                .concat(f / p);\r\n                                        }\r\n                                        var m = g.split(":"),\r\n                                            x = this.settings.videosWidth,\r\n                                            b = this.settings.videosWidth,\r\n                                            S =\r\n                                                (b =\r\n                                                    M(x) ||\r\n                                                    -1 !== x.indexOf("px")\r\n                                                        ? parseInt(x)\r\n                                                        : -1 !== x.indexOf("vw")\r\n                                                        ? (l * parseInt(x)) /\r\n                                                          100\r\n                                                        : -1 !== x.indexOf("vh")\r\n                                                        ? (o * parseInt(x)) /\r\n                                                          100\r\n                                                        : -1 !== x.indexOf("%")\r\n                                                        ? (l * parseInt(x)) /\r\n                                                          100\r\n                                                        : parseInt(\r\n                                                              i.clientWidth\r\n                                                          )) /\r\n                                                (parseInt(m[0]) /\r\n                                                    parseInt(m[1]));\r\n                                        if (\r\n                                            ((S = Math.floor(S)),\r\n                                            r && (o -= s.offsetHeight),\r\n                                            b > l || S > o || (o < S && l > b))\r\n                                        ) {\r\n                                            var w = i.offsetWidth,\r\n                                                T = i.offsetHeight,\r\n                                                C = o / T,\r\n                                                k = {\r\n                                                    width: w * C,\r\n                                                    height: T * C,\r\n                                                };\r\n                                            i.parentNode.setAttribute(\r\n                                                "style",\r\n                                                "max-width: ".concat(\r\n                                                    k.width,\r\n                                                    "px"\r\n                                                )\r\n                                            ),\r\n                                                r &&\r\n                                                    s.setAttribute(\r\n                                                        "style",\r\n                                                        "max-width: ".concat(\r\n                                                            k.width,\r\n                                                            "px;"\r\n                                                        )\r\n                                                    );\r\n                                        } else\r\n                                            (i.parentNode.style.maxWidth =\r\n                                                "".concat(x)),\r\n                                                r &&\r\n                                                    s.setAttribute(\r\n                                                        "style",\r\n                                                        "max-width: ".concat(\r\n                                                            x,\r\n                                                            ";"\r\n                                                        )\r\n                                                    );\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "reload",\r\n                        value: function () {\r\n                            this.init();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "updateNavigationClasses",\r\n                        value: function () {\r\n                            var e = this.loop();\r\n                            d(this.nextButton, "disabled"),\r\n                                d(this.prevButton, "disabled"),\r\n                                0 == this.index && this.elements.length - 1 == 0\r\n                                    ? (h(this.prevButton, "disabled"),\r\n                                      h(this.nextButton, "disabled"))\r\n                                    : 0 !== this.index || e\r\n                                    ? this.index !== this.elements.length - 1 ||\r\n                                      e ||\r\n                                      h(this.nextButton, "disabled")\r\n                                    : h(this.prevButton, "disabled");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "loop",\r\n                        value: function () {\r\n                            var e = O(this.settings, "loopAtEnd")\r\n                                ? this.settings.loopAtEnd\r\n                                : null;\r\n                            return (\r\n                                (e = O(this.settings, "loop")\r\n                                    ? this.settings.loop\r\n                                    : e),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "close",\r\n                        value: function () {\r\n                            var e = this;\r\n                            if (!this.lightboxOpen) {\r\n                                if (this.events) {\r\n                                    for (var t in this.events)\r\n                                        this.events.hasOwnProperty(t) &&\r\n                                            this.events[t].destroy();\r\n                                    this.events = null;\r\n                                }\r\n                                return !1;\r\n                            }\r\n                            if (this.closing) return !1;\r\n                            (this.closing = !0),\r\n                                this.slidePlayerPause(this.activeSlide),\r\n                                this.fullElementsList &&\r\n                                    (this.elements = this.fullElementsList),\r\n                                this.bodyHiddenChildElms.length &&\r\n                                    o(this.bodyHiddenChildElms, function (e) {\r\n                                        e.removeAttribute("aria-hidden");\r\n                                    }),\r\n                                h(this.modal, "glightbox-closing"),\r\n                                g(\r\n                                    this.overlay,\r\n                                    "none" == this.settings.openEffect\r\n                                        ? "none"\r\n                                        : this.settings.cssEfects.fade.out\r\n                                ),\r\n                                g(\r\n                                    this.activeSlide,\r\n                                    this.settings.cssEfects[\r\n                                        this.settings.closeEffect\r\n                                    ].out,\r\n                                    function () {\r\n                                        if (\r\n                                            ((e.activeSlide = null),\r\n                                            (e.prevActiveSlideIndex = null),\r\n                                            (e.prevActiveSlide = null),\r\n                                            (e.built = !1),\r\n                                            e.events)\r\n                                        ) {\r\n                                            for (var t in e.events)\r\n                                                e.events.hasOwnProperty(t) &&\r\n                                                    e.events[t].destroy();\r\n                                            e.events = null;\r\n                                        }\r\n                                        var i = document.body;\r\n                                        d(Q, "glightbox-open"),\r\n                                            d(\r\n                                                i,\r\n                                                "glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"\r\n                                            ),\r\n                                            e.modal.parentNode.removeChild(\r\n                                                e.modal\r\n                                            ),\r\n                                            e.trigger("close"),\r\n                                            T(e.settings.onClose) &&\r\n                                                e.settings.onClose();\r\n                                        var n =\r\n                                            document.querySelector(\r\n                                                ".gcss-styles"\r\n                                            );\r\n                                        n && n.parentNode.removeChild(n),\r\n                                            (e.lightboxOpen = !1),\r\n                                            (e.closing = null);\r\n                                    }\r\n                                );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "destroy",\r\n                        value: function () {\r\n                            this.close(),\r\n                                this.clearAllEvents(),\r\n                                this.baseEvents && this.baseEvents.destroy();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "on",\r\n                        value: function (e, t) {\r\n                            var i =\r\n                                arguments.length > 2 &&\r\n                                void 0 !== arguments[2] &&\r\n                                arguments[2];\r\n                            if (!e || !T(t))\r\n                                throw new TypeError(\r\n                                    "Event name and callback must be defined"\r\n                                );\r\n                            this.apiEvents.push({\r\n                                evt: e,\r\n                                once: i,\r\n                                callback: t,\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "once",\r\n                        value: function (e, t) {\r\n                            this.on(e, t, !0);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "trigger",\r\n                        value: function (e) {\r\n                            var t = this,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : null,\r\n                                n = [];\r\n                            o(this.apiEvents, function (t, s) {\r\n                                var l = t.evt,\r\n                                    o = t.once,\r\n                                    r = t.callback;\r\n                                l == e && (r(i), o && n.push(s));\r\n                            }),\r\n                                n.length &&\r\n                                    o(n, function (e) {\r\n                                        return t.apiEvents.splice(e, 1);\r\n                                    });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "clearAllEvents",\r\n                        value: function () {\r\n                            this.apiEvents.splice(0, this.apiEvents.length);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "version",\r\n                        value: function () {\r\n                            return "3.1.1";\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })();\r\n    return function () {\r\n        var e =\r\n                arguments.length > 0 && void 0 !== arguments[0]\r\n                    ? arguments[0]\r\n                    : {},\r\n            t = new te(e);\r\n        return t.init(), t;\r\n    };\r\n});\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/glightbox.js?')},"./src/js/lazyload.js":function srcJsLazyloadJs(){eval('const imgs = document.querySelectorAll(".lazy-img");\r\nconst lazierImgs = document.querySelectorAll(".lazier-img");\r\n\r\nconst loadImg = (entries, obs) => {\r\n    const [entry] = entries;\r\n\r\n    if (!entry.isIntersecting) return;\r\n\r\n    // replace src with data-src\r\n    entry.target.src = entry.target.dataset.src;\r\n    entry.target.addEventListener("load", () => {\r\n        entry.target.classList.remove("lazy-img");\r\n        entry.target.classList.remove("lazier-img");\r\n    });\r\n    obs.unobserve(entry.target);\r\n};\r\n\r\nconst imgObserver = new IntersectionObserver(loadImg, {\r\n    root: null,\r\n    threshold: 0.1,\r\n    rootMargin: "500px",\r\n});\r\n\r\nconst lazierObserver = new IntersectionObserver(loadImg, {\r\n    root: null,\r\n    threshold: 0.1,\r\n    rootMargin: "500px",\r\n});\r\n\r\nimgs.forEach((img) => imgObserver.observe(img));\r\nlazierImgs.forEach((img) => lazierObserver.observe(img));\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/lazyload.js?')},"./src/js/main.js":function srcJsMainJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _lazyload_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lazyload.js */ "./src/js/lazyload.js");\n/* harmony import */ var _lazyload_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_lazyload_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _glightbox_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glightbox.js */ "./src/js/glightbox.js");\n/* harmony import */ var _glightbox_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_glightbox_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _accordion_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accordion.js */ "./src/js/accordion.js");\n/* harmony import */ var _accordion_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_accordion_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _counter_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./counter.js */ "./src/js/counter.js");\n/* harmony import */ var _counter_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_counter_js__WEBPACK_IMPORTED_MODULE_3__);\n\r\n\r\n\r\n\r\n// import "./testimonials.js";\r\n\r\nconst togglerBtn = document.querySelector(".main-nav--toggler");\r\nconst linksContainer = document.querySelector(".main-nav__links-container");\r\nconst hamburgerLines = document.querySelectorAll(".main-nav--toggler-line");\r\nconst galleryItemsContainer = document.querySelectorAll(\r\n    ".section-gallery__content"\r\n);\r\nconst allNavLinks = [...document.querySelectorAll(".main-nav__links--link")];\r\nconst heroCtaBtn = document.querySelector(".hero__cta");\r\nconst izradaBtn = document.querySelector(".section-about__info--btn");\r\nconst heroSection = document.querySelector("#naslovnica");\r\nconst onamaSection = document.querySelector("#onama");\r\nconst izradaSection = document.querySelector("#izrada");\r\nconst proizvodiSection = document.querySelector("#proizvodi");\r\nconst kontaktSection = document.querySelector("#kontakt");\r\n\r\nconst allSections = [\r\n    heroSection,\r\n    onamaSection,\r\n    izradaSection,\r\n    proizvodiSection,\r\n    kontaktSection,\r\n];\r\nconst makeZiziHappy = (entries, obs) => {\r\n    const [entry] = entries;\r\n    const currentId = `#${entry.target.id}`;\r\n\r\n    if (entry.isIntersecting) {\r\n        allNavLinks.forEach((link) => link.classList.remove("active"));\r\n        if (\r\n            allNavLinks.some((link) => link.getAttribute("href") === currentId)\r\n        ) {\r\n            const index = allNavLinks.findIndex(\r\n                (link) => link.getAttribute("href") === currentId\r\n            );\r\n            allNavLinks[index].classList.add("active");\r\n        }\r\n    }\r\n};\r\nconst sectionObserver = new IntersectionObserver(makeZiziHappy, {\r\n    root: null,\r\n    threshold: 0.15,\r\n});\r\nallSections.forEach((sect) => {\r\n    sectionObserver.observe(sect);\r\n});\r\n\r\nallNavLinks.some(\r\n    (link) =>\r\n        link.classList.contains("active") && link.classList.remove("active")\r\n);\r\n\r\nconst lightbox = GLightbox({\r\n    touchNavigation: true,\r\n    selector: ".glightbox3",\r\n});\r\n\r\nheroCtaBtn.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    document.querySelector("#onama").scrollIntoView({ behavior: "smooth" });\r\n});\r\n\r\nizradaBtn.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    document.querySelector("#izrada").scrollIntoView({ behavior: "smooth" });\r\n});\r\n\r\ntogglerBtn.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    hamburgerLines.forEach((el) => el.classList.toggle("active"));\r\n    linksContainer.classList.toggle("active");\r\n});\r\n\r\nlinksContainer.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    const id = e.target.getAttribute("href");\r\n    document.querySelector(id).scrollIntoView({ behavior: "smooth" });\r\n});\r\n\r\nlinksContainer.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    if ([...hamburgerLines].some((el) => el.classList.contains("active"))) {\r\n        hamburgerLines.forEach((el) => el.classList.remove("active"));\r\n        linksContainer.classList.remove("active");\r\n    }\r\n});\r\n\r\ngalleryItemsContainer.forEach((container) => {\r\n    const imagesCounts = [...container.querySelectorAll(".glightbox3")];\r\n    const span = container.querySelector(".section-gallery--item-count");\r\n\r\n    const DEFAULT_IMG_COUNT = 2;\r\n    if (span) {\r\n        const count = imagesCounts.length - DEFAULT_IMG_COUNT;\r\n        if (count > 0) {\r\n            span.textContent = `+${count}`;\r\n        }\r\n    }\r\n});\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/main.js?')}},__webpack_module_cache__={};function __webpack_require__(n){var r=__webpack_module_cache__[n];return void 0!==r||(r=__webpack_module_cache__[n]={exports:{}},__webpack_modules__[n].call(r.exports,r,r.exports,__webpack_require__)),r.exports}__webpack_require__.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=function(n,r){for(var e in r)__webpack_require__.o(r,e)&&!__webpack_require__.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},__webpack_require__.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},__webpack_require__.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/js/main.js")}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyJidW5kbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gKiBBVFRFTlRJT046IFRoZSBcImV2YWxcIiBkZXZ0b29sIGhhcyBiZWVuIHVzZWQgKG1heWJlIGJ5IGRlZmF1bHQgaW4gbW9kZTogXCJkZXZlbG9wbWVudFwiKS5cbiAqIFRoaXMgZGV2dG9vbCBpcyBuZWl0aGVyIG1hZGUgZm9yIHByb2R1Y3Rpb24gbm9yIGZvciByZWFkYWJsZSBvdXRwdXQgZmlsZXMuXG4gKiBJdCB1c2VzIFwiZXZhbCgpXCIgY2FsbHMgdG8gY3JlYXRlIGEgc2VwYXJhdGUgc291cmNlIGZpbGUgaW4gdGhlIGJyb3dzZXIgZGV2dG9vbHMuXG4gKiBJZiB5b3UgYXJlIHRyeWluZyB0byByZWFkIHRoZSBvdXRwdXQgZmlsZSwgc2VsZWN0IGEgZGlmZmVyZW50IGRldnRvb2wgKGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9kZXZ0b29sLylcbiAqIG9yIGRpc2FibGUgdGhlIGRlZmF1bHQgZGV2dG9vbCB3aXRoIFwiZGV2dG9vbDogZmFsc2VcIi5cbiAqIElmIHlvdSBhcmUgbG9va2luZyBmb3IgcHJvZHVjdGlvbi1yZWFkeSBvdXRwdXQgZmlsZXMsIHNlZSBtb2RlOiBcInByb2R1Y3Rpb25cIiAoaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL21vZGUvKS5cbiAqL1xuXG4vKioqKioqL1xuKGZ1bmN0aW9uICgpIHtcbiAgLy8gd2VicGFja0Jvb3RzdHJhcFxuXG4gIC8qKioqKiovXG4gIHZhciBfX3dlYnBhY2tfbW9kdWxlc19fID0ge1xuICAgIC8qKiovXG4gICAgXCIuL3NyYy9qcy9hY2NvcmRpb24uanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgICAgICEqKiogLi9zcmMvanMvYWNjb3JkaW9uLmpzICoqKiFcbiAgICAgIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzQWNjb3JkaW9uSnMoKSB7XG4gICAgICBldmFsKFwiY29uc3QgYWNjb3JkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5hY2NvcmRpb25cXFwiKTtcXHJcXG5jb25zdCBhY2NvcmRpb25Db250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5hY2NvcmRpb24tY29udGVudFxcXCIpO1xcclxcblxcclxcbmFjY29yZGlvbnMuZm9yRWFjaCgoYWNjKSA9PlxcclxcbiAgICBhY2MuYWRkRXZlbnRMaXN0ZW5lcihcXFwiY2xpY2tcXFwiLCAoZSkgPT4ge1xcclxcbiAgICAgICAgaGFuZGxlQWNjb3JkaW9ucyhhY2MsIGUpO1xcclxcbiAgICB9KVxcclxcbik7XFxyXFxuXFxyXFxuZnVuY3Rpb24gaGFuZGxlQWNjb3JkaW9ucyhhY2NvcmRpb24sIGV2ZW50KSB7XFxyXFxuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcXFwiYWNjb3JkaW9uLWhlYWRpbmctLWljb25cXFwiKSkgcmV0dXJuO1xcclxcblxcclxcbiAgICBldmVudC50YXJnZXQudGV4dENvbnRlbnQudHJpbSgpID09PSBcXFwiK1xcXCJcXHJcXG4gICAgICAgID8gKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9IFxcXCItXFxcIilcXHJcXG4gICAgICAgIDogKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9IFxcXCIrXFxcIik7XFxyXFxuXFxyXFxuICAgIGlmIChcXHJcXG4gICAgICAgIGFjY29yZGlvbi5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKFxcclxcbiAgICAgICAgICAgIFxcXCJoaWRkZW5cXFwiXFxyXFxuICAgICAgICApXFxyXFxuICAgICkge1xcclxcbiAgICAgICAgYWNjb3JkaW9uLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKFxcclxcbiAgICAgICAgICAgIFxcXCJoaWRkZW5cXFwiXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgICAgYWNjb3JkaW9uLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKFxcXCJzaG93XFxcIik7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBhY2NvcmRpb24uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoXFxcInNob3dcXFwiKTtcXHJcXG4gICAgICAgIGFjY29yZGlvbi5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChcXFwiaGlkZGVuXFxcIik7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuXFxyXFxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXFxcIkRPTUNvbnRlbnRMb2FkZWRcXFwiLCAoKSA9PiB7XFxyXFxuICAgIFsuLi5hY2NvcmRpb25Db250ZW50c10uZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5hZGQoXFxcImhpZGRlblxcXCIpKTtcXHJcXG59KTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9hY2NvcmRpb24uanM/XCIpO1xuICAgICAgLyoqKi9cbiAgICB9LFxuXG4gICAgLyoqKi9cbiAgICBcIi4vc3JjL2pzL2NvdW50ZXIuanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICAgICAhKioqIC4vc3JjL2pzL2NvdW50ZXIuanMgKioqIVxuICAgICAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzQ291bnRlckpzKCkge1xuICAgICAgZXZhbChcImNvbnN0IGNvdW50ZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXFwiLmNvdW50ZXJfX2l0ZW0tLW51bWJlclxcXCIpO1xcclxcbmNvbnN0IGNvdW50ZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5jb3VudGVyXFxcIik7XFxyXFxubGV0IHdhc0NvdW50ZWQgPSBmYWxzZTtcXHJcXG5cXHJcXG5jb25zdCBvYnNDYiA9IChlbnRyaWVzLCBvYnNlcnZlcikgPT4ge1xcclxcbiAgICBjb25zdCBbZW50cnldID0gZW50cmllcztcXHJcXG4gICAgaWYgKGVudHJ5LmlzSW50ZXJzZWN0aW5nICYmICF3YXNDb3VudGVkKSB7XFxyXFxuICAgICAgICBzdGFydENvdW50aW5nKCk7XFxyXFxuICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XFxyXFxuICAgIH1cXHJcXG59O1xcclxcbmNvbnN0IG9ic09wdGlvbnMgPSB7XFxyXFxuICAgIHJvb3Q6IG51bGwsXFxyXFxuICAgIHRocmVzaG9sZDogMC40NSxcXHJcXG59O1xcclxcblxcclxcbmNvbnN0IG9ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKG9ic0NiLCBvYnNPcHRpb25zKTtcXHJcXG5vYnNlcnZlci5vYnNlcnZlKGNvdW50ZXJFbCk7XFxyXFxuXFxyXFxuY29uc3Qgc3RhcnRDb3VudGluZyA9ICgpID0+IHtcXHJcXG4gICAgY291bnRlcnMuZm9yRWFjaCgoY291bnRlcikgPT4ge1xcclxcbiAgICAgICAgY291bnRlci50ZXh0Q29udGVudCA9IFxcXCIwXFxcIjtcXHJcXG5cXHJcXG4gICAgICAgIGNvbnN0IHVwZGF0ZUNvdW50ZXIgPSAoKSA9PiB7XFxyXFxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gK2NvdW50ZXIuZ2V0QXR0cmlidXRlKFxcXCJkYXRhLXRhcmdldFxcXCIpO1xcclxcblxcclxcbiAgICAgICAgICAgIGNvbnN0IGMgPSArY291bnRlci50ZXh0Q29udGVudDtcXHJcXG5cXHJcXG4gICAgICAgICAgICBjb25zdCBpbmNyZW1lbnQgPSB0YXJnZXQgLyAxMDA7XFxyXFxuXFxyXFxuICAgICAgICAgICAgaWYgKGMgPCB0YXJnZXQpIHtcXHJcXG4gICAgICAgICAgICAgICAgY291bnRlci50ZXh0Q29udGVudCA9IGAke01hdGguY2VpbChjICsgaW5jcmVtZW50KX1gO1xcclxcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZUNvdW50ZXIsIDEpO1xcclxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgIGNvdW50ZXIudGV4dENvbnRlbnQgPSB0YXJnZXQgKyBcXFwiK1xcXCI7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICAgIHVwZGF0ZUNvdW50ZXIoKTtcXHJcXG4gICAgICAgIHdhc0NvdW50ZWQgPSB0cnVlO1xcclxcbiAgICB9KTtcXHJcXG59O1xcclxcblxcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL2d1bHBzdGFydGVyLy4vc3JjL2pzL2NvdW50ZXIuanM/XCIpO1xuICAgICAgLyoqKi9cbiAgICB9LFxuXG4gICAgLyoqKi9cbiAgICBcIi4vc3JjL2pzL2dsaWdodGJveC5qc1wiOlxuICAgIC8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAgICAgISoqKiAuL3NyYy9qcy9nbGlnaHRib3guanMgKioqIVxuICAgICAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKiovXG4gICAgZnVuY3Rpb24gc3JjSnNHbGlnaHRib3hKcyhtb2R1bGUpIHtcbiAgICAgIGV2YWwoXCIhKGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICB0cnVlXFxyXFxuICAgICAgICA/IChtb2R1bGUuZXhwb3J0cyA9IHQoKSlcXHJcXG4gICAgICAgIDogMDtcXHJcXG59KSh0aGlzLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIFxcXCJ1c2Ugc3RyaWN0XFxcIjtcXHJcXG4gICAgZnVuY3Rpb24gZSh0KSB7XFxyXFxuICAgICAgICByZXR1cm4gKGUgPVxcclxcbiAgICAgICAgICAgIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIFN5bWJvbCAmJiBcXFwic3ltYm9sXFxcIiA9PSB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yXFxyXFxuICAgICAgICAgICAgICAgID8gZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBlO1xcclxcbiAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImZ1bmN0aW9uXFxcIiA9PSB0eXBlb2YgU3ltYm9sICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUgIT09IFN5bWJvbC5wcm90b3R5cGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gXFxcInN5bWJvbFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogdHlwZW9mIGU7XFxyXFxuICAgICAgICAgICAgICAgICAgfSkodCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gdChlLCB0KSB7XFxyXFxuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2YgdCkpXFxyXFxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcXFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXFxcIik7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gaShlLCB0KSB7XFxyXFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHQubGVuZ3RoOyBpKyspIHtcXHJcXG4gICAgICAgICAgICB2YXIgbiA9IHRbaV07XFxyXFxuICAgICAgICAgICAgKG4uZW51bWVyYWJsZSA9IG4uZW51bWVyYWJsZSB8fCAhMSksXFxyXFxuICAgICAgICAgICAgICAgIChuLmNvbmZpZ3VyYWJsZSA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgXFxcInZhbHVlXFxcIiBpbiBuICYmIChuLndyaXRhYmxlID0gITApLFxcclxcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbi5rZXksIG4pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIG4oZSwgdCwgbikge1xcclxcbiAgICAgICAgcmV0dXJuIHQgJiYgaShlLnByb3RvdHlwZSwgdCksIG4gJiYgaShlLCBuKSwgZTtcXHJcXG4gICAgfVxcclxcbiAgICB2YXIgcyA9IERhdGUubm93KCk7XFxyXFxuICAgIGZ1bmN0aW9uIGwoKSB7XFxyXFxuICAgICAgICB2YXIgZSA9IHt9LFxcclxcbiAgICAgICAgICAgIHQgPSAhMCxcXHJcXG4gICAgICAgICAgICBpID0gMCxcXHJcXG4gICAgICAgICAgICBuID0gYXJndW1lbnRzLmxlbmd0aDtcXHJcXG4gICAgICAgIFxcXCJbb2JqZWN0IEJvb2xlYW5dXFxcIiA9PT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50c1swXSkgJiZcXHJcXG4gICAgICAgICAgICAoKHQgPSBhcmd1bWVudHNbMF0pLCBpKyspO1xcclxcbiAgICAgICAgZm9yIChcXHJcXG4gICAgICAgICAgICB2YXIgcyA9IGZ1bmN0aW9uIChpKSB7XFxyXFxuICAgICAgICAgICAgICAgIGZvciAodmFyIG4gaW4gaSlcXHJcXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpLCBuKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIltvYmplY3QgT2JqZWN0XVxcXCIgPT09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpW25dKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlW25dID0gbCghMCwgZVtuXSwgaVtuXSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGVbbl0gPSBpW25dKSk7XFxyXFxuICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICBpIDwgbjtcXHJcXG4gICAgICAgICAgICBpKytcXHJcXG4gICAgICAgICkge1xcclxcbiAgICAgICAgICAgIHZhciBvID0gYXJndW1lbnRzW2ldO1xcclxcbiAgICAgICAgICAgIHMobyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICByZXR1cm4gZTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBvKGUsIHQpIHtcXHJcXG4gICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAoKGsoZSkgfHwgZSA9PT0gd2luZG93IHx8IGUgPT09IGRvY3VtZW50KSAmJiAoZSA9IFtlXSksXFxyXFxuICAgICAgICAgICAgQShlKSB8fCBMKGUpIHx8IChlID0gW2VdKSxcXHJcXG4gICAgICAgICAgICAwICE9IFAoZSkpXFxyXFxuICAgICAgICApXFxyXFxuICAgICAgICAgICAgaWYgKEEoZSkgJiYgIUwoZSkpXFxyXFxuICAgICAgICAgICAgICAgIGZvciAoXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUubGVuZ3RoLCBuID0gMDtcXHJcXG4gICAgICAgICAgICAgICAgICAgIG4gPCBpICYmICExICE9PSB0LmNhbGwoZVtuXSwgZVtuXSwgbiwgZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICBuKytcXHJcXG4gICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICBlbHNlIGlmIChMKGUpKVxcclxcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzIGluIGUpXFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoTyhlLCBzKSAmJiAhMSA9PT0gdC5jYWxsKGVbc10sIGVbc10sIHMsIGUpKSBicmVhaztcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiByKGUpIHtcXHJcXG4gICAgICAgIHZhciB0ID1cXHJcXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA6IG51bGwsXFxyXFxuICAgICAgICAgICAgaSA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1syXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgIG4gPSAoZVtzXSA9IGVbc10gfHwgW10pLFxcclxcbiAgICAgICAgICAgIGwgPSB7IGFsbDogbiwgZXZ0OiBudWxsLCBmb3VuZDogbnVsbCB9O1xcclxcbiAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICB0ICYmXFxyXFxuICAgICAgICAgICAgICAgIGkgJiZcXHJcXG4gICAgICAgICAgICAgICAgUChuKSA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgbyhuLCBmdW5jdGlvbiAoZSwgbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUuZXZlbnROYW1lID09IHQgJiYgZS5mbi50b1N0cmluZygpID09IGkudG9TdHJpbmcoKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGwuZm91bmQgPSAhMCksIChsLmV2dCA9IG4pLCAhMTtcXHJcXG4gICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgbFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBhKGUpIHtcXHJcXG4gICAgICAgIHZhciB0ID1cXHJcXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA6IHt9LFxcclxcbiAgICAgICAgICAgIGkgPSB0Lm9uRWxlbWVudCxcXHJcXG4gICAgICAgICAgICBuID0gdC53aXRoQ2FsbGJhY2ssXFxyXFxuICAgICAgICAgICAgcyA9IHQuYXZvaWREdXBsaWNhdGUsXFxyXFxuICAgICAgICAgICAgbCA9IHZvaWQgMCA9PT0gcyB8fCBzLFxcclxcbiAgICAgICAgICAgIGEgPSB0Lm9uY2UsXFxyXFxuICAgICAgICAgICAgaCA9IHZvaWQgMCAhPT0gYSAmJiBhLFxcclxcbiAgICAgICAgICAgIGQgPSB0LnVzZUNhcHR1cmUsXFxyXFxuICAgICAgICAgICAgYyA9IHZvaWQgMCAhPT0gZCAmJiBkLFxcclxcbiAgICAgICAgICAgIHUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiA/IGFyZ3VtZW50c1syXSA6IHZvaWQgMCxcXHJcXG4gICAgICAgICAgICBnID0gaSB8fCBbXTtcXHJcXG4gICAgICAgIGZ1bmN0aW9uIHYoZSkge1xcclxcbiAgICAgICAgICAgIFQobikgJiYgbi5jYWxsKHUsIGUsIHRoaXMpLCBoICYmIHYuZGVzdHJveSgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICBDKGcpICYmIChnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChnKSksXFxyXFxuICAgICAgICAgICAgKHYuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgbyhnLCBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSByKHQsIGUsIHYpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgaS5mb3VuZCAmJiBpLmFsbC5zcGxpY2UoaS5ldnQsIDEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSwgdiwgYyk7XFxyXFxuICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgIG8oZywgZnVuY3Rpb24gKHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGkgPSByKHQsIGUsIHYpO1xcclxcbiAgICAgICAgICAgICAgICAoKHQuYWRkRXZlbnRMaXN0ZW5lciAmJiBsICYmICFpLmZvdW5kKSB8fCAhbCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0LmFkZEV2ZW50TGlzdGVuZXIoZSwgdiwgYyksXFxyXFxuICAgICAgICAgICAgICAgICAgICBpLmFsbC5wdXNoKHsgZXZlbnROYW1lOiBlLCBmbjogdiB9KSk7XFxyXFxuICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgdlxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBoKGUsIHQpIHtcXHJcXG4gICAgICAgIG8odC5zcGxpdChcXFwiIFxcXCIpLCBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5hZGQodCk7XFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBkKGUsIHQpIHtcXHJcXG4gICAgICAgIG8odC5zcGxpdChcXFwiIFxcXCIpLCBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5yZW1vdmUodCk7XFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBjKGUsIHQpIHtcXHJcXG4gICAgICAgIHJldHVybiBlLmNsYXNzTGlzdC5jb250YWlucyh0KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiB1KGUsIHQpIHtcXHJcXG4gICAgICAgIGZvciAoOyBlICE9PSBkb2N1bWVudC5ib2R5OyApIHtcXHJcXG4gICAgICAgICAgICBpZiAoIShlID0gZS5wYXJlbnRFbGVtZW50KSkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgXFxcImZ1bmN0aW9uXFxcIiA9PSB0eXBlb2YgZS5tYXRjaGVzXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGUubWF0Y2hlcyh0KVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiBlLm1zTWF0Y2hlc1NlbGVjdG9yKHQpXFxyXFxuICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBnKGUpIHtcXHJcXG4gICAgICAgIHZhciB0ID1cXHJcXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgIGkgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSAmJiBhcmd1bWVudHNbMl07XFxyXFxuICAgICAgICBpZiAoIWUgfHwgXFxcIlxcXCIgPT09IHQpIHJldHVybiAhMTtcXHJcXG4gICAgICAgIGlmIChcXFwibm9uZVxcXCIgPT0gdCkgcmV0dXJuIFQoaSkgJiYgaSgpLCAhMTtcXHJcXG4gICAgICAgIHZhciBuID0geCgpLFxcclxcbiAgICAgICAgICAgIHMgPSB0LnNwbGl0KFxcXCIgXFxcIik7XFxyXFxuICAgICAgICBvKHMsIGZ1bmN0aW9uICh0KSB7XFxyXFxuICAgICAgICAgICAgaChlLCBcXFwiZ1xcXCIgKyB0KTtcXHJcXG4gICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgIGEobiwge1xcclxcbiAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IGUsXFxyXFxuICAgICAgICAgICAgICAgIGF2b2lkRHVwbGljYXRlOiAhMSxcXHJcXG4gICAgICAgICAgICAgICAgb25jZTogITAsXFxyXFxuICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIG8ocywgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBkKHQsIFxcXCJnXFxcIiArIGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgVChpKSAmJiBpKCk7XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gdihlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gPyBhcmd1bWVudHNbMV0gOiBcXFwiXFxcIjtcXHJcXG4gICAgICAgIGlmIChcXFwiXFxcIiA9PSB0KVxcclxcbiAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgIChlLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgKGUuc3R5bGUuTW96VHJhbnNmb3JtID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAoZS5zdHlsZS5tc1RyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgKGUuc3R5bGUuT1RyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgKGUuc3R5bGUudHJhbnNmb3JtID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAoZS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0KSxcXHJcXG4gICAgICAgICAgICAoZS5zdHlsZS5Nb3pUcmFuc2Zvcm0gPSB0KSxcXHJcXG4gICAgICAgICAgICAoZS5zdHlsZS5tc1RyYW5zZm9ybSA9IHQpLFxcclxcbiAgICAgICAgICAgIChlLnN0eWxlLk9UcmFuc2Zvcm0gPSB0KSxcXHJcXG4gICAgICAgICAgICAoZS5zdHlsZS50cmFuc2Zvcm0gPSB0KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBmKGUpIHtcXHJcXG4gICAgICAgIGUuc3R5bGUuZGlzcGxheSA9IFxcXCJibG9ja1xcXCI7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gcChlKSB7XFxyXFxuICAgICAgICBlLnN0eWxlLmRpc3BsYXkgPSBcXFwibm9uZVxcXCI7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gbShlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcXHJcXG4gICAgICAgICAgICBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwiZGl2XFxcIik7XFxyXFxuICAgICAgICBmb3IgKGkuaW5uZXJIVE1MID0gZTsgaS5maXJzdENoaWxkOyApIHQuYXBwZW5kQ2hpbGQoaS5maXJzdENoaWxkKTtcXHJcXG4gICAgICAgIHJldHVybiB0O1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHkoKSB7XFxyXFxuICAgICAgICByZXR1cm4ge1xcclxcbiAgICAgICAgICAgIHdpZHRoOlxcclxcbiAgICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCB8fFxcclxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aCxcXHJcXG4gICAgICAgICAgICBoZWlnaHQ6XFxyXFxuICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lckhlaWdodCB8fFxcclxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0IHx8XFxyXFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50SGVpZ2h0LFxcclxcbiAgICAgICAgfTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiB4KCkge1xcclxcbiAgICAgICAgdmFyIGUsXFxyXFxuICAgICAgICAgICAgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcImZha2VlbGVtZW50XFxcIiksXFxyXFxuICAgICAgICAgICAgaSA9IHtcXHJcXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uOiBcXFwiYW5pbWF0aW9uZW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgT0FuaW1hdGlvbjogXFxcIm9BbmltYXRpb25FbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICBNb3pBbmltYXRpb246IFxcXCJhbmltYXRpb25lbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICBXZWJraXRBbmltYXRpb246IFxcXCJ3ZWJraXRBbmltYXRpb25FbmRcXFwiLFxcclxcbiAgICAgICAgICAgIH07XFxyXFxuICAgICAgICBmb3IgKGUgaW4gaSkgaWYgKHZvaWQgMCAhPT0gdC5zdHlsZVtlXSkgcmV0dXJuIGlbZV07XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gYihlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICBpZiAoZSgpKSB0KCk7XFxyXFxuICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICB2YXIgcztcXHJcXG4gICAgICAgICAgICBpIHx8IChpID0gMTAwKTtcXHJcXG4gICAgICAgICAgICB2YXIgbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgZSgpICYmIChjbGVhckludGVydmFsKGwpLCBzICYmIGNsZWFyVGltZW91dChzKSwgdCgpKTtcXHJcXG4gICAgICAgICAgICB9LCBpKTtcXHJcXG4gICAgICAgICAgICBuICYmXFxyXFxuICAgICAgICAgICAgICAgIChzID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGwpO1xcclxcbiAgICAgICAgICAgICAgICB9LCBuKSk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gUyhlLCB0LCBpKSB7XFxyXFxuICAgICAgICBpZiAoSShlKSkgY29uc29sZS5lcnJvcihcXFwiSW5qZWN0IGFzc2V0cyBlcnJvclxcXCIpO1xcclxcbiAgICAgICAgZWxzZSBpZiAoKFQodCkgJiYgKChpID0gdCksICh0ID0gITEpKSwgQyh0KSAmJiB0IGluIHdpbmRvdykpXFxyXFxuICAgICAgICAgICAgVChpKSAmJiBpKCk7XFxyXFxuICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICB2YXIgbjtcXHJcXG4gICAgICAgICAgICBpZiAoLTEgIT09IGUuaW5kZXhPZihcXFwiLmNzc1xcXCIpKSB7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgIChuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnbGlua1tocmVmPVxcXCInICsgZSArICdcXFwiXScpKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgbi5sZW5ndGggPiAwXFxyXFxuICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIChUKGkpICYmIGkoKSk7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXFxcImhlYWRcXFwiKVswXSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGwgPSBzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmtbcmVsPVxcXCJzdHlsZXNoZWV0XFxcIl0nKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIG8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXCJsaW5rXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAoby5yZWwgPSBcXFwic3R5bGVzaGVldFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKG8udHlwZSA9IFxcXCJ0ZXh0L2Nzc1xcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKG8uaHJlZiA9IGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKG8ubWVkaWEgPSBcXFwiYWxsXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICBsID8gcy5pbnNlcnRCZWZvcmUobywgbFswXSkgOiBzLmFwcGVuZENoaWxkKG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAoVChpKSAmJiBpKCkpXFxyXFxuICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgKG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzY3JpcHRbc3JjPVxcXCInICsgZSArICdcXFwiXScpKSAmJlxcclxcbiAgICAgICAgICAgICAgICBuLmxlbmd0aCA+IDBcXHJcXG4gICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgaWYgKFQoaSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmIChDKHQpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gd2luZG93W3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICExXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGkoKTtcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciByID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwic2NyaXB0XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgIChyLnR5cGUgPSBcXFwidGV4dC9qYXZhc2NyaXB0XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAoci5zcmMgPSBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoVChpKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQyh0KSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gd2luZG93W3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICExXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHIpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiB3KCkge1xcclxcbiAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICBcXFwibmF2aWdhdG9yXFxcIiBpbiB3aW5kb3cgJiZcXHJcXG4gICAgICAgICAgICB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcXHJcXG4gICAgICAgICAgICAgICAgLyhpUGFkKXwoaVBob25lKXwoaVBvZCl8KEFuZHJvaWQpfChQbGF5Qm9vayl8KEJCMTApfChCbGFja0JlcnJ5KXwoT3BlcmEgTWluaSl8KElFTW9iaWxlKXwod2ViT1MpfChNZWVHbykvaVxcclxcbiAgICAgICAgICAgIClcXHJcXG4gICAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gVChlKSB7XFxyXFxuICAgICAgICByZXR1cm4gXFxcImZ1bmN0aW9uXFxcIiA9PSB0eXBlb2YgZTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBDKGUpIHtcXHJcXG4gICAgICAgIHJldHVybiBcXFwic3RyaW5nXFxcIiA9PSB0eXBlb2YgZTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBrKGUpIHtcXHJcXG4gICAgICAgIHJldHVybiAhKCFlIHx8ICFlLm5vZGVUeXBlIHx8IDEgIT0gZS5ub2RlVHlwZSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gRShlKSB7XFxyXFxuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShlKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBBKGUpIHtcXHJcXG4gICAgICAgIHJldHVybiBlICYmIGUubGVuZ3RoICYmIGlzRmluaXRlKGUubGVuZ3RoKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBMKHQpIHtcXHJcXG4gICAgICAgIHJldHVybiBcXFwib2JqZWN0XFxcIiA9PT0gZSh0KSAmJiBudWxsICE9IHQgJiYgIVQodCkgJiYgIUUodCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gSShlKSB7XFxyXFxuICAgICAgICByZXR1cm4gbnVsbCA9PSBlO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIE8oZSwgdCkge1xcclxcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBQKGUpIHtcXHJcXG4gICAgICAgIGlmIChMKGUpKSB7XFxyXFxuICAgICAgICAgICAgaWYgKGUua2V5cykgcmV0dXJuIGUua2V5cygpLmxlbmd0aDtcXHJcXG4gICAgICAgICAgICB2YXIgdCA9IDA7XFxyXFxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBlKSBPKGUsIGkpICYmIHQrKztcXHJcXG4gICAgICAgICAgICByZXR1cm4gdDtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHJldHVybiBlLmxlbmd0aDtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBNKGUpIHtcXHJcXG4gICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChlKSkgJiYgaXNGaW5pdGUoZSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24geigpIHtcXHJcXG4gICAgICAgIHZhciBlID1cXHJcXG4gICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICA6IC0xLFxcclxcbiAgICAgICAgICAgIHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICBcXFwiLmdidG5bZGF0YS10YWJvcmRlcl06bm90KC5kaXNhYmxlZClcXFwiXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgIGlmICghdC5sZW5ndGgpIHJldHVybiAhMTtcXHJcXG4gICAgICAgIGlmICgxID09IHQubGVuZ3RoKSByZXR1cm4gdFswXTtcXHJcXG4gICAgICAgIFxcXCJzdHJpbmdcXFwiID09IHR5cGVvZiBlICYmIChlID0gcGFyc2VJbnQoZSkpO1xcclxcbiAgICAgICAgdmFyIGkgPSBbXTtcXHJcXG4gICAgICAgIG8odCwgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICBpLnB1c2goZS5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtdGFib3JkZXJcXFwiKSk7XFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICAgIHZhciBuID0gTWF0aC5tYXguYXBwbHkoXFxyXFxuICAgICAgICAgICAgICAgIE1hdGgsXFxyXFxuICAgICAgICAgICAgICAgIGkubWFwKGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoZSk7XFxyXFxuICAgICAgICAgICAgICAgIH0pXFxyXFxuICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICBzID0gZSA8IDAgPyAxIDogZSArIDE7XFxyXFxuICAgICAgICBzID4gbiAmJiAocyA9IFxcXCIxXFxcIik7XFxyXFxuICAgICAgICB2YXIgbCA9IGkuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiBlID49IHBhcnNlSW50KHMpO1xcclxcbiAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgIHIgPSBsLnNvcnQoKVswXTtcXHJcXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2J0bltkYXRhLXRhYm9yZGVyPVxcXCInLmNvbmNhdChyLCAnXFxcIl0nKSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gWChlKSB7XFxyXFxuICAgICAgICBpZiAoZS5ldmVudHMuaGFzT3duUHJvcGVydHkoXFxcImtleWJvYXJkXFxcIikpIHJldHVybiAhMTtcXHJcXG4gICAgICAgIGUuZXZlbnRzLmtleWJvYXJkID0gYShcXFwia2V5ZG93blxcXCIsIHtcXHJcXG4gICAgICAgICAgICBvbkVsZW1lbnQ6IHdpbmRvdyxcXHJcXG4gICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uICh0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBuID0gKHQgPSB0IHx8IHdpbmRvdy5ldmVudCkua2V5Q29kZTtcXHJcXG4gICAgICAgICAgICAgICAgaWYgKDkgPT0gbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIuZ2J0bi5mb2N1c2VkXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXMpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICEoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcXCJpbnB1dFxcXCIgPT0gbCB8fCBcXFwidGV4dGFyZWFcXFwiID09IGwgfHwgXFxcImJ1dHRvblxcXCIgPT0gbClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcXCIuZ2J0bltkYXRhLXRhYm9yZGVyXVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFvIHx8IG8ubGVuZ3RoIDw9IDApIHJldHVybjtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmICghcykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0geigpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIChyICYmIChyLmZvY3VzKCksIGgociwgXFxcImZvY3VzZWRcXFwiKSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSB6KHMuZ2V0QXR0cmlidXRlKFxcXCJkYXRhLXRhYm9yZGVyXFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgZChzLCBcXFwiZm9jdXNlZFxcXCIpLCBhICYmIChhLmZvY3VzKCksIGgoYSwgXFxcImZvY3VzZWRcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgMzkgPT0gbiAmJiBlLm5leHRTbGlkZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgMzcgPT0gbiAmJiBlLnByZXZTbGlkZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgMjcgPT0gbiAmJiBlLmNsb3NlKCk7XFxyXFxuICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIFkoZSkge1xcclxcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChlLnggKiBlLnggKyBlLnkgKiBlLnkpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHEoZSwgdCkge1xcclxcbiAgICAgICAgdmFyIGkgPSAoZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICB2YXIgaSA9IFkoZSkgKiBZKHQpO1xcclxcbiAgICAgICAgICAgIGlmICgwID09PSBpKSByZXR1cm4gMDtcXHJcXG4gICAgICAgICAgICB2YXIgbiA9XFxyXFxuICAgICAgICAgICAgICAgIChmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUueCAqIHQueCArIGUueSAqIHQueTtcXHJcXG4gICAgICAgICAgICAgICAgfSkoZSwgdCkgLyBpO1xcclxcbiAgICAgICAgICAgIHJldHVybiBuID4gMSAmJiAobiA9IDEpLCBNYXRoLmFjb3Mobik7XFxyXFxuICAgICAgICB9KShlLCB0KTtcXHJcXG4gICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgKGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgIHJldHVybiBlLnggKiB0LnkgLSB0LnggKiBlLnk7XFxyXFxuICAgICAgICAgICAgfSkoZSwgdCkgPiAwICYmIChpICo9IC0xKSxcXHJcXG4gICAgICAgICAgICAoMTgwICogaSkgLyBNYXRoLlBJXFxyXFxuICAgICAgICApO1xcclxcbiAgICB9XFxyXFxuICAgIHZhciBOID0gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIGZ1bmN0aW9uIGUoaSkge1xcclxcbiAgICAgICAgICAgIHQodGhpcywgZSksICh0aGlzLmhhbmRsZXJzID0gW10pLCAodGhpcy5lbCA9IGkpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiYWRkXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMucHVzaChlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRlbFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBlIHx8ICh0aGlzLmhhbmRsZXJzID0gW10pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgPSB0aGlzLmhhbmRsZXJzLmxlbmd0aDsgdCA+PSAwOyB0LS0pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNbdF0gPT09IGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuc3BsaWNlKHQsIDEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZGlzcGF0Y2hcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBlID0gMCwgdCA9IHRoaXMuaGFuZGxlcnMubGVuZ3RoOyBlIDwgdDsgZSsrKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5oYW5kbGVyc1tlXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImZ1bmN0aW9uXFxcIiA9PSB0eXBlb2YgaSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hcHBseSh0aGlzLmVsLCBhcmd1bWVudHMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgZVxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgfSkoKTtcXHJcXG4gICAgZnVuY3Rpb24gRChlLCB0KSB7XFxyXFxuICAgICAgICB2YXIgaSA9IG5ldyBOKGUpO1xcclxcbiAgICAgICAgcmV0dXJuIGkuYWRkKHQpLCBpO1xcclxcbiAgICB9XFxyXFxuICAgIHZhciBfID0gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgIGZ1bmN0aW9uIGUoaSwgbikge1xcclxcbiAgICAgICAgICAgIHQodGhpcywgZSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgXFxcInN0cmluZ1xcXCIgPT0gdHlwZW9mIGkgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGkpIDogaSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnN0YXJ0ID0gdGhpcy5zdGFydC5iaW5kKHRoaXMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMubW92ZSA9IHRoaXMubW92ZS5iaW5kKHRoaXMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuZW5kID0gdGhpcy5lbmQuYmluZCh0aGlzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmNhbmNlbCA9IHRoaXMuY2FuY2VsLmJpbmQodGhpcykpLFxcclxcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcXFwidG91Y2hzdGFydFxcXCIsIHRoaXMuc3RhcnQsICExKSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcInRvdWNobW92ZVxcXCIsIHRoaXMubW92ZSwgITEpLFxcclxcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcXFwidG91Y2hlbmRcXFwiLCB0aGlzLmVuZCwgITEpLFxcclxcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcXFwidG91Y2hjYW5jZWxcXFwiLCB0aGlzLmNhbmNlbCwgITEpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5wcmVWID0geyB4OiBudWxsLCB5OiBudWxsIH0pLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5waW5jaFN0YXJ0TGVuID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnpvb20gPSAxKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuaXNEb3VibGVUYXAgPSAhMSk7XFxyXFxuICAgICAgICAgICAgdmFyIHMgPSBmdW5jdGlvbiAoKSB7fTtcXHJcXG4gICAgICAgICAgICAodGhpcy5yb3RhdGUgPSBEKHRoaXMuZWxlbWVudCwgbi5yb3RhdGUgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy50b3VjaFN0YXJ0ID0gRCh0aGlzLmVsZW1lbnQsIG4udG91Y2hTdGFydCB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLm11bHRpcG9pbnRTdGFydCA9IEQoXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQsXFxyXFxuICAgICAgICAgICAgICAgICAgICBuLm11bHRpcG9pbnRTdGFydCB8fCBzXFxyXFxuICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5tdWx0aXBvaW50RW5kID0gRCh0aGlzLmVsZW1lbnQsIG4ubXVsdGlwb2ludEVuZCB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnBpbmNoID0gRCh0aGlzLmVsZW1lbnQsIG4ucGluY2ggfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5zd2lwZSA9IEQodGhpcy5lbGVtZW50LCBuLnN3aXBlIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudGFwID0gRCh0aGlzLmVsZW1lbnQsIG4udGFwIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuZG91YmxlVGFwID0gRCh0aGlzLmVsZW1lbnQsIG4uZG91YmxlVGFwIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMubG9uZ1RhcCA9IEQodGhpcy5lbGVtZW50LCBuLmxvbmdUYXAgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5zaW5nbGVUYXAgPSBEKHRoaXMuZWxlbWVudCwgbi5zaW5nbGVUYXAgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5wcmVzc01vdmUgPSBEKHRoaXMuZWxlbWVudCwgbi5wcmVzc01vdmUgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy50d29GaW5nZXJQcmVzc01vdmUgPSBEKFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxcclxcbiAgICAgICAgICAgICAgICAgICAgbi50d29GaW5nZXJQcmVzc01vdmUgfHwgc1xcclxcbiAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudG91Y2hNb3ZlID0gRCh0aGlzLmVsZW1lbnQsIG4udG91Y2hNb3ZlIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudG91Y2hFbmQgPSBEKHRoaXMuZWxlbWVudCwgbi50b3VjaEVuZCB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnRvdWNoQ2FuY2VsID0gRCh0aGlzLmVsZW1lbnQsIG4udG91Y2hDYW5jZWwgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy50cmFuc2xhdGVDb250YWluZXIgPSB0aGlzLmVsZW1lbnQpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5fY2FuY2VsQWxsSGFuZGxlciA9IHRoaXMuY2FuY2VsQWxsLmJpbmQodGhpcykpLFxcclxcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcXFwic2Nyb2xsXFxcIiwgdGhpcy5fY2FuY2VsQWxsSGFuZGxlciksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmRlbHRhID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmxhc3QgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMubm93ID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnRhcFRpbWVvdXQgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuc2luZ2xlVGFwVGltZW91dCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5sb25nVGFwVGltZW91dCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5zd2lwZVRpbWVvdXQgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMueDEgPSB0aGlzLngyID0gdGhpcy55MSA9IHRoaXMueTIgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMucHJlVGFwUG9zaXRpb24gPSB7IHg6IG51bGwsIHk6IG51bGwgfSk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgIG4oZSwgW1xcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzdGFydFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5ub2RlTmFtZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xcXCJhXFxcIiwgXFxcImJ1dHRvblxcXCIsIFxcXCJpbnB1dFxcXCJdLmluZGV4T2YoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA+PSAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJpZ25vcmUgZHJhZyBmb3IgdGhpcyB0b3VjaGVkIGVsZW1lbnRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubm93ID0gRGF0ZS5ub3coKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueDEgPSBlLnRvdWNoZXNbMF0ucGFnZVgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnkxID0gZS50b3VjaGVzWzBdLnBhZ2VZKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kZWx0YSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm93IC0gKHRoaXMubGFzdCB8fCB0aGlzLm5vdykpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydC5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMucHJlVGFwUG9zaXRpb24ueCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuaXNEb3VibGVUYXAgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWx0YSA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsdGEgPD0gMjUwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVRhcFBvc2l0aW9uLnggLSB0aGlzLngxXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDwgMzAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGguYWJzKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlVGFwUG9zaXRpb24ueSAtIHRoaXMueTFcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPCAzMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNEb3VibGVUYXAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZVRhcFRpbWVvdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZVRhcFBvc2l0aW9uLnggPSB0aGlzLngxKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmVUYXBQb3NpdGlvbi55ID0gdGhpcy55MSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubGFzdCA9IHRoaXMubm93KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5wcmVWO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1RhcCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxTaW5nbGVUYXAoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeDogZS50b3VjaGVzWzFdLnBhZ2VYIC0gdGhpcy54MSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeTogZS50b3VjaGVzWzFdLnBhZ2VZIC0gdGhpcy55MSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnggPSBpLngpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC55ID0gaS55KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGluY2hTdGFydExlbiA9IFkodCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcG9pbnRTdGFydC5kaXNwYXRjaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9wcmV2ZW50VGFwID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmxvbmdUYXBUaW1lb3V0ID0gc2V0VGltZW91dChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb25nVGFwLmRpc3BhdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9wcmV2ZW50VGFwID0gITApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDc1MFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwibW92ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS50b3VjaGVzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5wcmVWLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUudG91Y2hlcy5sZW5ndGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS50b3VjaGVzWzBdLnBhZ2VYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGUudG91Y2hlc1swXS5wYWdlWTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgodGhpcy5pc0RvdWJsZVRhcCA9ICExKSwgaSA+IDEpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGUudG91Y2hlc1sxXS5wYWdlWCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gZS50b3VjaGVzWzFdLnBhZ2VZLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUudG91Y2hlc1sxXS5wYWdlWCAtIG4sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUudG91Y2hlc1sxXS5wYWdlWSAtIHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHQueCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBpbmNoU3RhcnRMZW4gPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoZS56b29tID0gWShyKSAvIHRoaXMucGluY2hTdGFydExlbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGluY2guZGlzcGF0Y2goZSwgdGhpcy5lbGVtZW50KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuYW5nbGUgPSBxKHIsIHQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZS5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC54ID0gci54KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC55ID0gci55KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLngyICYmIG51bGwgIT09IHRoaXMuc3gyXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChlLmRlbHRhWCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuIC0gdGhpcy54MiArIGwgLSB0aGlzLnN4MikgLyAyKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kZWx0YVkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocyAtIHRoaXMueTIgKyBvIC0gdGhpcy5zeTIpIC8gMikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChlLmRlbHRhWCA9IDApLCAoZS5kZWx0YVkgPSAwKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50d29GaW5nZXJQcmVzc01vdmUuZGlzcGF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc3gyID0gbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc3kyID0gbyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy54Mikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmRlbHRhWCA9IG4gLSB0aGlzLngyKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuZGVsdGFZID0gcyAtIHRoaXMueTIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gTWF0aC5hYnModGhpcy54MSAtIHRoaXMueDIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gTWF0aC5hYnModGhpcy55MSAtIHRoaXMueTIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID4gMTAgfHwgaCA+IDEwKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5fcHJldmVudFRhcCA9ICEwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSAoZS5kZWx0YVggPSAwKSwgKGUuZGVsdGFZID0gMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNzTW92ZS5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlLmRpc3BhdGNoKGUsIHRoaXMuZWxlbWVudCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxMb25nVGFwKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54MiA9IG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueTIgPSBzKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPiAxICYmIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJlbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuY2hhbmdlZFRvdWNoZXMpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1RhcCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudG91Y2hlcy5sZW5ndGggPCAyICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5tdWx0aXBvaW50RW5kLmRpc3BhdGNoKGUsIHRoaXMuZWxlbWVudCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zeDIgPSB0aGlzLnN5MiA9IG51bGwpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLngyICYmIE1hdGguYWJzKHRoaXMueDEgLSB0aGlzLngyKSA+IDMwKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueTIgJiYgTWF0aC5hYnModGhpcy55MSAtIHRoaXMueTIpID4gMzApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKGUuZGlyZWN0aW9uID0gdGhpcy5fc3dpcGVEaXJlY3Rpb24oXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54MSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngyLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueTEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55MlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zd2lwZVRpbWVvdXQgPSBzZXRUaW1lb3V0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zd2lwZS5kaXNwYXRjaChlLCB0LmVsZW1lbnQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMudGFwVGltZW91dCA9IHNldFRpbWVvdXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Ll9wcmV2ZW50VGFwIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRhcC5kaXNwYXRjaChlLCB0LmVsZW1lbnQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5pc0RvdWJsZVRhcCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LmRvdWJsZVRhcC5kaXNwYXRjaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbGVtZW50XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5pc0RvdWJsZVRhcCA9ICExKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNEb3VibGVUYXAgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5zaW5nbGVUYXBUaW1lb3V0ID0gc2V0VGltZW91dChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zaW5nbGVUYXAuZGlzcGF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmVsZW1lbnRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDI1MFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFbmQuZGlzcGF0Y2goZSwgdGhpcy5lbGVtZW50KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZVYueCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJlVi55ID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy56b29tID0gMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5waW5jaFN0YXJ0TGVuID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54MSA9IHRoaXMueDIgPSB0aGlzLnkxID0gdGhpcy55MiA9IG51bGwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcImNhbmNlbEFsbFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLl9wcmV2ZW50VGFwID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaW5nbGVUYXBUaW1lb3V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGFwVGltZW91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdUYXBUaW1lb3V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3dpcGVUaW1lb3V0KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcImNhbmNlbFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbEFsbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQ2FuY2VsLmRpc3BhdGNoKGUsIHRoaXMuZWxlbWVudCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJfY2FuY2VsTG9uZ1RhcFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmxvbmdUYXBUaW1lb3V0KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcIl9jYW5jZWxTaW5nbGVUYXBcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaW5nbGVUYXBUaW1lb3V0KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcIl9zd2lwZURpcmVjdGlvblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQsIGksIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hYnMoZSAtIHQpID49IE1hdGguYWJzKGkgLSBuKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGUgLSB0ID4gMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwiTGVmdFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIlJpZ2h0XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGkgLSBuID4gMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFxcXCJVcFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcXFwiRG93blxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJvblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2VdICYmIHRoaXNbZV0uYWRkKHQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib2ZmXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbZV0gJiYgdGhpc1tlXS5kZWwodCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkZXN0cm95XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVUYXBUaW1lb3V0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zaW5nbGVUYXBUaW1lb3V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXBUaW1lb3V0ICYmIGNsZWFyVGltZW91dCh0aGlzLnRhcFRpbWVvdXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvbmdUYXBUaW1lb3V0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nVGFwVGltZW91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpcGVUaW1lb3V0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5zd2lwZVRpbWVvdXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaHN0YXJ0XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2htb3ZlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaGVuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaGNhbmNlbFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZS5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0LmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcG9pbnRTdGFydC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBvaW50RW5kLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBpbmNoLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXBlLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3VibGVUYXAuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RhcC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVUYXAuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlc3NNb3ZlLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR3b0ZpbmdlclByZXNzTW92ZS5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaE1vdmUuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFbmQuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hDYW5jZWwuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZVYgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waW5jaFN0YXJ0TGVuID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRG91YmxlVGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsdGEgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubm93ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFwVGltZW91dCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZVRhcFRpbWVvdXQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb25nVGFwVGltZW91dCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXBlVGltZW91dCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngxID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueDIgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55MSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkyID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlVGFwUG9zaXRpb24gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaFN0YXJ0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwb2ludFN0YXJ0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwb2ludEVuZCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBpbmNoID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3dpcGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXAgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb3VibGVUYXAgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb25nVGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlVGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlc3NNb3ZlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hFbmQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENhbmNlbCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnR3b0ZpbmdlclByZXNzTW92ZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInNjcm9sbFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9jYW5jZWxBbGxIYW5kbGVyXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICBlXFxyXFxuICAgICAgICApO1xcclxcbiAgICB9KSgpO1xcclxcbiAgICBmdW5jdGlvbiBXKGUpIHtcXHJcXG4gICAgICAgIHZhciB0ID0gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwiZmFrZWVsZW1lbnRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGkgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogXFxcInRyYW5zaXRpb25lbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uOiBcXFwib1RyYW5zaXRpb25FbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1velRyYW5zaXRpb246IFxcXCJ0cmFuc2l0aW9uZW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uOiBcXFwid2Via2l0VHJhbnNpdGlvbkVuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgICBmb3IgKGUgaW4gaSkgaWYgKHZvaWQgMCAhPT0gdC5zdHlsZVtlXSkgcmV0dXJuIGlbZV07XFxyXFxuICAgICAgICAgICAgfSkoKSxcXHJcXG4gICAgICAgICAgICBpID1cXHJcXG4gICAgICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsXFxyXFxuICAgICAgICAgICAgbiA9IGMoZSwgXFxcImdzbGlkZS1tZWRpYVxcXCIpID8gZSA6IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgIHMgPSB1KG4sIFxcXCIuZ2lubmVyLWNvbnRhaW5lclxcXCIpLFxcclxcbiAgICAgICAgICAgIGwgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtZGVzY3JpcHRpb25cXFwiKTtcXHJcXG4gICAgICAgIGkgPiA3NjkgJiYgKG4gPSBzKSxcXHJcXG4gICAgICAgICAgICBoKG4sIFxcXCJncmVzZXRcXFwiKSxcXHJcXG4gICAgICAgICAgICB2KG4sIFxcXCJ0cmFuc2xhdGUzZCgwLCAwLCAwKVxcXCIpLFxcclxcbiAgICAgICAgICAgIGEodCwge1xcclxcbiAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IG4sXFxyXFxuICAgICAgICAgICAgICAgIG9uY2U6ICEwLFxcclxcbiAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBkKG4sIFxcXCJncmVzZXRcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAobi5zdHlsZS5vcGFjaXR5ID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgIGwgJiYgKGwuc3R5bGUub3BhY2l0eSA9IFxcXCJcXFwiKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBCKGUpIHtcXHJcXG4gICAgICAgIGlmIChlLmV2ZW50cy5oYXNPd25Qcm9wZXJ0eShcXFwidG91Y2hcXFwiKSkgcmV0dXJuICExO1xcclxcbiAgICAgICAgdmFyIHQsXFxyXFxuICAgICAgICAgICAgaSxcXHJcXG4gICAgICAgICAgICBuLFxcclxcbiAgICAgICAgICAgIHMgPSB5KCksXFxyXFxuICAgICAgICAgICAgbCA9IHMud2lkdGgsXFxyXFxuICAgICAgICAgICAgbyA9IHMuaGVpZ2h0LFxcclxcbiAgICAgICAgICAgIHIgPSAhMSxcXHJcXG4gICAgICAgICAgICBhID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBnID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBmID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBwID0gITEsXFxyXFxuICAgICAgICAgICAgbSA9IDEsXFxyXFxuICAgICAgICAgICAgeCA9IDEsXFxyXFxuICAgICAgICAgICAgYiA9ICExLFxcclxcbiAgICAgICAgICAgIFMgPSAhMSxcXHJcXG4gICAgICAgICAgICB3ID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBUID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBDID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBrID0gbnVsbCxcXHJcXG4gICAgICAgICAgICBFID0gMCxcXHJcXG4gICAgICAgICAgICBBID0gMCxcXHJcXG4gICAgICAgICAgICBMID0gITEsXFxyXFxuICAgICAgICAgICAgSSA9ICExLFxcclxcbiAgICAgICAgICAgIE8gPSB7fSxcXHJcXG4gICAgICAgICAgICBQID0ge30sXFxyXFxuICAgICAgICAgICAgTSA9IDAsXFxyXFxuICAgICAgICAgICAgeiA9IDAsXFxyXFxuICAgICAgICAgICAgWCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJnbGlnaHRib3gtc2xpZGVyXFxcIiksXFxyXFxuICAgICAgICAgICAgWSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5nb3ZlcmxheVxcXCIpLFxcclxcbiAgICAgICAgICAgIHEgPSBuZXcgXyhYLCB7XFxyXFxuICAgICAgICAgICAgICAgIHRvdWNoU3RhcnQ6IGZ1bmN0aW9uICh0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKChyID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIChjKHQudGFyZ2V0VG91Y2hlc1swXS50YXJnZXQsIFxcXCJnaW5uZXItY29udGFpbmVyXFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdSh0LnRhcmdldFRvdWNoZXNbMF0udGFyZ2V0LCBcXFwiLmdzbGlkZS1kZXNjXFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImFcXFwiID09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRhcmdldFRvdWNoZXNbMF0udGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHUodC50YXJnZXRUb3VjaGVzWzBdLnRhcmdldCwgXFxcIi5nc2xpZGUtaW5saW5lXFxcIikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWMoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRhcmdldFRvdWNoZXNbMF0udGFyZ2V0LnBhcmVudE5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZ3NsaWRlLWlubGluZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAociA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByKVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKFAgPSB0LnRhcmdldFRvdWNoZXNbMF0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoTy5wYWdlWCA9IHQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChPLnBhZ2VZID0gdC50YXJnZXRUb3VjaGVzWzBdLnBhZ2VZKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKE0gPSB0LnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh6ID0gdC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA9IGUuYWN0aXZlU2xpZGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZyA9IGEucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gPSBhLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtaW5saW5lXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKGcsIFxcXCJnc2xpZGUtaW1hZ2VcXFwiKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYgPSBnLnF1ZXJ5U2VsZWN0b3IoXFxcImltZ1xcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdpbmRvdy5pbm5lcldpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgpID4gNzY5ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZyA9IGEucXVlcnlTZWxlY3RvcihcXFwiLmdpbm5lci1jb250YWluZXJcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoWSwgXFxcImdyZXNldFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnBhZ2VYID4gMjAgJiYgdC5wYWdlWCA8IHdpbmRvdy5pbm5lcldpZHRoIC0gMjApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB0b3VjaE1vdmU6IGZ1bmN0aW9uIChzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAociAmJiAoKFAgPSBzLnRhcmdldFRvdWNoZXNbMF0pLCAhYiAmJiAhUykpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobiAmJiBuLm9mZnNldEhlaWdodCA+IG8pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBPLnBhZ2VYIC0gUC5wYWdlWDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGEpIDw9IDEzKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAgPSAhMDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHMudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gcy50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBNIC0gZCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbSA9IHogLSBjO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKE1hdGguYWJzKHUpID4gTWF0aC5hYnMobSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChMID0gITEpLCAoSSA9ICEwKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKChJID0gITEpLCAoTCA9ICEwKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0ID0gUC5wYWdlWCAtIE8ucGFnZVgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoRSA9ICgxMDAgKiB0KSAvIGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IFAucGFnZVkgLSBPLnBhZ2VZKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKEEgPSAoMTAwICogaSkgLyBvKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChoID0gMSAtIE1hdGguYWJzKGkpIC8gbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoWS5zdHlsZS5vcGFjaXR5ID0gaCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldHRpbmdzLnRvdWNoRm9sbG93QXhpcyAmJiAoRSA9IDApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgSSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChoID0gMSAtIE1hdGguYWJzKHQpIC8gbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZy5zdHlsZS5vcGFjaXR5ID0gaCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldHRpbmdzLnRvdWNoRm9sbG93QXhpcyAmJiAoQSA9IDApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIWYpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdihnLCBcXFwidHJhbnNsYXRlM2QoXFxcIi5jb25jYXQoRSwgXFxcIiUsIDAsIDApXFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHYoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0cmFuc2xhdGUzZChcXFwiLmNvbmNhdChFLCBcXFwiJSwgXFxcIikuY29uY2F0KEEsIFxcXCIlLCAwKVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgdG91Y2hFbmQ6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmIChyKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCgocCA9ICExKSwgUyB8fCBiKSkgcmV0dXJuIChDID0gdyksIHZvaWQgKGsgPSBUKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IE1hdGguYWJzKHBhcnNlSW50KEEpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IE1hdGguYWJzKHBhcnNlSW50KEUpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID4gMjkgJiYgZikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0IDwgMjkgJiYgaSA8IDI1XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChoKFksIFxcXCJncmVzZXRcXFwiKSwgKFkuc3R5bGUub3BhY2l0eSA9IDEpLCBXKGcpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB2b2lkIDA7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZS5jbG9zZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBtdWx0aXBvaW50RW5kOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBiID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LCA1MCk7XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIG11bHRpcG9pbnRTdGFydDogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgKGIgPSAhMCksIChtID0geCB8fCAxKTtcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgcGluY2g6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoIWYgfHwgcCkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgKGIgPSAhMCksIChmLnNjYWxlWCA9IGYuc2NhbGVZID0gbSAqIGUuem9vbSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IG0gKiBlLnpvb207XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoKChTID0gITApLCB0IDw9IDEpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChTID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9IDEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoayA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoQyA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodyA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoVCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIGYuc2V0QXR0cmlidXRlKFxcXCJzdHlsZVxcXCIsIFxcXCJcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB0ID4gNC41ICYmICh0ID0gNC41KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAoZi5zdHlsZS50cmFuc2Zvcm0gPSBcXFwic2NhbGUzZChcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodCwgXFxcIiwgXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCh0LCBcXFwiLCAxKVxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAoeCA9IHQpO1xcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBwcmVzc01vdmU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoUyAmJiAhYikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gUC5wYWdlWCAtIE8ucGFnZVgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBQLnBhZ2VZIC0gTy5wYWdlWTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBDICYmICh0ICs9IEMpLCBrICYmIChpICs9IGspLCAodyA9IHQpLCAoVCA9IGkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gXFxcInRyYW5zbGF0ZTNkKFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCh0LCBcXFwicHgsIFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoaSwgXFxcInB4LCAwKVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4gKz0gXFxcIiBzY2FsZTNkKFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoeCwgXFxcIiwgXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoeCwgXFxcIiwgMSlcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYoZiwgbik7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHN3aXBlOiBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFTKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiKSBiID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXFwiTGVmdFxcXCIgPT0gdC5kaXJlY3Rpb24pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmluZGV4ID09IGUuZWxlbWVudHMubGVuZ3RoIC0gMSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVyhnKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubmV4dFNsaWRlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcXCJSaWdodFxcXCIgPT0gdC5kaXJlY3Rpb24pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09IGUuaW5kZXgpIHJldHVybiBXKGcpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2U2xpZGUoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgIGUuZXZlbnRzLnRvdWNoID0gcTtcXHJcXG4gICAgfVxcclxcbiAgICB2YXIgSCA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgZnVuY3Rpb24gZShpLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGwgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzJdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcXHJcXG4gICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHQodGhpcywgZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbWcgPSBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNsaWRlID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5vbmNsb3NlID0gbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zZXRab29tRXZlbnRzKVxcclxcbiAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmFjdGl2ZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnpvb21lZEluID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZHJhZ2dpbmcgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxYID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwibW91c2Vkb3duXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5kcmFnU3RhcnQoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNldXBcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmRyYWdFbmQoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNlbW92ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuZHJhZyhlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICExXFxyXFxuICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcuYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwiY2xpY2tcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLnNsaWRlLmNsYXNzTGlzdC5jb250YWlucyhcXFwiZHJhZ2dpbmctbmF2XFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHMuem9vbU91dCgpLCAhMSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcy56b29tZWRJblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB2b2lkIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuem9vbWVkSW4gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFzLmRyYWdnaW5nICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnpvb21PdXQoKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHMuem9vbUluKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmltZy5zZXRab29tRXZlbnRzID0gITApO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJ6b29tSW5cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy53aWRvd1dpZHRoKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHRoaXMuem9vbWVkSW4gfHwgZSA8PSA3NjgpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuaW1nO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImRhdGEtc3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmdldEF0dHJpYnV0ZShcXFwic3R5bGVcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuc3R5bGUubWF4V2lkdGggPSB0Lm5hdHVyYWxXaWR0aCArIFxcXCJweFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnN0eWxlLm1heEhlaWdodCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubmF0dXJhbEhlaWdodCArIFxcXCJweFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQubmF0dXJhbFdpZHRoID4gZSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZSAvIDIgLSB0Lm5hdHVyYWxXaWR0aCAvIDI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLnBhcmVudE5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZS5jbGFzc0xpc3QuYWRkKFxcXCJ6b29tZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy56b29tZWRJbiA9ICEwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInpvb21PdXRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKFxcXCJzdHlsZVxcXCIsIFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmdldEF0dHJpYnV0ZShcXFwiZGF0YS1zdHlsZVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZS5jbGFzc0xpc3QucmVtb3ZlKFxcXCJ6b29tZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnpvb21lZEluID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnhPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnlPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25jbG9zZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIHRoaXMub25jbG9zZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25jbG9zZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdTdGFydFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbWVkSW5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChcXFwidG91Y2hzdGFydFxcXCIgPT09IGUudHlwZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKCh0aGlzLmluaXRpYWxYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WCAtXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54T2Zmc2V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WSAtXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55T2Zmc2V0KSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgodGhpcy5pbml0aWFsWCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRYIC0gdGhpcy54T2Zmc2V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFkgLSB0aGlzLnlPZmZzZXQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0ID09PSB0aGlzLmltZyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5hY3RpdmUgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcuY2xhc3NMaXN0LmFkZChcXFwiZHJhZ2dpbmdcXFwiKSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAodGhpcy5hY3RpdmUgPSAhMSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZHJhZ0VuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFggPSB0aGlzLmN1cnJlbnRYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID0gdGhpcy5jdXJyZW50WSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hY3RpdmUgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5kcmFnZ2luZyA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuaW1nLmlzRHJhZ2dpbmcgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaW1nLmNsYXNzTGlzdC5yZW1vdmUoXFxcImRyYWdnaW5nXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUucHJldmVudERlZmF1bHQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaG1vdmVcXFwiID09PSBlLnR5cGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5jdXJyZW50WCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLmluaXRpYWxYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMuaW5pdGlhbFkpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLmN1cnJlbnRYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFggLSB0aGlzLmluaXRpYWxYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFkgLSB0aGlzLmluaXRpYWxZKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54T2Zmc2V0ID0gdGhpcy5jdXJyZW50WCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy55T2Zmc2V0ID0gdGhpcy5jdXJyZW50WSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbWcuaXNEcmFnZ2luZyA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRyYWdnaW5nID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50WCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRZXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJvbk1vdmVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy56b29tZWRJbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmNsaWVudFggLSB0aGlzLmltZy5uYXR1cmFsV2lkdGggLyAyLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLmNsaWVudFkgLSB0aGlzLmltZy5uYXR1cmFsSGVpZ2h0IC8gMjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKHRoaXMuaW1nLCB0LCBpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNldFRyYW5zbGF0ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3R5bGUudHJhbnNmb3JtID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0cmFuc2xhdGUzZChcXFwiICsgdCArIFxcXCJweCwgXFxcIiArIGkgKyBcXFwicHgsIDApXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJ3aWRvd1dpZHRoXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGllbnRXaWR0aFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICAgICAgZVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICB9KSgpLFxcclxcbiAgICAgICAgViA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB7fTtcXHJcXG4gICAgICAgICAgICAgICAgdCh0aGlzLCBlKTtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIHMgPSBuLmRyYWdFbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGwgPSBuLnRvbGVyYW5jZVgsXFxyXFxuICAgICAgICAgICAgICAgICAgICBvID0gdm9pZCAwID09PSBsID8gNDAgOiBsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgciA9IG4udG9sZXJhbmNlWSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGEgPSB2b2lkIDAgPT09IHIgPyA2NSA6IHIsXFxyXFxuICAgICAgICAgICAgICAgICAgICBoID0gbi5zbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGQgPSB2b2lkIDAgPT09IGggPyBudWxsIDogaCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGMgPSBuLmluc3RhbmNlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdSA9IHZvaWQgMCA9PT0gYyA/IG51bGwgOiBjO1xcclxcbiAgICAgICAgICAgICAgICAodGhpcy5lbCA9IHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aXZlID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZHJhZ2dpbmcgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxYID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGlyZWN0aW9uID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5sYXN0RGlyZWN0aW9uID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy50b2xlcmFuY2VYID0gbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy50b2xlcmFuY2VZID0gYSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy50b2xlcmFuY2VSZWFjaGVkID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZHJhZ0NvbnRhaW5lciA9IHRoaXMuZWwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2xpZGUgPSBkKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmluc3RhbmNlID0gdSksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNlZG93blxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuZHJhZ1N0YXJ0KGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNldXBcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmRyYWdFbmQoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBcXFwibW91c2Vtb3ZlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5kcmFnKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgIG4oZSwgW1xcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdTdGFydFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNsaWRlLmNsYXNzTGlzdC5jb250YWlucyhcXFwiem9vbWVkXFxcIikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaHN0YXJ0XFxcIiA9PT0gZS50eXBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMuaW5pdGlhbFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudG91Y2hlc1swXS5jbGllbnRYIC0gdGhpcy54T2Zmc2V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMueU9mZnNldCkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMuaW5pdGlhbFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WCAtIHRoaXMueE9mZnNldCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRZIC0gdGhpcy55T2Zmc2V0KSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXFxcIm5vZHJhZ1xcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KGUudGFyZ2V0LCBcXFwiLm5vZHJhZ1xcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJpbnB1dFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzZWxlY3RcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidGV4dGFyZWFcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiYnV0dG9uXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImFcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uaW5kZXhPZih0KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHRoaXMuYWN0aXZlID0gITEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZS5wcmV2ZW50RGVmYXVsdCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUudGFyZ2V0ID09PSB0aGlzLmVsIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxcXCJpbWdcXFwiICE9PSB0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUoZS50YXJnZXQsIFxcXCIuZ3NsaWRlLWlubGluZVxcXCIpKSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuYWN0aXZlID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZChcXFwiZHJhZ2dpbmdcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kcmFnQ29udGFpbmVyID0gdShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ2lubmVyLWNvbnRhaW5lclxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZHJhZ0VuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJiBlLnByZXZlbnREZWZhdWx0KCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFkgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRYID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54T2Zmc2V0ID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy55T2Zmc2V0ID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hY3RpdmUgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvU2xpZGVDaGFuZ2UgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuaW5zdGFuY2UucHJldmVudE91dHNpZGVDbGljayA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicmlnaHRcXFwiID09IHRoaXMuZG9TbGlkZUNoYW5nZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnByZXZTbGlkZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJsZWZ0XFxcIiA9PSB0aGlzLmRvU2xpZGVDaGFuZ2UgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5uZXh0U2xpZGUoKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRvU2xpZGVDbG9zZSAmJiB0aGlzLmluc3RhbmNlLmNsb3NlKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvbGVyYW5jZVJlYWNoZWQgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQ29udGFpbmVyLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5pbnN0YW5jZS5wcmV2ZW50T3V0c2lkZUNsaWNrID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC50b2xlcmFuY2VSZWFjaGVkID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5sYXN0RGlyZWN0aW9uID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LmRyYWdnaW5nID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5lbC5pc0RyYWdnaW5nID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmVsLmNsYXNzTGlzdC5yZW1vdmUoXFxcImRyYWdnaW5nXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2xpZGUuY2xhc3NMaXN0LnJlbW92ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJkcmFnZ2luZy1uYXZcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LmRyYWdDb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5kcmFnQ29udGFpbmVyLnN0eWxlLnRyYW5zaXRpb24gPSBcXFwiXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlLmNsYXNzTGlzdC5hZGQoXFxcImRyYWdnaW5nLW5hdlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0b3VjaG1vdmVcXFwiID09PSBlLnR5cGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMuY3VycmVudFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WCAtXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdGlhbFgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFkgLVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxZKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMuY3VycmVudFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFggLSB0aGlzLmluaXRpYWxYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WSAtIHRoaXMuaW5pdGlhbFkpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54T2Zmc2V0ID0gdGhpcy5jdXJyZW50WCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IHRoaXMuY3VycmVudFkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmVsLmlzRHJhZ2dpbmcgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZHJhZ2dpbmcgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9TbGlkZUNoYW5nZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb1NsaWRlQ2xvc2UgPSAhMSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IE1hdGguYWJzKHRoaXMuY3VycmVudFgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBNYXRoLmFicyh0aGlzLmN1cnJlbnRZKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPj0gTWF0aC5hYnModGhpcy5jdXJyZW50WSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMubGFzdERpcmVjdGlvbiB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwieFxcXCIgPT0gdGhpcy5sYXN0RGlyZWN0aW9uKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5sYXN0RGlyZWN0aW9uID0gXFxcInhcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdDb250YWluZXIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5zaG91bGRDaGFuZ2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICghdGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5kcmFnQXV0b1NuYXAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvU2xpZGVDaGFuZ2UgPSBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5kcmFnQXV0b1NuYXAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5zdGFuY2UucHJldmVudE91dHNpZGVDbGljayA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudG9sZXJhbmNlUmVhY2hlZCA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGl2ZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluc3RhbmNlLnByZXZlbnRPdXRzaWRlQ2xpY2sgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0VuZChudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJyaWdodFxcXCIgPT0gbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UucHJldlNsaWRlKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibGVmdFxcXCIgPT0gbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UubmV4dFNsaWRlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvbGVyYW5jZVkgPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID49IHQgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMubGFzdERpcmVjdGlvbiB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwieVxcXCIgPT0gdGhpcy5sYXN0RGlyZWN0aW9uKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5sYXN0RGlyZWN0aW9uID0gXFxcInlcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdDb250YWluZXIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50WVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gdGhpcy5zaG91bGRDbG9zZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmluc3RhbmNlLnNldHRpbmdzLmRyYWdBdXRvU25hcCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9TbGlkZUNsb3NlID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0dGluZ3NcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZHJhZ0F1dG9TbmFwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLmNsb3NlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzaG91bGRDaGFuZ2VcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh0aGlzLmN1cnJlbnRYKSA+PSB0aGlzLnRvbGVyYW5jZVgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5jdXJyZW50WCA+IDAgPyBcXFwicmlnaHRcXFwiIDogXFxcImxlZnRcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChcXFwibGVmdFxcXCIgPT0gdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUgIT09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUucGFyZW50Tm9kZS5sYXN0Q2hpbGQpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFxcXCJyaWdodFxcXCIgPT0gdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlICE9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZS5wYXJlbnROb2RlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpcnN0Q2hpbGQpKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID0gdCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2hvdWxkQ2xvc2VcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLmN1cnJlbnRZKSA+PSB0aGlzLnRvbGVyYW5jZVkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzZXRUcmFuc2xhdGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbM10gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1szXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuc3R5bGUudHJhbnNpdGlvbiA9IG4gPyBcXFwiYWxsIC4ycyBlYXNlXFxcIiA6IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnN0eWxlLnRyYW5zZm9ybSA9IFxcXCJ0cmFuc2xhdGUzZChcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCh0LCBcXFwicHgsIFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChpLCBcXFwicHgsIDApXFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICAgICAgZVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICB9KSgpO1xcclxcbiAgICBmdW5jdGlvbiBqKGUsIHQsIGksIG4pIHtcXHJcXG4gICAgICAgIHZhciBzID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLW1lZGlhXFxcIiksXFxyXFxuICAgICAgICAgICAgbCA9IG5ldyBJbWFnZSgpLFxcclxcbiAgICAgICAgICAgIG8gPSBcXFwiZ1NsaWRlVGl0bGVfXFxcIiArIGksXFxyXFxuICAgICAgICAgICAgciA9IFxcXCJnU2xpZGVEZXNjX1xcXCIgKyBpO1xcclxcbiAgICAgICAgbC5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgIFxcXCJsb2FkXFxcIixcXHJcXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgIFQobikgJiYgbigpO1xcclxcbiAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICksXFxyXFxuICAgICAgICAgICAgKGwuc3JjID0gdC5ocmVmKSxcXHJcXG4gICAgICAgICAgICBcXFwiXFxcIiAhPSB0LnNpemVzICYmXFxyXFxuICAgICAgICAgICAgICAgIFxcXCJcXFwiICE9IHQuc3Jjc2V0ICYmXFxyXFxuICAgICAgICAgICAgICAgICgobC5zaXplcyA9IHQuc2l6ZXMpLCAobC5zcmNzZXQgPSB0LnNyY3NldCkpLFxcclxcbiAgICAgICAgICAgIChsLmFsdCA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICBJKHQuYWx0KSB8fCBcXFwiXFxcIiA9PT0gdC5hbHQgfHwgKGwuYWx0ID0gdC5hbHQpLFxcclxcbiAgICAgICAgICAgIFxcXCJcXFwiICE9PSB0LnRpdGxlICYmIGwuc2V0QXR0cmlidXRlKFxcXCJhcmlhLWxhYmVsbGVkYnlcXFwiLCBvKSxcXHJcXG4gICAgICAgICAgICBcXFwiXFxcIiAhPT0gdC5kZXNjcmlwdGlvbiAmJiBsLnNldEF0dHJpYnV0ZShcXFwiYXJpYS1kZXNjcmliZWRieVxcXCIsIHIpLFxcclxcbiAgICAgICAgICAgIHQuaGFzT3duUHJvcGVydHkoXFxcIl9oYXNDdXN0b21XaWR0aFxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgIHQuX2hhc0N1c3RvbVdpZHRoICYmXFxyXFxuICAgICAgICAgICAgICAgIChsLnN0eWxlLndpZHRoID0gdC53aWR0aCksXFxyXFxuICAgICAgICAgICAgdC5oYXNPd25Qcm9wZXJ0eShcXFwiX2hhc0N1c3RvbUhlaWdodFxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgIHQuX2hhc0N1c3RvbUhlaWdodCAmJlxcclxcbiAgICAgICAgICAgICAgICAobC5zdHlsZS5oZWlnaHQgPSB0LmhlaWdodCksXFxyXFxuICAgICAgICAgICAgcy5pbnNlcnRCZWZvcmUobCwgcy5maXJzdENoaWxkKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBGKGUsIHQsIGksIG4pIHtcXHJcXG4gICAgICAgIHZhciBzID0gdGhpcyxcXHJcXG4gICAgICAgICAgICBsID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ2lubmVyLWNvbnRhaW5lclxcXCIpLFxcclxcbiAgICAgICAgICAgIG8gPSBcXFwiZ3ZpZGVvXFxcIiArIGksXFxyXFxuICAgICAgICAgICAgciA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgIGEgPSB0aGlzLmdldEFsbFBsYXllcnMoKTtcXHJcXG4gICAgICAgIGgobCwgXFxcImd2aWRlby1jb250YWluZXJcXFwiKSxcXHJcXG4gICAgICAgICAgICByLmluc2VydEJlZm9yZShcXHJcXG4gICAgICAgICAgICAgICAgbSgnPGRpdiBjbGFzcz1cXFwiZ3ZpZGVvLXdyYXBwZXJcXFwiPjwvZGl2PicpLFxcclxcbiAgICAgICAgICAgICAgICByLmZpcnN0Q2hpbGRcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgdmFyIGQgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5ndmlkZW8td3JhcHBlclxcXCIpO1xcclxcbiAgICAgICAgUyh0aGlzLnNldHRpbmdzLnBseXIuY3NzLCBcXFwiUGx5clxcXCIpO1xcclxcbiAgICAgICAgdmFyIGMgPSB0LmhyZWYsXFxyXFxuICAgICAgICAgICAgdSA9IGxvY2F0aW9uLnByb3RvY29sLnJlcGxhY2UoXFxcIjpcXFwiLCBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgZyA9IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgIHYgPSBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICBmID0gITE7XFxyXFxuICAgICAgICBcXFwiZmlsZVxcXCIgPT0gdSAmJiAodSA9IFxcXCJodHRwXFxcIiksXFxyXFxuICAgICAgICAgICAgKHIuc3R5bGUubWF4V2lkdGggPSB0LndpZHRoKSxcXHJcXG4gICAgICAgICAgICBTKHRoaXMuc2V0dGluZ3MucGx5ci5qcywgXFxcIlBseXJcXFwiLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChjLm1hdGNoKC92aW1lb1xcXFwuY29tXFxcXC8oWzAtOV0qKS8pKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IC92aW1lby4qXFxcXC8oXFxcXGQrKS9pLmV4ZWMoYyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAoZyA9IFxcXCJ2aW1lb1xcXCIpLCAodiA9IGxbMV0pO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgIGMubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgLyh5b3V0dWJlXFxcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcXFwuY29tKVxcXFwvd2F0Y2hcXFxcP3Y9KFthLXpBLVowLTlcXFxcLV9dKykvXFxyXFxuICAgICAgICAgICAgICAgICAgICApIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICBjLm1hdGNoKC95b3V0dVxcXFwuYmVcXFxcLyhbYS16QS1aMC05XFxcXC1fXSspLykgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGMubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgLyh5b3V0dWJlXFxcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcXFwuY29tKVxcXFwvZW1iZWRcXFxcLyhbYS16QS1aMC05XFxcXC1fXSspL1xcclxcbiAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciByID0gKGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBcXFwiXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oPnw8KS9naSwgXFxcIlxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3BsaXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyh2aVxcXFwvfHY9fFxcXFwvdlxcXFwvfHlvdXR1XFxcXC5iZVxcXFwvfFxcXFwvZW1iZWRcXFxcLykvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVsyXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAodCA9IGVbMl0uc3BsaXQoL1teMC05YS16X1xcXFwtXS9pKSlbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0pKGMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgKGcgPSBcXFwieW91dHViZVxcXCIpLCAodiA9IHIpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBjLm1hdGNoKC9cXFxcLihtcDR8b2dnfHdlYm18bW92KSQvKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgZyA9IFxcXCJsb2NhbFxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgdSA9ICc8dmlkZW8gaWQ9XFxcIicgKyBvICsgJ1xcXCIgJztcXHJcXG4gICAgICAgICAgICAgICAgICAgICh1ICs9ICdzdHlsZT1cXFwiYmFja2dyb3VuZDojMDAwOyBtYXgtd2lkdGg6ICcuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHQud2lkdGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgJztcXFwiICdcXHJcXG4gICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh1ICs9ICdwcmVsb2FkPVxcXCJtZXRhZGF0YVxcXCIgJyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKHUgKz0gJ3gtd2Via2l0LWFpcnBsYXk9XFxcImFsbG93XFxcIiAnKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAodSArPSBcXFwicGxheXNpbmxpbmUgXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKHUgKz0gXFxcImNvbnRyb2xzIFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh1ICs9ICdjbGFzcz1cXFwiZ3ZpZGVvLWxvY2FsXFxcIj4nKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciBwID0gYy50b0xvd2VyQ2FzZSgpLnNwbGl0KFxcXCIuXFxcIikucG9wKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IHsgbXA0OiBcXFwiXFxcIiwgb2dnOiBcXFwiXFxcIiwgd2VibTogXFxcIlxcXCIgfTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHggaW4gKCh5WyhwID0gXFxcIm1vdlxcXCIgPT0gcCA/IFxcXCJtcDRcXFwiIDogcCldID0gYyksIHkpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5Lmhhc093blByb3BlcnR5KHgpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBTID0geVt4XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5oYXNPd25Qcm9wZXJ0eSh4KSAmJiAoUyA9IHRbeF0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIlxcXCIgIT09IFMgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodSArPSAnPHNvdXJjZSBzcmM9XFxcIidcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChTLCAnXFxcIiB0eXBlPVxcXCJ2aWRlby8nKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHgsICdcXFwiPicpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICBmID0gbSgodSArPSBcXFwiPC92aWRlbz5cXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgdmFyIHcgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgZiB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgbShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBpZD1cXFwiJ1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KG8sICdcXFwiIGRhdGEtcGx5ci1wcm92aWRlcj1cXFwiJylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChnLCAnXFxcIiBkYXRhLXBseXItZW1iZWQtaWQ9XFxcIicpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodiwgJ1xcXCI+PC9kaXY+JylcXHJcXG4gICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgIGgoZCwgXFxcIlxcXCIuY29uY2F0KGcsIFxcXCItdmlkZW8gZ3ZpZGVvXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgZC5hcHBlbmRDaGlsZCh3KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGQuc2V0QXR0cmlidXRlKFxcXCJkYXRhLWlkXFxcIiwgbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICBkLnNldEF0dHJpYnV0ZShcXFwiZGF0YS1pbmRleFxcXCIsIGkpO1xcclxcbiAgICAgICAgICAgICAgICB2YXIgQyA9IE8ocy5zZXR0aW5ncy5wbHlyLCBcXFwiY29uZmlnXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHMuc2V0dGluZ3MucGx5ci5jb25maWdcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgayA9IG5ldyBQbHlyKFxcXCIjXFxcIiArIG8sIEMpO1xcclxcbiAgICAgICAgICAgICAgICBrLm9uKFxcXCJyZWFkeVxcXCIsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUuZGV0YWlsLnBseXI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAoYVtvXSA9IHQpLCBUKG4pICYmIG4oKTtcXHJcXG4gICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICBiKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucXVlcnlTZWxlY3RvcihcXFwiaWZyYW1lXFxcIikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ0cnVlXFxcIiA9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucXVlcnlTZWxlY3RvcihcXFwiaWZyYW1lXFxcIikuZGF0YXNldC5yZWFkeVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnJlc2l6ZShlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgay5vbihcXFwiZW50ZXJmdWxsc2NyZWVuXFxcIiwgUiksXFxyXFxuICAgICAgICAgICAgICAgICAgICBrLm9uKFxcXCJleGl0ZnVsbHNjcmVlblxcXCIsIFIpO1xcclxcbiAgICAgICAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIFIoZSkge1xcclxcbiAgICAgICAgdmFyIHQgPSB1KGUudGFyZ2V0LCBcXFwiLmdzbGlkZS1tZWRpYVxcXCIpO1xcclxcbiAgICAgICAgXFxcImVudGVyZnVsbHNjcmVlblxcXCIgPT0gZS50eXBlICYmIGgodCwgXFxcImZ1bGxzY3JlZW5cXFwiKSxcXHJcXG4gICAgICAgICAgICBcXFwiZXhpdGZ1bGxzY3JlZW5cXFwiID09IGUudHlwZSAmJiBkKHQsIFxcXCJmdWxsc2NyZWVuXFxcIik7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gRyhlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICB2YXIgcyxcXHJcXG4gICAgICAgICAgICBsID0gdGhpcyxcXHJcXG4gICAgICAgICAgICBvID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLW1lZGlhXFxcIiksXFxyXFxuICAgICAgICAgICAgciA9ICEoIU8odCwgXFxcImhyZWZcXFwiKSB8fCAhdC5ocmVmKSAmJiB0LmhyZWYuc3BsaXQoXFxcIiNcXFwiKS5wb3AoKS50cmltKCksXFxyXFxuICAgICAgICAgICAgZCA9ICEoIU8odCwgXFxcImNvbnRlbnRcXFwiKSB8fCAhdC5jb250ZW50KSAmJiB0LmNvbnRlbnQ7XFxyXFxuICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgZCAmJlxcclxcbiAgICAgICAgICAgIChDKGQpICYmXFxyXFxuICAgICAgICAgICAgICAgIChzID0gbSgnPGRpdiBjbGFzcz1cXFwiZ2lubGluZWQtY29udGVudFxcXCI+Jy5jb25jYXQoZCwgXFxcIjwvZGl2PlxcXCIpKSksXFxyXFxuICAgICAgICAgICAgayhkKSlcXHJcXG4gICAgICAgICkge1xcclxcbiAgICAgICAgICAgIFxcXCJub25lXFxcIiA9PSBkLnN0eWxlLmRpc3BsYXkgJiYgKGQuc3R5bGUuZGlzcGxheSA9IFxcXCJibG9ja1xcXCIpO1xcclxcbiAgICAgICAgICAgIHZhciBjID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwiZGl2XFxcIik7XFxyXFxuICAgICAgICAgICAgKGMuY2xhc3NOYW1lID0gXFxcImdpbmxpbmVkLWNvbnRlbnRcXFwiKSwgYy5hcHBlbmRDaGlsZChkKSwgKHMgPSBjKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIGlmIChyKSB7XFxyXFxuICAgICAgICAgICAgdmFyIHUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChyKTtcXHJcXG4gICAgICAgICAgICBpZiAoIXUpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICB2YXIgZyA9IHUuY2xvbmVOb2RlKCEwKTtcXHJcXG4gICAgICAgICAgICAoZy5zdHlsZS5oZWlnaHQgPSB0LmhlaWdodCksXFxyXFxuICAgICAgICAgICAgICAgIChnLnN0eWxlLm1heFdpZHRoID0gdC53aWR0aCksXFxyXFxuICAgICAgICAgICAgICAgIGgoZywgXFxcImdpbmxpbmVkLWNvbnRlbnRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgKHMgPSBnKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIGlmICghcylcXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxcXCJVbmFibGUgdG8gYXBwZW5kIGlubGluZSBzbGlkZSBjb250ZW50XFxcIiwgdCksICExXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgIChvLnN0eWxlLmhlaWdodCA9IHQuaGVpZ2h0KSxcXHJcXG4gICAgICAgICAgICAoby5zdHlsZS53aWR0aCA9IHQud2lkdGgpLFxcclxcbiAgICAgICAgICAgIG8uYXBwZW5kQ2hpbGQocyksXFxyXFxuICAgICAgICAgICAgKHRoaXMuZXZlbnRzW1xcXCJpbmxpbmVjbG9zZVxcXCIgKyByXSA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IG8ucXVlcnlTZWxlY3RvckFsbChcXFwiLmd0cmlnZ2VyLWNsb3NlXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSwgbC5jbG9zZSgpO1xcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIH0pKSxcXHJcXG4gICAgICAgICAgICBUKG4pICYmIG4oKTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBaKGUsIHQsIGksIG4pIHtcXHJcXG4gICAgICAgIHZhciBzID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLW1lZGlhXFxcIiksXFxyXFxuICAgICAgICAgICAgbCA9IChmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICB2YXIgdCA9IGUudXJsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgaSA9IGUuYWxsb3csXFxyXFxuICAgICAgICAgICAgICAgICAgICBuID0gZS5jYWxsYmFjayxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHMgPSBlLmFwcGVuZFRvLFxcclxcbiAgICAgICAgICAgICAgICAgICAgbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcImlmcmFtZVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgKGwuY2xhc3NOYW1lID0gXFxcInZpbWVvLXZpZGVvIGd2aWRlb1xcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKGwuc3JjID0gdCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAobC5zdHlsZS53aWR0aCA9IFxcXCIxMDAlXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAobC5zdHlsZS5oZWlnaHQgPSBcXFwiMTAwJVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgaSAmJiBsLnNldEF0dHJpYnV0ZShcXFwiYWxsb3dcXFwiLCBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChsLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBoKGwsIFxcXCJub2RlLXJlYWR5XFxcIiksIFQobikgJiYgbigpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICBzICYmIHMuYXBwZW5kQ2hpbGQobCksXFxyXFxuICAgICAgICAgICAgICAgICAgICBsXFxyXFxuICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgfSkoeyB1cmw6IHQuaHJlZiwgY2FsbGJhY2s6IG4gfSk7XFxyXFxuICAgICAgICAocy5wYXJlbnROb2RlLnN0eWxlLm1heFdpZHRoID0gdC53aWR0aCksXFxyXFxuICAgICAgICAgICAgKHMucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQgPSB0LmhlaWdodCksXFxyXFxuICAgICAgICAgICAgcy5hcHBlbmRDaGlsZChsKTtcXHJcXG4gICAgfVxcclxcbiAgICB2YXIgJCA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDoge307XFxyXFxuICAgICAgICAgICAgICAgIHQodGhpcywgZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5kZWZhdWx0cyA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBocmVmOiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplczogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgc3Jjc2V0OiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzY1Bvc2l0aW9uOiBcXFwiYm90dG9tXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICExLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHpvb21hYmxlOiAhMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBkcmFnZ2FibGU6ICEwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICBMKGkpICYmICh0aGlzLmRlZmF1bHRzID0gbCh0aGlzLmRlZmF1bHRzLCBpKSk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgIG4oZSwgW1xcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNvdXJjZVR5cGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgIT09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IGUudG9Mb3dlckNhc2UoKSkubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL1xcXFwuKGpwZWd8anBnfGpwZXxnaWZ8cG5nfGFwbnx3ZWJwfGF2aWZ8c3ZnKS9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJpbWFnZVxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyh5b3V0dWJlXFxcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcXFwuY29tKVxcXFwvd2F0Y2hcXFxcP3Y9KFthLXpBLVowLTlcXFxcLV9dKykvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1hdGNoKC95b3V0dVxcXFwuYmVcXFxcLyhbYS16QS1aMC05XFxcXC1fXSspLykgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyh5b3V0dWJlXFxcXC5jb218eW91dHViZS1ub2Nvb2tpZVxcXFwuY29tKVxcXFwvZW1iZWRcXFxcLyhbYS16QS1aMC05XFxcXC1fXSspL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInZpZGVvXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubWF0Y2goL3ZpbWVvXFxcXC5jb21cXFxcLyhbMC05XSopLykpIHJldHVybiBcXFwidmlkZW9cXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5tYXRjaCgvXFxcXC4obXA0fG9nZ3x3ZWJtfG1vdikvKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidmlkZW9cXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5tYXRjaCgvXFxcXC4obXAzfHdhdnx3bWF8YWFjfG9nZykvKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiYXVkaW9cXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluZGV4T2YoXFxcIiNcXFwiKSA+IC0xICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiXFxcIiAhPT0gdC5zcGxpdChcXFwiI1xcXCIpLnBvcCgpLnRyaW0oKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImlubGluZVxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmluZGV4T2YoXFxcImdvYWpheD10cnVlXFxcIikgPiAtMVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwiYWpheFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcImV4dGVybmFsXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJwYXJzZUNvbmZpZ1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsgZGVzY1Bvc2l0aW9uOiB0LmRlc2NQb3NpdGlvbiB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmYXVsdHNcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChMKGUpICYmICFrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPKGUsIFxcXCJ0eXBlXFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoTyhlLCBcXFwiY29udGVudFxcXCIpICYmIGUuY29udGVudFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChlLnR5cGUgPSBcXFwiaW5saW5lXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBPKGUsIFxcXCJocmVmXFxcIikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS50eXBlID0gdGhpcy5zb3VyY2VUeXBlKGUuaHJlZikpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gbChuLCBlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFNpemUocywgdCksIHM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSBlLmdldEF0dHJpYnV0ZShcXFwiZGF0YS1nbGlnaHRib3hcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcXFwiYVxcXCIgPT09IGggJiYgKHIgPSBlLmhyZWYpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImltZ1xcXCIgPT09IGggJiYgKChyID0gZS5zcmMpLCAobi5hbHQgPSBlLmFsdCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4uaHJlZiA9IHIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuLCBmdW5jdGlvbiAocywgbCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8odCwgbCkgJiYgXFxcIndpZHRoXFxcIiAhPT0gbCAmJiAobltsXSA9IHRbbF0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5kYXRhc2V0W2xdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkobykgfHwgKG5bbF0gPSBpLnNhbml0aXplVmFsdWUobykpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmNvbnRlbnQgJiYgKG4udHlwZSA9IFxcXCJpbmxpbmVcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFuLnR5cGUgJiYgciAmJiAobi50eXBlID0gdGhpcy5zb3VyY2VUeXBlKHIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkoYSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuLnRpdGxlICYmIFxcXCJhXFxcIiA9PSBoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGQgPSBlLnRpdGxlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkoZCkgfHwgXFxcIlxcXCIgPT09IGQgfHwgKG4udGl0bGUgPSBkKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi50aXRsZSAmJiBcXFwiaW1nXFxcIiA9PSBoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBlLmFsdDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKGMpIHx8IFxcXCJcXFwiID09PSBjIHx8IChuLnRpdGxlID0gYyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdSA9IFtdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuLCBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUucHVzaChcXFwiO1xcXFxcXFxccz9cXFwiICsgdCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodSA9IHUuam9pbihcXFwiXFxcXFxcXFxzPzp8XFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJcXFwiICE9PSBhLnRyaW0oKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG4sIGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IG5ldyBSZWdFeHAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzP1xcXCIgK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCArXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicz86cz8oLio/KShcXFwiICtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInM/OnwkKVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBzLm1hdGNoKGwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gJiYgby5sZW5ndGggJiYgb1sxXSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gb1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudHJpbSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC87XFxcXHMqJC8sIFxcXCJcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuW3RdID0gaS5zYW5pdGl6ZVZhbHVlKHIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmRlc2NyaXB0aW9uICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLlxcXCIgPT09IG4uZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGc7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmRlc2NyaXB0aW9uXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5pbm5lckhUTUw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikpIHRocm93IGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnICYmIChuLmRlc2NyaXB0aW9uID0gZyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFuLmRlc2NyaXB0aW9uKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdsaWdodGJveC1kZXNjXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ICYmIChuLmRlc2NyaXB0aW9uID0gdi5pbm5lckhUTUwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFNpemUobiwgdCwgZSksICh0aGlzLnNsaWRlQ29uZmlnID0gbiksIG5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzZXRTaXplXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAyICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMl1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMl1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInZpZGVvXFxcIiA9PSBlLnR5cGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLmNoZWNrU2l6ZSh0LnZpZGVvc1dpZHRoKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuY2hlY2tTaXplKHQud2lkdGgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuY2hlY2tTaXplKHQuaGVpZ2h0KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLndpZHRoID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPKGUsIFxcXCJ3aWR0aFxcXCIpICYmIFxcXCJcXFwiICE9PSBlLndpZHRoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5jaGVja1NpemUoZS53aWR0aClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmhlaWdodCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyhlLCBcXFwiaGVpZ2h0XFxcIikgJiYgXFxcIlxcXCIgIT09IGUuaGVpZ2h0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5jaGVja1NpemUoZS5oZWlnaHQpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImltYWdlXFxcIiA9PSBlLnR5cGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUuX2hhc0N1c3RvbVdpZHRoID0gISFpLmRhdGFzZXQud2lkdGgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLl9oYXNDdXN0b21IZWlnaHQgPSAhIWkuZGF0YXNldC5oZWlnaHQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJjaGVja1NpemVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTShlKSA/IFxcXCJcXFwiLmNvbmNhdChlLCBcXFwicHhcXFwiKSA6IGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2FuaXRpemVWYWx1ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwidHJ1ZVxcXCIgIT09IGUgJiYgXFxcImZhbHNlXFxcIiAhPT0gZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJ0cnVlXFxcIiA9PT0gZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgfSkoKSxcXHJcXG4gICAgICAgIFUgPSAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGUoaSwgbiwgcykge1xcclxcbiAgICAgICAgICAgICAgICB0KHRoaXMsIGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudCA9IGkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5zdGFuY2UgPSBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmluZGV4ID0gcyk7XFxyXFxuICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgIG4oZSwgW1xcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNldENvbnRlbnRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1sxXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGModCwgXFxcImxvYWRlZFxcXCIpKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gdGhpcy5pbnN0YW5jZS5zZXR0aW5ncyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLnNsaWRlQ29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHcoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVChuLmJlZm9yZVNsaWRlTG9hZCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uYmVmb3JlU2xpZGVMb2FkKHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6ICExLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gcy50eXBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHMuZGVzY1Bvc2l0aW9uLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYSA9IHQucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZCA9IHQucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS10aXRsZVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IHQucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1kZXNjXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gdC5xdWVyeVNlbGVjdG9yKFxcXCIuZ2Rlc2MtaW5uZXJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZiA9IFxcXCJnU2xpZGVUaXRsZV9cXFwiICsgdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAgPSBcXFwiZ1NsaWRlRGVzY19cXFwiICsgdGhpcy5pbmRleDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFQobi5hZnRlclNsaWRlTG9hZCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodiA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVChpKSAmJiBpKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmFmdGVyU2xpZGVMb2FkKHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZS5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IGUuaW5zdGFuY2UuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJcXFwiID09IHMudGl0bGUgJiYgXFxcIlxcXCIgPT0gcy5kZXNjcmlwdGlvblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wYXJlbnROb2RlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZCAmJiBcXFwiXFxcIiAhPT0gcy50aXRsZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChkLmlkID0gZiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZC5pbm5lckhUTUwgPSBzLnRpdGxlKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgJiYgXFxcIlxcXCIgIT09IHMuZGVzY3JpcHRpb25cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodS5pZCA9IHApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCAmJiBuLm1vcmVMZW5ndGggPiAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHMuc21hbGxEZXNjcmlwdGlvbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZVNob3J0RGVzYyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kZXNjcmlwdGlvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5tb3JlTGVuZ3RoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLm1vcmVUZXh0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodS5pbm5lckhUTUwgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuc21hbGxEZXNjcmlwdGlvbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uRXZlbnRzKHUsIHMpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHUuaW5uZXJIVE1MID0gcy5kZXNjcmlwdGlvbikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB1LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKGEucGFyZW50Tm9kZSwgXFxcImRlc2MtXFxcIi5jb25jYXQocikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnBhcmVudE5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImRlc2NyaXB0aW9uLVxcXCIuY29uY2F0KHIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoYSwgXFxcImdzbGlkZS1cXFwiLmNvbmNhdChvKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHQsIFxcXCJsb2FkZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ2aWRlb1xcXCIgIT09IG8pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcXCJleHRlcm5hbFxcXCIgIT09IG8pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJpbmxpbmVcXFwiID09PSBvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKEcuYXBwbHkodGhpcy5pbnN0YW5jZSwgW1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLmRyYWdnYWJsZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVih7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnRWw6IHQucXVlcnlTZWxlY3RvcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzbGlkZS1pbmxpbmVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9sZXJhbmNlWDogbi5kcmFnVG9sZXJhbmNlWCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvbGVyYW5jZVk6IG4uZHJhZ1RvbGVyYW5jZVksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiB0aGlzLmluc3RhbmNlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdm9pZCAoXFxcImltYWdlXFxcIiAhPT0gb1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFQodikgJiYgdigpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogaihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucXVlcnlTZWxlY3RvcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImltZ1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kcmFnZ2FibGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgVih7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYWdFbDogaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9sZXJhbmNlWDpcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uZHJhZ1RvbGVyYW5jZVgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvbGVyYW5jZVk6XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmRyYWdUb2xlcmFuY2VZLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2U6XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmluc3RhbmNlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuem9vbWFibGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5uYXR1cmFsV2lkdGggPlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5vZmZzZXRXaWR0aCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiem9vbWFibGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBIKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbnN0YW5jZS5yZXNpemUoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCh2KSAmJiB2KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFouYXBwbHkodGhpcywgW3QsIHMsIHRoaXMuaW5kZXgsIHZdKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGLmFwcGx5KHRoaXMuaW5zdGFuY2UsIFt0LCBzLCB0aGlzLmluZGV4LCB2XSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2xpZGVTaG9ydERlc2NcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDUwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDIgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1syXSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1syXSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXCJkaXZcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5pbm5lckhUTUwgPSBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG4uaW5uZXJUZXh0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZSA9IHMudHJpbSgpKS5sZW5ndGggPD0gdCkgcmV0dXJuIGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZS5zdWJzdHIoMCwgdCAtIDEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKG4gPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyArXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLi4uIDxhIGhyZWY9XFxcIiNcXFwiIGNsYXNzPVxcXCJkZXNjLW1vcmVcXFwiPicgK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSArXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiPC9hPlxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG87XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZGVzY3JpcHRpb25FdmVudHNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZGVzYy1tb3JlXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbikgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhKFxcXCJjbGlja1xcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWxlbWVudDogbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKGUsIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5ib2R5LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdShuLCBcXFwiLmdzbGlkZS1kZXNjXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFsKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwuaW5uZXJIVE1MID0gdC5kZXNjcmlwdGlvbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgocywgXFxcImdkZXNjLW9wZW5cXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IFtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KGwsIFxcXCIuZ3NsaWRlLWRlc2NyaXB0aW9uXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKGUsIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJhXFxcIiAhPT1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQocywgXFxcImdkZXNjLW9wZW5cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHMsIFxcXCJnZGVzYy1jbG9zZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobC5pbm5lckhUTUwgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnNtYWxsRGVzY3JpcHRpb24pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZGVzY3JpcHRpb25FdmVudHMobCwgdCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQocywgXFxcImdkZXNjLWNsb3NlZFxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDQwMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgby5kZXN0cm95KCkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiY3JlYXRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbSh0aGlzLmluc3RhbmNlLnNldHRpbmdzLnNsaWRlSFRNTCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0Q29uZmlnXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKHRoaXMuZWxlbWVudCkgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5oYXNPd25Qcm9wZXJ0eShcXFwiZHJhZ2dhYmxlXFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnQuZHJhZ2dhYmxlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldHRpbmdzLmRyYWdnYWJsZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3ICQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldHRpbmdzLnNsaWRlRXh0cmFBdHRyaWJ1dGVzXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zbGlkZUNvbmZpZyA9IGUucGFyc2VDb25maWcoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0dGluZ3NcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZUNvbmZpZ1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICAgICAgZVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICB9KSgpLFxcclxcbiAgICAgICAgSiA9IHcoKSxcXHJcXG4gICAgICAgIEsgPVxcclxcbiAgICAgICAgICAgIG51bGwgIT09IHcoKSB8fFxcclxcbiAgICAgICAgICAgIHZvaWQgMCAhPT0gZG9jdW1lbnQuY3JlYXRlVG91Y2ggfHxcXHJcXG4gICAgICAgICAgICBcXFwib250b3VjaHN0YXJ0XFxcIiBpbiB3aW5kb3cgfHxcXHJcXG4gICAgICAgICAgICBcXFwib25tc2dlc3R1cmVjaGFuZ2VcXFwiIGluIHdpbmRvdyB8fFxcclxcbiAgICAgICAgICAgIG5hdmlnYXRvci5tc01heFRvdWNoUG9pbnRzLFxcclxcbiAgICAgICAgUSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJodG1sXFxcIilbMF0sXFxyXFxuICAgICAgICBlZSA9IHtcXHJcXG4gICAgICAgICAgICBzZWxlY3RvcjogXFxcIi5nbGlnaHRib3hcXFwiLFxcclxcbiAgICAgICAgICAgIGVsZW1lbnRzOiBudWxsLFxcclxcbiAgICAgICAgICAgIHNraW46IFxcXCJjbGVhblxcXCIsXFxyXFxuICAgICAgICAgICAgdGhlbWU6IFxcXCJjbGVhblxcXCIsXFxyXFxuICAgICAgICAgICAgY2xvc2VCdXR0b246ICEwLFxcclxcbiAgICAgICAgICAgIHN0YXJ0QXQ6IG51bGwsXFxyXFxuICAgICAgICAgICAgYXV0b3BsYXlWaWRlb3M6ICEwLFxcclxcbiAgICAgICAgICAgIGF1dG9mb2N1c1ZpZGVvczogITAsXFxyXFxuICAgICAgICAgICAgZGVzY1Bvc2l0aW9uOiBcXFwiYm90dG9tXFxcIixcXHJcXG4gICAgICAgICAgICB3aWR0aDogXFxcIjkwMHB4XFxcIixcXHJcXG4gICAgICAgICAgICBoZWlnaHQ6IFxcXCI1MDZweFxcXCIsXFxyXFxuICAgICAgICAgICAgdmlkZW9zV2lkdGg6IFxcXCI5NjBweFxcXCIsXFxyXFxuICAgICAgICAgICAgYmVmb3JlU2xpZGVDaGFuZ2U6IG51bGwsXFxyXFxuICAgICAgICAgICAgYWZ0ZXJTbGlkZUNoYW5nZTogbnVsbCxcXHJcXG4gICAgICAgICAgICBiZWZvcmVTbGlkZUxvYWQ6IG51bGwsXFxyXFxuICAgICAgICAgICAgYWZ0ZXJTbGlkZUxvYWQ6IG51bGwsXFxyXFxuICAgICAgICAgICAgc2xpZGVJbnNlcnRlZDogbnVsbCxcXHJcXG4gICAgICAgICAgICBzbGlkZVJlbW92ZWQ6IG51bGwsXFxyXFxuICAgICAgICAgICAgc2xpZGVFeHRyYUF0dHJpYnV0ZXM6IG51bGwsXFxyXFxuICAgICAgICAgICAgb25PcGVuOiBudWxsLFxcclxcbiAgICAgICAgICAgIG9uQ2xvc2U6IG51bGwsXFxyXFxuICAgICAgICAgICAgbG9vcDogITEsXFxyXFxuICAgICAgICAgICAgem9vbWFibGU6ICEwLFxcclxcbiAgICAgICAgICAgIGRyYWdnYWJsZTogITAsXFxyXFxuICAgICAgICAgICAgZHJhZ0F1dG9TbmFwOiAhMSxcXHJcXG4gICAgICAgICAgICBkcmFnVG9sZXJhbmNlWDogNDAsXFxyXFxuICAgICAgICAgICAgZHJhZ1RvbGVyYW5jZVk6IDY1LFxcclxcbiAgICAgICAgICAgIHByZWxvYWQ6ICEwLFxcclxcbiAgICAgICAgICAgIG9uZVNsaWRlUGVyT3BlbjogITEsXFxyXFxuICAgICAgICAgICAgdG91Y2hOYXZpZ2F0aW9uOiAhMCxcXHJcXG4gICAgICAgICAgICB0b3VjaEZvbGxvd0F4aXM6ICEwLFxcclxcbiAgICAgICAgICAgIGtleWJvYXJkTmF2aWdhdGlvbjogITAsXFxyXFxuICAgICAgICAgICAgY2xvc2VPbk91dHNpZGVDbGljazogITAsXFxyXFxuICAgICAgICAgICAgcGx1Z2luczogITEsXFxyXFxuICAgICAgICAgICAgcGx5cjoge1xcclxcbiAgICAgICAgICAgICAgICBjc3M6IFxcXCJodHRwczovL2Nkbi5wbHlyLmlvLzMuNi44L3BseXIuY3NzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAganM6IFxcXCJodHRwczovL2Nkbi5wbHlyLmlvLzMuNi44L3BseXIuanNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICBjb25maWc6IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHJhdGlvOiBcXFwiMTY6OVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICBmdWxsc2NyZWVuOiB7IGVuYWJsZWQ6ICEwLCBpb3NOYXRpdmU6ICEwIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB5b3V0dWJlOiB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgbm9Db29raWU6ICEwLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbDogMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93aW5mbzogMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpdl9sb2FkX3BvbGljeTogMyxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB2aW1lbzoge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ5bGluZTogITEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcG9ydHJhaXQ6ICExLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAhMSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc3BhcmVudDogITEsXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgb3BlbkVmZmVjdDogXFxcInpvb21cXFwiLFxcclxcbiAgICAgICAgICAgIGNsb3NlRWZmZWN0OiBcXFwiem9vbVxcXCIsXFxyXFxuICAgICAgICAgICAgc2xpZGVFZmZlY3Q6IFxcXCJzbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgbW9yZVRleHQ6IFxcXCJTZWUgbW9yZVxcXCIsXFxyXFxuICAgICAgICAgICAgbW9yZUxlbmd0aDogNjAsXFxyXFxuICAgICAgICAgICAgY3NzRWZlY3RzOiB7XFxyXFxuICAgICAgICAgICAgICAgIGZhZGU6IHsgaW46IFxcXCJmYWRlSW5cXFwiLCBvdXQ6IFxcXCJmYWRlT3V0XFxcIiB9LFxcclxcbiAgICAgICAgICAgICAgICB6b29tOiB7IGluOiBcXFwiem9vbUluXFxcIiwgb3V0OiBcXFwiem9vbU91dFxcXCIgfSxcXHJcXG4gICAgICAgICAgICAgICAgc2xpZGU6IHsgaW46IFxcXCJzbGlkZUluUmlnaHRcXFwiLCBvdXQ6IFxcXCJzbGlkZU91dExlZnRcXFwiIH0sXFxyXFxuICAgICAgICAgICAgICAgIHNsaWRlQmFjazogeyBpbjogXFxcInNsaWRlSW5MZWZ0XFxcIiwgb3V0OiBcXFwic2xpZGVPdXRSaWdodFxcXCIgfSxcXHJcXG4gICAgICAgICAgICAgICAgbm9uZTogeyBpbjogXFxcIm5vbmVcXFwiLCBvdXQ6IFxcXCJub25lXFxcIiB9LFxcclxcbiAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgc3ZnOiB7XFxyXFxuICAgICAgICAgICAgICAgIGNsb3NlOiAnPHN2ZyB2ZXJzaW9uPVxcXCIxLjFcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgeG1sbnM6eGxpbms9XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcXFwiIHg9XFxcIjBweFxcXCIgeT1cXFwiMHB4XFxcIiB2aWV3Qm94PVxcXCIwIDAgNTEyIDUxMlxcXCIgeG1sOnNwYWNlPVxcXCJwcmVzZXJ2ZVxcXCI+PGc+PGc+PHBhdGggZD1cXFwiTTUwNS45NDMsNi4wNThjLTguMDc3LTguMDc3LTIxLjE3Mi04LjA3Ny0yOS4yNDksMEw2LjA1OCw0NzYuNjkzYy04LjA3Nyw4LjA3Ny04LjA3NywyMS4xNzIsMCwyOS4yNDlDMTAuMDk2LDUwOS45ODIsMTUuMzksNTEyLDIwLjY4Myw1MTJjNS4yOTMsMCwxMC41ODYtMi4wMTksMTQuNjI1LTYuMDU5TDUwNS45NDMsMzUuMzA2QzUxNC4wMTksMjcuMjMsNTE0LjAxOSwxNC4xMzUsNTA1Ljk0Myw2LjA1OHpcXFwiLz48L2c+PC9nPjxnPjxnPjxwYXRoIGQ9XFxcIk01MDUuOTQyLDQ3Ni42OTRMMzUuMzA2LDYuMDU5Yy04LjA3Ni04LjA3Ny0yMS4xNzItOC4wNzctMjkuMjQ4LDBjLTguMDc3LDguMDc2LTguMDc3LDIxLjE3MSwwLDI5LjI0OGw0NzAuNjM2LDQ3MC42MzZjNC4wMzgsNC4wMzksOS4zMzIsNi4wNTgsMTQuNjI1LDYuMDU4YzUuMjkzLDAsMTAuNTg3LTIuMDE5LDE0LjYyNC02LjA1N0M1MTQuMDE4LDQ5Ny44NjYsNTE0LjAxOCw0ODQuNzcxLDUwNS45NDIsNDc2LjY5NHpcXFwiLz48L2c+PC9nPjwvc3ZnPicsXFxyXFxuICAgICAgICAgICAgICAgIG5leHQ6ICc8c3ZnIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeD1cXFwiMHB4XFxcIiB5PVxcXCIwcHhcXFwiIHZpZXdCb3g9XFxcIjAgMCA0NzcuMTc1IDQ3Ny4xNzVcXFwiIHhtbDpzcGFjZT1cXFwicHJlc2VydmVcXFwiPiA8Zz48cGF0aCBkPVxcXCJNMzYwLjczMSwyMjkuMDc1bC0yMjUuMS0yMjUuMWMtNS4zLTUuMy0xMy44LTUuMy0xOS4xLDBzLTUuMywxMy44LDAsMTkuMWwyMTUuNSwyMTUuNWwtMjE1LjUsMjE1LjVjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xYzIuNiwyLjYsNi4xLDQsOS41LDRjMy40LDAsNi45LTEuMyw5LjUtNGwyMjUuMS0yMjUuMUMzNjUuOTMxLDI0Mi44NzUsMzY1LjkzMSwyMzQuMjc1LDM2MC43MzEsMjI5LjA3NXpcXFwiLz48L2c+PC9zdmc+JyxcXHJcXG4gICAgICAgICAgICAgICAgcHJldjogJzxzdmcgdmVyc2lvbj1cXFwiMS4xXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHhtbG5zOnhsaW5rPVxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXFxcIiB4PVxcXCIwcHhcXFwiIHk9XFxcIjBweFxcXCIgdmlld0JveD1cXFwiMCAwIDQ3Ny4xNzUgNDc3LjE3NVxcXCIgeG1sOnNwYWNlPVxcXCJwcmVzZXJ2ZVxcXCI+PGc+PHBhdGggZD1cXFwiTTE0NS4xODgsMjM4LjU3NWwyMTUuNS0yMTUuNWM1LjMtNS4zLDUuMy0xMy44LDAtMTkuMXMtMTMuOC01LjMtMTkuMSwwbC0yMjUuMSwyMjUuMWMtNS4zLDUuMy01LjMsMTMuOCwwLDE5LjFsMjI1LjEsMjI1YzIuNiwyLjYsNi4xLDQsOS41LDRzNi45LTEuMyw5LjUtNGM1LjMtNS4zLDUuMy0xMy44LDAtMTkuMUwxNDUuMTg4LDIzOC41NzV6XFxcIi8+PC9nPjwvc3ZnPicsXFxyXFxuICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICBzbGlkZUhUTUw6XFxyXFxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVxcXCJnc2xpZGVcXFwiPlxcXFxuICAgIDxkaXYgY2xhc3M9XFxcImdzbGlkZS1pbm5lci1jb250ZW50XFxcIj5cXFxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ2lubmVyLWNvbnRhaW5lclxcXCI+XFxcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJnc2xpZGUtbWVkaWFcXFwiPlxcXFxuICAgICAgICAgICAgPC9kaXY+XFxcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJnc2xpZGUtZGVzY3JpcHRpb25cXFwiPlxcXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImdkZXNjLWlubmVyXFxcIj5cXFxcbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVxcXCJnc2xpZGUtdGl0bGVcXFwiPjwvaDQ+XFxcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImdzbGlkZS1kZXNjXFxcIj48L2Rpdj5cXFxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXFxcbiAgICAgICAgICAgIDwvZGl2PlxcXFxuICAgICAgICA8L2Rpdj5cXFxcbiAgICA8L2Rpdj5cXFxcbjwvZGl2PicsXFxyXFxuICAgICAgICAgICAgbGlnaHRib3hIVE1MOlxcclxcbiAgICAgICAgICAgICAgICAnPGRpdiBpZD1cXFwiZ2xpZ2h0Ym94LWJvZHlcXFwiIGNsYXNzPVxcXCJnbGlnaHRib3gtY29udGFpbmVyXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiIHJvbGU9XFxcImRpYWxvZ1xcXCIgYXJpYS1oaWRkZW49XFxcImZhbHNlXFxcIj5cXFxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnbG9hZGVyIHZpc2libGVcXFwiPjwvZGl2PlxcXFxuICAgIDxkaXYgY2xhc3M9XFxcImdvdmVybGF5XFxcIj48L2Rpdj5cXFxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnY29udGFpbmVyXFxcIj5cXFxcbiAgICA8ZGl2IGlkPVxcXCJnbGlnaHRib3gtc2xpZGVyXFxcIiBjbGFzcz1cXFwiZ3NsaWRlclxcXCI+PC9kaXY+XFxcXG4gICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ2Nsb3NlIGdidG5cXFwiIGFyaWEtbGFiZWw9XFxcIkNsb3NlXFxcIiBkYXRhLXRhYm9yZGVyPVxcXCIzXFxcIj57Y2xvc2VTVkd9PC9idXR0b24+XFxcXG4gICAgPGJ1dHRvbiBjbGFzcz1cXFwiZ3ByZXYgZ2J0blxcXCIgYXJpYS1sYWJlbD1cXFwiUHJldmlvdXNcXFwiIGRhdGEtdGFib3JkZXI9XFxcIjJcXFwiPntwcmV2U1ZHfTwvYnV0dG9uPlxcXFxuICAgIDxidXR0b24gY2xhc3M9XFxcImduZXh0IGdidG5cXFwiIGFyaWEtbGFiZWw9XFxcIk5leHRcXFwiIGRhdGEtdGFib3JkZXI9XFxcIjFcXFwiPntuZXh0U1ZHfTwvYnV0dG9uPlxcXFxuPC9kaXY+XFxcXG48L2Rpdj4nLFxcclxcbiAgICAgICAgfSxcXHJcXG4gICAgICAgIHRlID0gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICBmdW5jdGlvbiBlKCkge1xcclxcbiAgICAgICAgICAgICAgICB2YXIgaSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fTtcXHJcXG4gICAgICAgICAgICAgICAgdCh0aGlzLCBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmN1c3RvbU9wdGlvbnMgPSBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzID0gbChlZSwgaSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWZmZWN0c0NsYXNzZXMgPSB0aGlzLmdldEFuaW1hdGlvbkNsYXNzZXMoKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy52aWRlb1BsYXllcnMgPSB7fSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5hcGlFdmVudHMgPSBbXSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5mdWxsRWxlbWVudHNMaXN0ID0gITEpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJpbml0XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdGhpcy5nZXRTZWxlY3RvcigpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5iYXNlRXZlbnRzID0gYShcXFwiY2xpY2tcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbGVtZW50OiB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKHQsIGkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBlLm9wZW4oaSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnRzID0gdGhpcy5nZXRFbGVtZW50cygpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJvcGVuXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gdGhpcy5lbGVtZW50cy5sZW5ndGgpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aXZlU2xpZGUgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4ID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmV2QWN0aXZlU2xpZGUgPSBudWxsKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBNKHQpID8gdCA6IHRoaXMuc2V0dGluZ3Muc3RhcnRBdDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsoZSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gZS5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtZ2FsbGVyeVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5mdWxsRWxlbWVudHNMaXN0ID0gdGhpcy5lbGVtZW50cyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudHMgPSB0aGlzLmdldEdhbGxlcnlFbGVtZW50cyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKGkpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdGhpcy5nZXRFbGVtZW50SW5kZXgoZSkpIDwgMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IDApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIE0oaSkgfHwgKGkgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYnVpbGQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJub25lXFxcIiA9PSB0aGlzLnNldHRpbmdzLm9wZW5FZmZlY3RcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwibm9uZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNldHRpbmdzLmNzc0VmZWN0cy5mYWRlLmluXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmJvZHksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJXaWR0aCAtXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCA+IDApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwic3R5bGVcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvLnR5cGUgPSBcXFwidGV4dC9jc3NcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5jbGFzc05hbWUgPSBcXFwiZ2Nzcy1zdHlsZXNcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby5pbm5lclRleHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzY3JvbGxiYXItZml4ZXIge21hcmdpbi1yaWdodDogXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInB4fVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChvKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHMsIFxcXCJnc2Nyb2xsYmFyLWZpeGVyXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaChzLCBcXFwiZ2xpZ2h0Ym94LW9wZW5cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoUSwgXFxcImdsaWdodGJveC1vcGVuXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGgoZG9jdW1lbnQuYm9keSwgXFxcImdsaWdodGJveC1tb2JpbGVcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zZXR0aW5ncy5zbGlkZUVmZmVjdCA9IFxcXCJzbGlkZVxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NsaWRlKGksICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgPT0gdGhpcy5lbGVtZW50cy5sZW5ndGhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZ2xpZ2h0Ym94LWJ1dHRvbi1oaWRkZW5cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRCdXR0b24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1idXR0b24taGlkZGVuXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChkKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZ2xpZ2h0Ym94LWJ1dHRvbi1oaWRkZW5cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRCdXR0b24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1idXR0b24taGlkZGVuXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5saWdodGJveE9wZW4gPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXFxcIm9wZW5cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQodGhpcy5zZXR0aW5ncy5vbk9wZW4pICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5vbk9wZW4oKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEsgJiYgdGhpcy5zZXR0aW5ncy50b3VjaE5hdmlnYXRpb24gJiYgQih0aGlzKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mua2V5Ym9hcmROYXZpZ2F0aW9uICYmIFgodGhpcyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib3BlbkF0XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wZW4obnVsbCwgZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2hvd1NsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMV07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYodGhpcy5sb2FkZXIpLCAodGhpcy5pbmRleCA9IHBhcnNlSW50KHQpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvcihcXFwiLmN1cnJlbnRcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiBkKG4sIFxcXCJjdXJyZW50XFxcIiksIHRoaXMuc2xpZGVBbmltYXRlT3V0KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyhzLCBcXFwibG9hZGVkXFxcIikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlQW5pbWF0ZUluKHMsIGkpLCBwKHRoaXMubG9hZGVyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMubG9hZGVyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsID0gdGhpcy5lbGVtZW50c1t0XSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0ge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDb25maWc6IGwuc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IGwubm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXFxcInNsaWRlX2JlZm9yZV9sb2FkXFxcIiwgbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbC5pbnN0YW5jZS5zZXRDb250ZW50KHMsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcChlLmxvYWRlciksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlc2l6ZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zbGlkZUFuaW1hdGVJbihzLCBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudHJpZ2dlcihcXFwic2xpZGVfYWZ0ZXJfbG9hZFxcXCIsIG8pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNsaWRlRGVzY3JpcHRpb24gPSBzLnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzbGlkZS1kZXNjcmlwdGlvblxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zbGlkZURlc2NyaXB0aW9uQ29udGFpbmVkID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlRGVzY3JpcHRpb24gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlRGVzY3JpcHRpb24ucGFyZW50Tm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdzbGlkZS1tZWRpYVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucHJlbG9hZCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZWxvYWRTbGlkZSh0ICsgMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVsb2FkU2xpZGUodCAtIDEpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmF2aWdhdGlvbkNsYXNzZXMoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGl2ZVNsaWRlID0gcyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwicHJlbG9hZFNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA8IDAgfHwgZSA+IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEkodGhpcy5lbGVtZW50c1tlXSkpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzbGlkZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbZV07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKGksIFxcXCJsb2FkZWRcXFwiKSkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuZWxlbWVudHNbZV0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbi50eXBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDb25maWc6IG4uc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleDogZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBuLm5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFxcXCJzbGlkZV9iZWZvcmVfbG9hZFxcXCIsIGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInZpZGVvXFxcIiA9PSBzIHx8IFxcXCJleHRlcm5hbFxcXCIgPT0gc1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5pbnN0YW5jZS5zZXRDb250ZW50KGksIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50cmlnZ2VyKFxcXCJzbGlkZV9hZnRlcl9sb2FkXFxcIiwgbCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBuLmluc3RhbmNlLnNldENvbnRlbnQoaSwgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudHJpZ2dlcihcXFwic2xpZGVfYWZ0ZXJfbG9hZFxcXCIsIGwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwicHJldlNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdvVG9TbGlkZSh0aGlzLmluZGV4IC0gMSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwibmV4dFNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdvVG9TbGlkZSh0aGlzLmluZGV4ICsgMSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ29Ub1NsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMF0gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnByZXZBY3RpdmVTbGlkZSA9IHRoaXMuYWN0aXZlU2xpZGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXggPSB0aGlzLmluZGV4KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLmxvb3AoKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlIDwgMCB8fCBlID4gdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlIDwgMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZSA9IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZSA+PSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAmJiAoZSA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U2xpZGUoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiaW5zZXJ0U2xpZGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge30sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLTE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPCAwICYmICh0ID0gdGhpcy5lbGVtZW50cy5sZW5ndGgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG5ldyBVKGUsIHRoaXMsIHQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGkuZ2V0Q29uZmlnKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gbCh7fSwgbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gaS5jcmVhdGUoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLmluZGV4ID0gdCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5ub2RlID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMuaW5zdGFuY2UgPSBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLnNsaWRlQ29uZmlnID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnNwbGljZSh0LCAwLCBzKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGEgPSBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IG51bGw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNsaWRlc0NvbnRhaW5lcikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiByKSB0aGlzLnNsaWRlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChvKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLmluc2VydEJlZm9yZShvLCBkKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5zZXR0aW5ncy5wcmVsb2FkICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PSB0aGlzLmluZGV4ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PSB0KSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggLSAxID09IHQgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ICsgMSA9PSB0KSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlbG9hZFNsaWRlKHQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT0gdGhpcy5pbmRleCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09IHQgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5kZXggPSAxKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5hdmlnYXRpb25DbGFzc2VzKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbdF0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoID0gdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKHQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5zbGlkZU5vZGUgPSBhKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXFxcInNsaWRlX2luc2VydGVkXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogYSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogYSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ29uZmlnOiBuLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleDogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IG51bGwsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCh0aGlzLnNldHRpbmdzLnNsaWRlSW5zZXJ0ZWQpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zbGlkZUluc2VydGVkKHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiBhLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwicmVtb3ZlU2xpZGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC0xO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSA8IDAgfHwgZSA+IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNDb250YWluZXIgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW2VdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5nZXRBY3RpdmVTbGlkZUluZGV4KCkgPT0gZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlID09IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMucHJldlNsaWRlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLm5leHRTbGlkZSgpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzLnNwbGljZShlLCAxKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcXFwic2xpZGVfcmVtb3ZlZFxcXCIsIGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCh0aGlzLnNldHRpbmdzLnNsaWRlUmVtb3ZlZCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNsaWRlUmVtb3ZlZChlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzbGlkZUFuaW1hdGVJblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtZGVzY3JpcHRpb25cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogdGhpcy5wcmV2QWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleDogdGhpcy5wcmV2QWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDb25maWc6IEkodGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5lbGVtZW50c1tcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogSSh0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmVsZW1lbnRzW1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5ub2RlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0ge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiB0aGlzLmFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogdGhpcy5hY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNvbmZpZzpcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50c1t0aGlzLmluZGV4XS5zbGlkZUNvbmZpZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHNbdGhpcy5pbmRleF0ubm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobi5vZmZzZXRXaWR0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHAocyksIChzLnN0eWxlLmRpc3BsYXkgPSBcXFwiXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZChlLCB0aGlzLmVmZmVjdHNDbGFzc2VzKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNzc0VmZWN0c1tcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5vcGVuRWZmZWN0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5pbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc2V0dGluZ3MuYXV0b3BsYXlWaWRlb3MgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc2xpZGVQbGF5ZXJQbGF5KGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS50cmlnZ2VyKFxcXCJzbGlkZV9jaGFuZ2VkXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXY6IGwsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDogbyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVChpLnNldHRpbmdzLmFmdGVyU2xpZGVDaGFuZ2UpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zZXR0aW5ncy5hZnRlclNsaWRlQ2hhbmdlLmFwcGx5KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbCwgb11cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSB0aGlzLnNldHRpbmdzLnNsaWRlRWZmZWN0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibm9uZVxcXCIgIT09IHJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHNbcl0uaW5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXggPiB0aGlzLmluZGV4ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInNsaWRlXFxcIiA9PSB0aGlzLnNldHRpbmdzLnNsaWRlRWZmZWN0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSB0aGlzLnNldHRpbmdzLmNzc0VmZWN0cy5zbGlkZUJhY2suaW4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoZSwgYSwgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNldHRpbmdzLmF1dG9wbGF5VmlkZW9zICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNsaWRlUGxheWVyUGxheShlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkudHJpZ2dlcihcXFwic2xpZGVfY2hhbmdlZFxcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IG8sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQoaS5zZXR0aW5ncy5hZnRlclNsaWRlQ2hhbmdlKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc2V0dGluZ3MuYWZ0ZXJTbGlkZUNoYW5nZS5hcHBseShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2wsIG9dXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucmVzaXplKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChlLCBcXFwiY3VycmVudFxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNsaWRlQW5pbWF0ZU91dFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnByZXZBY3RpdmVTbGlkZSkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMucHJldkFjdGl2ZVNsaWRlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKGUsIHRoaXMuZWZmZWN0c0NsYXNzZXMpLCBoKGUsIFxcXCJwcmV2XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcy5zZXR0aW5ncy5zbGlkZUVmZmVjdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJub25lXFxcIiAhPT0gdFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3MuY3NzRWZlY3RzW3RdLm91dFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVQbGF5ZXJQYXVzZShlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcXFwic2xpZGVfYmVmb3JlX2NoYW5nZVxcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdGhpcy5wcmV2QWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogdGhpcy5wcmV2QWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ29uZmlnOiBJKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG51bGxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5lbGVtZW50c1tcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5zbGlkZUNvbmZpZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogSSh0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZWxlbWVudHNbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0ubm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdGhpcy5hY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVOb2RlOiB0aGlzLmFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNvbmZpZzpcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbdGhpcy5pbmRleF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IHRoaXMuZWxlbWVudHNbdGhpcy5pbmRleF0ubm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVCh0aGlzLnNldHRpbmdzLmJlZm9yZVNsaWRlQ2hhbmdlKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYmVmb3JlU2xpZGVDaGFuZ2UuYXBwbHkoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpc1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucHJldkFjdGl2ZVNsaWRlSW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHRoaXMuYWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4ID4gdGhpcy5pbmRleCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzbGlkZVxcXCIgPT0gdGhpcy5zZXR0aW5ncy5zbGlkZUVmZmVjdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMuc2xpZGVCYWNrLm91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKGUsIGksIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5naW5uZXItY29udGFpbmVyXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5xdWVyeVNlbGVjdG9yKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGUtZGVzY3JpcHRpb25cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuc3R5bGUudHJhbnNmb3JtID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5zdHlsZS50cmFuc2Zvcm0gPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoaSwgXFxcImdyZXNldFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5zdHlsZS5vcGFjaXR5ID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIChuLnN0eWxlLm9wYWNpdHkgPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoZSwgXFxcInByZXZcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEFsbFBsYXllcnNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZGVvUGxheWVycztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJnZXRTbGlkZVBsYXllckluc3RhbmNlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBcXFwiZ3ZpZGVvXFxcIiArIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gdGhpcy5nZXRBbGxQbGF5ZXJzKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhKCFPKGksIHQpIHx8ICFpW3RdKSAmJiBpW3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInN0b3BTbGlkZVZpZGVvXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsoZSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ZpZGVvLXdyYXBwZXJcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKGUgPSB0LmdldEF0dHJpYnV0ZShcXFwiZGF0YS1pbmRleFxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzdG9wU2xpZGVWaWRlbyBpcyBkZXByZWNhdGVkLCB1c2Ugc2xpZGVQbGF5ZXJQYXVzZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgaS5wbGF5aW5nICYmIGkucGF1c2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzbGlkZVBsYXllclBhdXNlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsoZSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ZpZGVvLXdyYXBwZXJcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKGUgPSB0LmdldEF0dHJpYnV0ZShcXFwiZGF0YS1pbmRleFxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiBpLnBsYXlpbmcgJiYgaS5wYXVzZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInBsYXlTbGlkZVZpZGVvXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGsoZSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ZpZGVvLXdyYXBwZXJcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgJiYgKGUgPSB0LmdldEF0dHJpYnV0ZShcXFwiZGF0YS1pbmRleFxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJwbGF5U2xpZGVWaWRlbyBpcyBkZXByZWNhdGVkLCB1c2Ugc2xpZGVQbGF5ZXJQbGF5XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiAhaS5wbGF5aW5nICYmIGkucGxheSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNsaWRlUGxheWVyUGxheVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmd2aWRlby13cmFwcGVyXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChlID0gdC5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtaW5kZXhcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFpLnBsYXlpbmcgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLnBsYXkoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYXV0b2ZvY3VzVmlkZW9zICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5lbGVtZW50cy5jb250YWluZXIuZm9jdXMoKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2V0RWxlbWVudHNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZWxlbWVudHMgPSAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBbXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5sZW5ndGggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8oZSwgZnVuY3Rpb24gKGUsIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IG5ldyBVKGUsIHQsIG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gcy5nZXRDb25maWcoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGwoe30sIG8pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLnNsaWRlQ29uZmlnID0gbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluc3RhbmNlID0gcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluZGV4ID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkucHVzaChyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudHMgPSBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlnaHRib3hPcGVuICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnNsaWRlc0NvbnRhaW5lci5pbm5lckhUTUwgPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5sZW5ndGggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8odGhpcy5lbGVtZW50cywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBtKHQuc2V0dGluZ3Muc2xpZGVIVE1MKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2xpZGVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U2xpZGUoMCwgITApKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0RWxlbWVudEluZGV4XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8odGhpcy5lbGVtZW50cywgZnVuY3Rpb24gKGksIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTyhpLCBcXFwibm9kZVxcXCIpICYmIGkubm9kZSA9PSBlKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHQgPSBuKSwgITA7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJnZXRFbGVtZW50c1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IFtdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50cyA9IHRoaXMuZWxlbWVudHNcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5lbGVtZW50c1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBbXSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhSSh0aGlzLnNldHRpbmdzLmVsZW1lbnRzKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEUodGhpcy5zZXR0aW5ncy5lbGVtZW50cykgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmVsZW1lbnRzLmxlbmd0aCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8odGhpcy5zZXR0aW5ncy5lbGVtZW50cywgZnVuY3Rpb24gKGksIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgVShpLCBlLCBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBzLmdldENvbmZpZygpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGwoe30sIG8pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5ub2RlID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIuaW5kZXggPSBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluc3RhbmNlID0gcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5zbGlkZUNvbmZpZyA9IG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKHIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZWxlY3RvcigpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFNlbGVjdG9yKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChvKGksIGZ1bmN0aW9uIChpLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgVShpLCBlLCBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHMuZ2V0Q29uZmlnKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBsKHt9LCBvKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5ub2RlID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluZGV4ID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluc3RhbmNlID0gcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLnNsaWRlQ29uZmlnID0gbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmdhbGxlcnkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5nZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImRhdGEtZ2FsbGVyeVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnB1c2gocik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0R2FsbGVyeUVsZW1lbnRzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZmlsdGVyKGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nYWxsZXJ5ID09IHQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldFNlbGVjdG9yXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2V0dGluZ3MuZWxlbWVudHMgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLnNlbGVjdG9yICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZGF0YS1cXFwiID09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zZWxlY3Rvci5zdWJzdHJpbmcoMCwgNSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IFxcXCIqW1xcXCIuY29uY2F0KHRoaXMuc2V0dGluZ3Muc2VsZWN0b3IsIFxcXCJdXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuc2V0dGluZ3Muc2VsZWN0b3IpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0QWN0aXZlU2xpZGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNsaWRlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbdGhpcy5pbmRleF07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0QWN0aXZlU2xpZGVJbmRleFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXg7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0QW5pbWF0aW9uQ2xhc3Nlc1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBbXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiB0aGlzLnNldHRpbmdzLmNzc0VmZWN0cylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNzc0VmZWN0cy5oYXNPd25Qcm9wZXJ0eSh0KSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHNbdF07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKFxcXCJnXFxcIi5jb25jYXQoaS5pbikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goXFxcImdcXFwiLmNvbmNhdChpLm91dCkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5qb2luKFxcXCIgXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiYnVpbGRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYnVpbHQpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5ib2R5LmNoaWxkTm9kZXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gW107XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8odCwgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucGFyZW50Tm9kZSA9PSBkb2N1bWVudC5ib2R5ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIiNcXFwiICE9PSBlLm5vZGVOYW1lLmNoYXJBdCgwKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaGFzQXR0cmlidXRlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWUuaGFzQXR0cmlidXRlKFxcXCJhcmlhLWhpZGRlblxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkucHVzaChlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnNldEF0dHJpYnV0ZShcXFwiYXJpYS1oaWRkZW5cXFwiLCBcXFwidHJ1ZVxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID0gTyh0aGlzLnNldHRpbmdzLnN2ZywgXFxcIm5leHRcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zZXR0aW5ncy5zdmcubmV4dFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gTyh0aGlzLnNldHRpbmdzLnN2ZywgXFxcInByZXZcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zZXR0aW5ncy5zdmcucHJldlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gTyh0aGlzLnNldHRpbmdzLnN2ZywgXFxcImNsb3NlXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3Muc3ZnLmNsb3NlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0aGlzLnNldHRpbmdzLmxpZ2h0Ym94SFRNTDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSBtKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSAociA9IChyID0gci5yZXBsYWNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC97bmV4dFNWR30vZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKS5yZXBsYWNlKC97cHJldlNWR30vZywgcykpLnJlcGxhY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgL3tjbG9zZVNWR30vZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQocik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxcImdsaWdodGJveC1ib2R5XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kYWwgPSBkO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IGQucXVlcnlTZWxlY3RvcihcXFwiLmdjbG9zZVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmV2QnV0dG9uID0gZC5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ByZXZcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5uZXh0QnV0dG9uID0gZC5xdWVyeVNlbGVjdG9yKFxcXCIuZ25leHRcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5vdmVybGF5ID0gZC5xdWVyeVNlbGVjdG9yKFxcXCIuZ292ZXJsYXlcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5sb2FkZXIgPSBkLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nbG9hZGVyXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2xpZGVzQ29udGFpbmVyID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1zbGlkZXJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ib2R5SGlkZGVuQ2hpbGRFbG1zID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMgPSB7fSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW9kYWwsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1cXFwiICsgdGhpcy5zZXR0aW5ncy5za2luXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jbG9zZUJ1dHRvbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMuY2xvc2UgPSBhKFxcXCJjbGlja1xcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbGVtZW50OiBnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uICh0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCksIGUuY2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXRoaXMuc2V0dGluZ3MuY2xvc2VCdXR0b24gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5leHRCdXR0b24gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMubmV4dCA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IHRoaXMubmV4dEJ1dHRvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBlLm5leHRTbGlkZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkJ1dHRvbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmV2ZW50cy5wcmV2ID0gYShcXFwiY2xpY2tcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWxlbWVudDogdGhpcy5wcmV2QnV0dG9uLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uICh0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnByZXZlbnREZWZhdWx0KCksIGUucHJldlNsaWRlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jbG9zZU9uT3V0c2lkZUNsaWNrICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRzLm91dENsb3NlID0gYShcXFwiY2xpY2tcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWxlbWVudDogZCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50T3V0c2lkZUNsaWNrIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1tb2JpbGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudGFyZ2V0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdpbm5lci1jb250YWluZXJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUodC50YXJnZXQsIFxcXCIuZ2J0blxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyh0LnRhcmdldCwgXFxcImduZXh0XFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKHQudGFyZ2V0LCBcXFwiZ3ByZXZcXFwiKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHRoaXMuZWxlbWVudHMsIGZ1bmN0aW9uICh0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zbGlkZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaW5zdGFuY2UuY3JlYXRlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5zbGlkZU5vZGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzbGlkZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClbaV0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLICYmIGgoZG9jdW1lbnQuYm9keSwgXFxcImdsaWdodGJveC10b3VjaFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRzLnJlc2l6ZSA9IGEoXFxcInJlc2l6ZVxcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IHdpbmRvdyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNpemUoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYnVpbHQgPSAhMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwicmVzaXplXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IGUgfHwgdGhpcy5hY3RpdmVTbGlkZSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFjKGUsIFxcXCJ6b29tZWRcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0geSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5ndmlkZW8td3JhcHBlclxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtaW1hZ2VcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zbGlkZURlc2NyaXB0aW9uLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB0LndpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0LmhlaWdodDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobCA8PSA3NjhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBoKGRvY3VtZW50LmJvZHksIFxcXCJnbGlnaHRib3gtbW9iaWxlXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkKGRvY3VtZW50LmJvZHksIFxcXCJnbGlnaHRib3gtbW9iaWxlXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSB8fCBuKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYyhzLCBcXFwiZGVzY3JpcHRpb24tYm90dG9tXFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjKHMsIFxcXCJkZXNjcmlwdGlvbi10b3BcXFwiKSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFjKHMsIFxcXCJnYWJzb2x1dGVcXFwiKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobCA8PSA3NjgpIG4ucXVlcnlTZWxlY3RvcihcXFwiaW1nXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHIpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gcy5vZmZzZXRIZWlnaHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdSA9IG4ucXVlcnlTZWxlY3RvcihcXFwiaW1nXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtYXgtaGVpZ2h0OiBjYWxjKDEwMHZoIC0gXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJweClcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInN0eWxlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1heC13aWR0aDogXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1Lm9mZnNldFdpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInB4O1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IE8oXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnBseXIuY29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInJhdGlvXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3MucGx5ci5jb25maWcucmF0aW9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIlxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBpLmNsaWVudFdpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBpLmNsaWVudEhlaWdodCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gdiAvIGY7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gXFxcIlxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHYgLyBwLCBcXFwiOlxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChmIC8gcCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG0gPSBnLnNwbGl0KFxcXCI6XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gdGhpcy5zZXR0aW5ncy52aWRlb3NXaWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPSB0aGlzLnNldHRpbmdzLnZpZGVvc1dpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUyA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGIgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNKHgpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0xICE9PSB4LmluZGV4T2YoXFxcInB4XFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcGFyc2VJbnQoeClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLTEgIT09IHguaW5kZXhPZihcXFwidndcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobCAqIHBhcnNlSW50KHgpKSAvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAtMSAhPT0geC5pbmRleE9mKFxcXCJ2aFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChvICogcGFyc2VJbnQoeCkpIC9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMTAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC0xICE9PSB4LmluZGV4T2YoXFxcIiVcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobCAqIHBhcnNlSW50KHgpKSAvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBwYXJzZUludChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuY2xpZW50V2lkdGhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkgL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwYXJzZUludChtWzBdKSAvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KG1bMV0pKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChTID0gTWF0aC5mbG9vcihTKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmIChvIC09IHMub2Zmc2V0SGVpZ2h0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIgPiBsIHx8IFMgPiBvIHx8IChvIDwgUyAmJiBsID4gYikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHcgPSBpLm9mZnNldFdpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQgPSBpLm9mZnNldEhlaWdodCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDID0gbyAvIFQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHcgKiBDLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFQgKiBDLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnBhcmVudE5vZGUuc2V0QXR0cmlidXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzdHlsZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1heC13aWR0aDogXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsud2lkdGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJweFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1heC13aWR0aDogXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgay53aWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicHg7XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2VcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLnBhcmVudE5vZGUuc3R5bGUubWF4V2lkdGggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJcXFwiLmNvbmNhdCh4KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzdHlsZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibWF4LXdpZHRoOiBcXFwiLmNvbmNhdChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCI7XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInJlbG9hZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwidXBkYXRlTmF2aWdhdGlvbkNsYXNzZXNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcy5sb29wKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQodGhpcy5uZXh0QnV0dG9uLCBcXFwiZGlzYWJsZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQodGhpcy5wcmV2QnV0dG9uLCBcXFwiZGlzYWJsZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT0gdGhpcy5pbmRleCAmJiB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDEgPT0gMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGgodGhpcy5wcmV2QnV0dG9uLCBcXFwiZGlzYWJsZWRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgodGhpcy5uZXh0QnV0dG9uLCBcXFwiZGlzYWJsZWRcXFwiKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDAgIT09IHRoaXMuaW5kZXggfHwgZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5pbmRleCAhPT0gdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHRoaXMubmV4dEJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGgodGhpcy5wcmV2QnV0dG9uLCBcXFwiZGlzYWJsZWRcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJsb29wXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IE8odGhpcy5zZXR0aW5ncywgXFxcImxvb3BBdEVuZFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3MubG9vcEF0RW5kXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IE8odGhpcy5zZXR0aW5ncywgXFxcImxvb3BcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5zZXR0aW5ncy5sb29wXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJjbG9zZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGlnaHRib3hPcGVuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ldmVudHMpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIHRoaXMuZXZlbnRzKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cy5oYXNPd25Qcm9wZXJ0eSh0KSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHNbdF0uZGVzdHJveSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzID0gbnVsbDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jbG9zaW5nKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmNsb3NpbmcgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlUGxheWVyUGF1c2UodGhpcy5hY3RpdmVTbGlkZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZ1bGxFbGVtZW50c0xpc3QgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50cyA9IHRoaXMuZnVsbEVsZW1lbnRzTGlzdCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvZHlIaWRkZW5DaGlsZEVsbXMubGVuZ3RoICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyh0aGlzLmJvZHlIaWRkZW5DaGlsZEVsbXMsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVtb3ZlQXR0cmlidXRlKFxcXCJhcmlhLWhpZGRlblxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCh0aGlzLm1vZGFsLCBcXFwiZ2xpZ2h0Ym94LWNsb3NpbmdcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJub25lXFxcIiA9PSB0aGlzLnNldHRpbmdzLm9wZW5FZmZlY3RcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwibm9uZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNldHRpbmdzLmNzc0VmZWN0cy5mYWRlLm91dFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNzc0VmZWN0c1tcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jbG9zZUVmZmVjdFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0ub3V0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChlLmFjdGl2ZVNsaWRlID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5wcmV2QWN0aXZlU2xpZGVJbmRleCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUucHJldkFjdGl2ZVNsaWRlID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5idWlsdCA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZXZlbnRzKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgaW4gZS5ldmVudHMpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5ldmVudHMuaGFzT3duUHJvcGVydHkodCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5ldmVudHNbdF0uZGVzdHJveSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5ldmVudHMgPSBudWxsO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gZG9jdW1lbnQuYm9keTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZChRLCBcXFwiZ2xpZ2h0Ym94LW9wZW5cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZ2xpZ2h0Ym94LW9wZW4gdG91Y2hpbmcgZ2Rlc2Mtb3BlbiBnbGlnaHRib3gtdG91Y2ggZ2xpZ2h0Ym94LW1vYmlsZSBnc2Nyb2xsYmFyLWZpeGVyXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubW9kYWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1vZGFsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50cmlnZ2VyKFxcXCJjbG9zZVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVChlLnNldHRpbmdzLm9uQ2xvc2UpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXR0aW5ncy5vbkNsb3NlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nY3NzLXN0eWxlc1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUubGlnaHRib3hPcGVuID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuY2xvc2luZyA9IG51bGwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZGVzdHJveVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckFsbEV2ZW50cygpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlRXZlbnRzICYmIHRoaXMuYmFzZUV2ZW50cy5kZXN0cm95KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib25cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1syXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlIHx8ICFUKHQpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiRXZlbnQgbmFtZSBhbmQgY2FsbGJhY2sgbXVzdCBiZSBkZWZpbmVkXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcGlFdmVudHMucHVzaCh7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldnQ6IGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmNlOiBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm9uY2VcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uKGUsIHQsICEwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJ0cmlnZ2VyXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGwsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gW107XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8odGhpcy5hcGlFdmVudHMsIGZ1bmN0aW9uICh0LCBzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHQuZXZ0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSB0Lm9uY2UsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHQuY2FsbGJhY2s7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID09IGUgJiYgKHIoaSksIG8gJiYgbi5wdXNoKHMpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmxlbmd0aCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obiwgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQuYXBpRXZlbnRzLnNwbGljZShlLCAxKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJjbGVhckFsbEV2ZW50c1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcGlFdmVudHMuc3BsaWNlKDAsIHRoaXMuYXBpRXZlbnRzLmxlbmd0aCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwidmVyc2lvblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCIzLjEuMVxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIF0pLFxcclxcbiAgICAgICAgICAgICAgICBlXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgIH0pKCk7XFxyXFxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcXHJcXG4gICAgICAgICAgICB0ID0gbmV3IHRlKGUpO1xcclxcbiAgICAgICAgcmV0dXJuIHQuaW5pdCgpLCB0O1xcclxcbiAgICB9O1xcclxcbn0pO1xcclxcblxcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL2d1bHBzdGFydGVyLy4vc3JjL2pzL2dsaWdodGJveC5qcz9cIik7XG4gICAgICAvKioqL1xuICAgIH0sXG5cbiAgICAvKioqL1xuICAgIFwiLi9zcmMvanMvbGF6eWxvYWQuanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAgICAgISoqKiAuL3NyYy9qcy9sYXp5bG9hZC5qcyAqKiohXG4gICAgICBcXCoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzTGF6eWxvYWRKcygpIHtcbiAgICAgIGV2YWwoXCJjb25zdCBpbWdzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXFwiLmxhenktaW1nXFxcIik7XFxyXFxuY29uc3QgbGF6aWVySW1ncyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5sYXppZXItaW1nXFxcIik7XFxyXFxuXFxyXFxuY29uc3QgbG9hZEltZyA9IChlbnRyaWVzLCBvYnMpID0+IHtcXHJcXG4gICAgY29uc3QgW2VudHJ5XSA9IGVudHJpZXM7XFxyXFxuXFxyXFxuICAgIGlmICghZW50cnkuaXNJbnRlcnNlY3RpbmcpIHJldHVybjtcXHJcXG5cXHJcXG4gICAgLy8gcmVwbGFjZSBzcmMgd2l0aCBkYXRhLXNyY1xcclxcbiAgICBlbnRyeS50YXJnZXQuc3JjID0gZW50cnkudGFyZ2V0LmRhdGFzZXQuc3JjO1xcclxcbiAgICBlbnRyeS50YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcXFwibG9hZFxcXCIsICgpID0+IHtcXHJcXG4gICAgICAgIGVudHJ5LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFxcXCJsYXp5LWltZ1xcXCIpO1xcclxcbiAgICAgICAgZW50cnkudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXFxcImxhemllci1pbWdcXFwiKTtcXHJcXG4gICAgfSk7XFxyXFxuICAgIG9icy51bm9ic2VydmUoZW50cnkudGFyZ2V0KTtcXHJcXG59O1xcclxcblxcclxcbmNvbnN0IGltZ09ic2VydmVyID0gbmV3IEludGVyc2VjdGlvbk9ic2VydmVyKGxvYWRJbWcsIHtcXHJcXG4gICAgcm9vdDogbnVsbCxcXHJcXG4gICAgdGhyZXNob2xkOiAwLjEsXFxyXFxuICAgIHJvb3RNYXJnaW46IFxcXCI1MDBweFxcXCIsXFxyXFxufSk7XFxyXFxuXFxyXFxuY29uc3QgbGF6aWVyT2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIobG9hZEltZywge1xcclxcbiAgICByb290OiBudWxsLFxcclxcbiAgICB0aHJlc2hvbGQ6IDAuMSxcXHJcXG4gICAgcm9vdE1hcmdpbjogXFxcIjUwMHB4XFxcIixcXHJcXG59KTtcXHJcXG5cXHJcXG5pbWdzLmZvckVhY2goKGltZykgPT4gaW1nT2JzZXJ2ZXIub2JzZXJ2ZShpbWcpKTtcXHJcXG5sYXppZXJJbWdzLmZvckVhY2goKGltZykgPT4gbGF6aWVyT2JzZXJ2ZXIub2JzZXJ2ZShpbWcpKTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9sYXp5bG9hZC5qcz9cIik7XG4gICAgICAvKioqL1xuICAgIH0sXG5cbiAgICAvKioqL1xuICAgIFwiLi9zcmMvanMvbWFpbi5qc1wiOlxuICAgIC8qISoqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgICAgICEqKiogLi9zcmMvanMvbWFpbi5qcyAqKiohXG4gICAgICBcXCoqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKiovXG4gICAgZnVuY3Rpb24gc3JjSnNNYWluSnMoX191bnVzZWRfd2VicGFja19tb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcbiAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICBldmFsKFwiX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfbGF6eWxvYWRfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vbGF6eWxvYWQuanMgKi8gXFxcIi4vc3JjL2pzL2xhenlsb2FkLmpzXFxcIik7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9sYXp5bG9hZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9sYXp5bG9hZF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dsaWdodGJveF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9nbGlnaHRib3guanMgKi8gXFxcIi4vc3JjL2pzL2dsaWdodGJveC5qc1xcXCIpO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2xpZ2h0Ym94X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX2dsaWdodGJveF9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2FjY29yZGlvbl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygvKiEgLi9hY2NvcmRpb24uanMgKi8gXFxcIi4vc3JjL2pzL2FjY29yZGlvbi5qc1xcXCIpO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWNjb3JkaW9uX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX19fZGVmYXVsdCA9IC8qI19fUFVSRV9fKi9fX3dlYnBhY2tfcmVxdWlyZV9fLm4oX2FjY29yZGlvbl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvdW50ZXJfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vY291bnRlci5qcyAqLyBcXFwiLi9zcmMvanMvY291bnRlci5qc1xcXCIpO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY291bnRlcl9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfM19fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9jb3VudGVyX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18pO1xcblxcclxcblxcclxcblxcclxcblxcclxcbi8vIGltcG9ydCBcXFwiLi90ZXN0aW1vbmlhbHMuanNcXFwiO1xcclxcblxcclxcbmNvbnN0IHRvZ2dsZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIubWFpbi1uYXYtLXRvZ2dsZXJcXFwiKTtcXHJcXG5jb25zdCBsaW5rc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5tYWluLW5hdl9fbGlua3MtY29udGFpbmVyXFxcIik7XFxyXFxuY29uc3QgaGFtYnVyZ2VyTGluZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcXCIubWFpbi1uYXYtLXRvZ2dsZXItbGluZVxcXCIpO1xcclxcbmNvbnN0IGdhbGxlcnlJdGVtc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgIFxcXCIuc2VjdGlvbi1nYWxsZXJ5X19jb250ZW50XFxcIlxcclxcbik7XFxyXFxuY29uc3QgYWxsTmF2TGlua3MgPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXFwiLm1haW4tbmF2X19saW5rcy0tbGlua1xcXCIpXTtcXHJcXG5jb25zdCBoZXJvQ3RhQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLmhlcm9fX2N0YVxcXCIpO1xcclxcbmNvbnN0IGl6cmFkYUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5zZWN0aW9uLWFib3V0X19pbmZvLS1idG5cXFwiKTtcXHJcXG5jb25zdCBoZXJvU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIiNuYXNsb3ZuaWNhXFxcIik7XFxyXFxuY29uc3Qgb25hbWFTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiI29uYW1hXFxcIik7XFxyXFxuY29uc3QgaXpyYWRhU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIiNpenJhZGFcXFwiKTtcXHJcXG5jb25zdCBwcm9penZvZGlTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiI3Byb2l6dm9kaVxcXCIpO1xcclxcbmNvbnN0IGtvbnRha3RTZWN0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiI2tvbnRha3RcXFwiKTtcXHJcXG5cXHJcXG5jb25zdCBhbGxTZWN0aW9ucyA9IFtcXHJcXG4gICAgaGVyb1NlY3Rpb24sXFxyXFxuICAgIG9uYW1hU2VjdGlvbixcXHJcXG4gICAgaXpyYWRhU2VjdGlvbixcXHJcXG4gICAgcHJvaXp2b2RpU2VjdGlvbixcXHJcXG4gICAga29udGFrdFNlY3Rpb24sXFxyXFxuXTtcXHJcXG5jb25zdCBtYWtlWml6aUhhcHB5ID0gKGVudHJpZXMsIG9icykgPT4ge1xcclxcbiAgICBjb25zdCBbZW50cnldID0gZW50cmllcztcXHJcXG4gICAgY29uc3QgY3VycmVudElkID0gYCMke2VudHJ5LnRhcmdldC5pZH1gO1xcclxcblxcclxcbiAgICBpZiAoZW50cnkuaXNJbnRlcnNlY3RpbmcpIHtcXHJcXG4gICAgICAgIGFsbE5hdkxpbmtzLmZvckVhY2goKGxpbmspID0+IGxpbmsuY2xhc3NMaXN0LnJlbW92ZShcXFwiYWN0aXZlXFxcIikpO1xcclxcbiAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgIGFsbE5hdkxpbmtzLnNvbWUoKGxpbmspID0+IGxpbmsuZ2V0QXR0cmlidXRlKFxcXCJocmVmXFxcIikgPT09IGN1cnJlbnRJZClcXHJcXG4gICAgICAgICkge1xcclxcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gYWxsTmF2TGlua3MuZmluZEluZGV4KFxcclxcbiAgICAgICAgICAgICAgICAobGluaykgPT4gbGluay5nZXRBdHRyaWJ1dGUoXFxcImhyZWZcXFwiKSA9PT0gY3VycmVudElkXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICBhbGxOYXZMaW5rc1tpbmRleF0uY2xhc3NMaXN0LmFkZChcXFwiYWN0aXZlXFxcIik7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG59O1xcclxcbmNvbnN0IHNlY3Rpb25PYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihtYWtlWml6aUhhcHB5LCB7XFxyXFxuICAgIHJvb3Q6IG51bGwsXFxyXFxuICAgIHRocmVzaG9sZDogMC4xNSxcXHJcXG59KTtcXHJcXG5hbGxTZWN0aW9ucy5mb3JFYWNoKChzZWN0KSA9PiB7XFxyXFxuICAgIHNlY3Rpb25PYnNlcnZlci5vYnNlcnZlKHNlY3QpO1xcclxcbn0pO1xcclxcblxcclxcbmFsbE5hdkxpbmtzLnNvbWUoXFxyXFxuICAgIChsaW5rKSA9PlxcclxcbiAgICAgICAgbGluay5jbGFzc0xpc3QuY29udGFpbnMoXFxcImFjdGl2ZVxcXCIpICYmIGxpbmsuY2xhc3NMaXN0LnJlbW92ZShcXFwiYWN0aXZlXFxcIilcXHJcXG4pO1xcclxcblxcclxcbmNvbnN0IGxpZ2h0Ym94ID0gR0xpZ2h0Ym94KHtcXHJcXG4gICAgdG91Y2hOYXZpZ2F0aW9uOiB0cnVlLFxcclxcbiAgICBzZWxlY3RvcjogXFxcIi5nbGlnaHRib3gzXFxcIixcXHJcXG59KTtcXHJcXG5cXHJcXG5oZXJvQ3RhQnRuLmFkZEV2ZW50TGlzdGVuZXIoXFxcImNsaWNrXFxcIiwgKGUpID0+IHtcXHJcXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIjb25hbWFcXFwiKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcXFwic21vb3RoXFxcIiB9KTtcXHJcXG59KTtcXHJcXG5cXHJcXG5penJhZGFCdG4uYWRkRXZlbnRMaXN0ZW5lcihcXFwiY2xpY2tcXFwiLCAoZSkgPT4ge1xcclxcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIiNpenJhZGFcXFwiKS5zY3JvbGxJbnRvVmlldyh7IGJlaGF2aW9yOiBcXFwic21vb3RoXFxcIiB9KTtcXHJcXG59KTtcXHJcXG5cXHJcXG50b2dnbGVyQnRuLmFkZEV2ZW50TGlzdGVuZXIoXFxcImNsaWNrXFxcIiwgKGUpID0+IHtcXHJcXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICBoYW1idXJnZXJMaW5lcy5mb3JFYWNoKChlbCkgPT4gZWwuY2xhc3NMaXN0LnRvZ2dsZShcXFwiYWN0aXZlXFxcIikpO1xcclxcbiAgICBsaW5rc0NvbnRhaW5lci5jbGFzc0xpc3QudG9nZ2xlKFxcXCJhY3RpdmVcXFwiKTtcXHJcXG59KTtcXHJcXG5cXHJcXG5saW5rc0NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFxcXCJjbGlja1xcXCIsIChlKSA9PiB7XFxyXFxuICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgY29uc3QgaWQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXFxcImhyZWZcXFwiKTtcXHJcXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpZCkuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogXFxcInNtb290aFxcXCIgfSk7XFxyXFxufSk7XFxyXFxuXFxyXFxubGlua3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcXFwiY2xpY2tcXFwiLCAoZSkgPT4ge1xcclxcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgIGlmIChbLi4uaGFtYnVyZ2VyTGluZXNdLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoXFxcImFjdGl2ZVxcXCIpKSkge1xcclxcbiAgICAgICAgaGFtYnVyZ2VyTGluZXMuZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoXFxcImFjdGl2ZVxcXCIpKTtcXHJcXG4gICAgICAgIGxpbmtzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXFxcImFjdGl2ZVxcXCIpO1xcclxcbiAgICB9XFxyXFxufSk7XFxyXFxuXFxyXFxuZ2FsbGVyeUl0ZW1zQ29udGFpbmVyLmZvckVhY2goKGNvbnRhaW5lcikgPT4ge1xcclxcbiAgICBjb25zdCBpbWFnZXNDb3VudHMgPSBbLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5nbGlnaHRib3gzXFxcIildO1xcclxcbiAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXFxcIi5zZWN0aW9uLWdhbGxlcnktLWl0ZW0tY291bnRcXFwiKTtcXHJcXG5cXHJcXG4gICAgY29uc3QgREVGQVVMVF9JTUdfQ09VTlQgPSAyO1xcclxcbiAgICBpZiAoc3Bhbikge1xcclxcbiAgICAgICAgY29uc3QgY291bnQgPSBpbWFnZXNDb3VudHMubGVuZ3RoIC0gREVGQVVMVF9JTUdfQ09VTlQ7XFxyXFxuICAgICAgICBpZiAoY291bnQgPiAwKSB7XFxyXFxuICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9IGArJHtjb3VudH1gO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxufSk7XFxyXFxuXFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vZ3VscHN0YXJ0ZXIvLi9zcmMvanMvbWFpbi5qcz9cIik7XG4gICAgICAvKioqL1xuICAgIH1cbiAgICAvKioqKioqL1xuXG4gIH07XG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqKioqKi9cbiAgLy8gVGhlIG1vZHVsZSBjYWNoZVxuXG4gIC8qKioqKiovXG5cbiAgdmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG4gIC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5cbiAgLyoqKioqKi9cblxuICBmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4gICAgLyoqKioqKi9cbiAgICAvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblxuICAgIC8qKioqKiovXG4gICAgdmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG4gICAgLyoqKioqKi9cblxuICAgIGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLyoqKioqKi9cbiAgICAgIHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcbiAgICAgIC8qKioqKiovXG4gICAgfVxuICAgIC8qKioqKiovXG4gICAgLy8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblxuICAgIC8qKioqKiovXG5cblxuICAgIHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuICAgICAgLyoqKioqKi9cbiAgICAgIC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblxuICAgICAgLyoqKioqKi9cbiAgICAgIC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cbiAgICAgIC8qKioqKiovXG4gICAgICBleHBvcnRzOiB7fVxuICAgICAgLyoqKioqKi9cblxuICAgIH07XG4gICAgLyoqKioqKi9cblxuICAgIC8qKioqKiovXG4gICAgLy8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cbiAgICAvKioqKioqL1xuXG4gICAgX193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4gICAgLyoqKioqKi9cblxuICAgIC8qKioqKiovXG4gICAgLy8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblxuICAgIC8qKioqKiovXG5cblxuICAgIHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiAgICAvKioqKioqL1xuICB9XG4gIC8qKioqKiovXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKioqKioqL1xuXG4gIC8qIHdlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0ICovXG5cbiAgLyoqKioqKi9cblxuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqKioqKi9cbiAgICAvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuXG4gICAgLyoqKioqKi9cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbiAobW9kdWxlKSB7XG4gICAgICAvKioqKioqL1xuICAgICAgdmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gICAgICAvKioqKioqL1xuICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107XG4gICAgICB9IDpcbiAgICAgIC8qKioqKiovXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGU7XG4gICAgICB9O1xuICAgICAgLyoqKioqKi9cblxuICAgICAgX193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwge1xuICAgICAgICBhOiBnZXR0ZXJcbiAgICAgIH0pO1xuICAgICAgLyoqKioqKi9cblxuXG4gICAgICByZXR1cm4gZ2V0dGVyO1xuICAgICAgLyoqKioqKi9cbiAgICB9O1xuICAgIC8qKioqKiovXG5cbiAgfSkoKTtcbiAgLyoqKioqKi9cblxuICAvKioqKioqL1xuXG4gIC8qIHdlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyAqL1xuXG4gIC8qKioqKiovXG5cblxuICAoZnVuY3Rpb24gKCkge1xuICAgIC8qKioqKiovXG4gICAgLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuXG4gICAgLyoqKioqKi9cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbiAoZXhwb3J0cywgZGVmaW5pdGlvbikge1xuICAgICAgLyoqKioqKi9cbiAgICAgIGZvciAodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG4gICAgICAgIC8qKioqKiovXG4gICAgICAgIGlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcbiAgICAgICAgICAvKioqKioqL1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGRlZmluaXRpb25ba2V5XVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgIH1cbiAgICAgICAgLyoqKioqKi9cblxuICAgICAgfVxuICAgICAgLyoqKioqKi9cblxuICAgIH07XG4gICAgLyoqKioqKi9cblxuICB9KSgpO1xuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG5cbiAgLyogd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCAqL1xuXG4gIC8qKioqKiovXG5cblxuICAoZnVuY3Rpb24gKCkge1xuICAgIC8qKioqKiovXG4gICAgX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24gKG9iaiwgcHJvcCkge1xuICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApO1xuICAgIH07XG4gICAgLyoqKioqKi9cblxuICB9KSgpO1xuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG5cbiAgLyogd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCAqL1xuXG4gIC8qKioqKiovXG5cblxuICAoZnVuY3Rpb24gKCkge1xuICAgIC8qKioqKiovXG4gICAgLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuXG4gICAgLyoqKioqKi9cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbiAoZXhwb3J0cykge1xuICAgICAgLyoqKioqKi9cbiAgICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywge1xuICAgICAgICAgIHZhbHVlOiAnTW9kdWxlJ1xuICAgICAgICB9KTtcbiAgICAgICAgLyoqKioqKi9cbiAgICAgIH1cbiAgICAgIC8qKioqKiovXG5cblxuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgICAvKioqKioqL1xuICAgIH07XG4gICAgLyoqKioqKi9cblxuICB9KSgpO1xuICAvKioqKioqL1xuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgLyoqKioqKi9cblxuICAvKioqKioqL1xuICAvLyBzdGFydHVwXG5cbiAgLyoqKioqKi9cbiAgLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG5cbiAgLyoqKioqKi9cbiAgLy8gVGhpcyBlbnRyeSBtb2R1bGUgY2FuJ3QgYmUgaW5saW5lZCBiZWNhdXNlIHRoZSBldmFsIGRldnRvb2wgaXMgdXNlZC5cblxuICAvKioqKioqL1xuXG5cbiAgdmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvanMvbWFpbi5qc1wiKTtcbiAgLyoqKioqKi9cblxuICAvKioqKioqL1xuXG59KSgpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlc19fIiwiLi9zcmMvanMvYWNjb3JkaW9uLmpzIiwic3JjSnNBY2NvcmRpb25KcyIsImV2YWwiLCIuL3NyYy9qcy9jb3VudGVyLmpzIiwic3JjSnNDb3VudGVySnMiLCIuL3NyYy9qcy9nbGlnaHRib3guanMiLCJzcmNKc0dsaWdodGJveEpzIiwibW9kdWxlIiwiLi9zcmMvanMvbGF6eWxvYWQuanMiLCJzcmNKc0xhenlsb2FkSnMiLCIuL3NyYy9qcy9tYWluLmpzIiwic3JjSnNNYWluSnMiLCJfX3VudXNlZF93ZWJwYWNrX21vZHVsZSIsIl9fd2VicGFja19leHBvcnRzX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwiY2FsbCIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQVlBLENBQUEsV0FJRSxJQUFJQSxvQkFBc0IsQ0FFeEJDLHdCQU1BLFNBQVNDLG1CQUNQQyxLQUFLLDJ3Q0FBdXlDLENBRTl5QyxFQUdBQyxzQkFNQSxTQUFTQyxpQkFDUEYsS0FBSywwdkNBQW93QyxDQUUzd0MsRUFHQUcsd0JBTUEsU0FBU0MsaUJBQWlCQyxRQUN4QkwsS0FBSyxrc3pLQUE4LzFLLENBRXJnMkssRUFHQU0sdUJBTUEsU0FBU0Msa0JBQ1BQLEtBQUssby9CQUFrZ0MsQ0FFemdDLEVBR0FRLG1CQU1BLFNBQVNDLFlBQVlDLHdCQUF5QkMsb0JBQXFCQyxxQkFHakVaLEtBQUssMnVKQUErekosQ0FFdDBKLENBR0YsRUFRSWEseUJBQTJCLEdBUS9CLFNBQVNELG9CQUFvQkUsR0FLM0IsSUFBSUMsRUFBZUYseUJBQXlCQyxHQUc1QyxPQUFxQkUsS0FBQUEsSUFBakJELElBV0FWLEVBQVNRLHlCQUF5QkMsR0FBWSxDQVFoREcsUUFBUyxFQUdYLEVBUUFwQixvQkFBb0JpQixHQUFVSSxLQUFLYixFQUFPWSxRQUFTWixFQUFRQSxFQUFPWSxRQUFTTCxtQkFBbUIsR0E1QnJGRyxFQUFhRSxPQXVDeEIsQ0FpQkVMLG9CQUFvQk8sRUFBSSxTQUFVZCxHQUVoQyxJQUFJZSxFQUFTZixHQUFVQSxFQUFPZ0IsV0FFOUIsV0FDRSxPQUFPaEIsRUFBZ0IsT0FDekIsRUFFQSxXQUNFLE9BQU9BLENBQ1QsRUFTQSxPQU5BTyxvQkFBb0JVLEVBQUVGLEVBQVEsQ0FDNUJHLEVBQUdILENBQ0wsQ0FBQyxFQUlNQSxDQUVULEVBa0JBUixvQkFBb0JVLEVBQUksU0FBVUwsRUFBU08sR0FFekMsSUFBSyxJQUFJQyxLQUFPRCxFQUVWWixvQkFBb0JjLEVBQUVGLEVBQVlDLENBQUcsR0FBSyxDQUFDYixvQkFBb0JjLEVBQUVULEVBQVNRLENBQUcsR0FFL0VFLE9BQU9DLGVBQWVYLEVBQVNRLEVBQUssQ0FDbENJLFdBQVksQ0FBQSxFQUNaQyxJQUFLTixFQUFXQyxFQUNsQixDQUFDLENBUVAsRUFlQWIsb0JBQW9CYyxFQUFJLFNBQVVLLEVBQUtDLEdBQ3JDLE9BQU9MLE9BQU9NLFVBQVVDLGVBQWVoQixLQUFLYSxFQUFLQyxDQUFJLENBQ3ZELEVBa0JBcEIsb0JBQW9CdUIsRUFBSSxTQUFVbEIsR0FFVixhQUFsQixPQUFPbUIsUUFBMEJBLE9BQU9DLGFBRTFDVixPQUFPQyxlQUFlWCxFQUFTbUIsT0FBT0MsWUFBYSxDQUNqREMsTUFBTyxRQUNULENBQUMsRUFNSFgsT0FBT0MsZUFBZVgsRUFBUyxhQUFjLENBQzNDcUIsTUFBTyxDQUFBLENBQ1QsQ0FBQyxDQUVILEVBc0JGLElBQUkzQixvQkFBc0JDLG9CQUFvQixrQkFBa0IsQ0FLakUsRUFBRSJ9
