"use strict";!function(){var __webpack_modules__={"./src/js/accordion.js":function srcJsAccordionJs(){eval('const accordions = document.querySelectorAll(".accordion");\r\nconst accordionContents = document.querySelectorAll(".accordion-content");\r\n\r\naccordions.forEach((acc) =>\r\n    acc.addEventListener("click", (e) => {\r\n        handleAccordions(acc, e);\r\n    })\r\n);\r\n\r\nfunction handleAccordions(accordion, event) {\r\n    if (!event.target.classList.contains("accordion-heading--icon")) return;\r\n\r\n    event.target.textContent.trim() === "+"\r\n        ? (event.target.textContent = "-")\r\n        : (event.target.textContent = "+");\r\n\r\n    if (\r\n        accordion.firstElementChild.nextElementSibling.classList.contains(\r\n            "hidden"\r\n        )\r\n    ) {\r\n        accordion.firstElementChild.nextElementSibling.classList.remove(\r\n            "hidden"\r\n        );\r\n        accordion.firstElementChild.nextElementSibling.classList.add("show");\r\n    } else {\r\n        accordion.firstElementChild.nextElementSibling.classList.remove("show");\r\n        accordion.firstElementChild.nextElementSibling.classList.add("hidden");\r\n    }\r\n}\r\n\r\nwindow.addEventListener("DOMContentLoaded", () => {\r\n    [...accordionContents].forEach((el) => el.classList.add("hidden"));\r\n});\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/accordion.js?')},"./src/js/gallery.js":function srcJsGalleryJs(){eval('// import { slike } from "../js/kategorije/data.js";\r\n\r\n// class Gallery {\r\n//     #element = null;\r\n//     #list = [];\r\n//     #modal = null;\r\n//     #modalImg = null;\r\n//     #modalImages = [];\r\n//     #closeBtn = null;\r\n//     #nextBtn = null;\r\n//     #prevBtn = null;\r\n//     #imageName = null;\r\n\r\n//     constructor(element) {\r\n//         this.#element = element;\r\n//         // console.log(this.#element);\r\n//         this.initProps();\r\n//         this.openModal();\r\n//         this.closeModal();\r\n//     }\r\n\r\n//     setImages(element) {\r\n//         // convert nodeList to Arr\r\n//         this.#list = [...element.querySelectorAll(".gallery-img")];\r\n//     }\r\n\r\n//     setModal(element) {\r\n//         this.#modal = element.parentElement.querySelector(\r\n//             ".section-gallery__modal"\r\n//         );\r\n//     }\r\n\r\n//     setModalImg(element) {\r\n//         this.#modalImg = element.parentElement.querySelector(".main-img");\r\n//     }\r\n\r\n//     setModalImages(element) {\r\n//         this.#modalImages = [\r\n//             ...element.parentElement.querySelectorAll(".modal-img"),\r\n//         ];\r\n//     }\r\n\r\n//     setImageName(element) {\r\n//         this.#imageName = element.parentElement.querySelector(".image-name");\r\n//     }\r\n\r\n//     setCloseBtn() {\r\n//         if (this.#modal) {\r\n//             this.#closeBtn = this.#modal.querySelector(".close-btn");\r\n//         }\r\n//     }\r\n\r\n//     setNextBtn() {\r\n//         this.#nextBtn = this.#modal.querySelector(".next-btn");\r\n//     }\r\n\r\n//     setPrevBtn() {\r\n//         this.#prevBtn = this.#modal.querySelector(".prev-btn");\r\n//     }\r\n\r\n//     initProps() {\r\n//         this.setImages(this.#element);\r\n//         this.setModal(this.#element);\r\n//         this.setModalImg(this.#element);\r\n//         this.setModalImages(this.#element);\r\n//         this.setImageName(this.#element);\r\n//         this.setCloseBtn();\r\n//         this.setNextBtn();\r\n//         this.setPrevBtn();\r\n//     }\r\n\r\n//     openModal() {\r\n//         this.#element.addEventListener("click", (e) => {\r\n//             this.#modal.classList.add("open");\r\n//             this.setOpenModalImages(e.target);\r\n//         });\r\n//     }\r\n\r\n//     closeModal() {\r\n//         this.#modal.addEventListener("click", (e) => {\r\n//             if (\r\n//                 e.target.classList.value === "section-gallery__modal open" ||\r\n//                 e.target.classList.contains("fa-times")\r\n//             ) {\r\n//                 this.#modal.classList.remove("open");\r\n//             }\r\n//         });\r\n//     }\r\n\r\n//     setOpenModalImages(mainImage) {\r\n//         // mainImage is e.target from click\r\n//         const category = this.getAppropriateCategory(mainImage);\r\n//         this.renderModalHTML(mainImage, category);\r\n//     }\r\n\r\n//     getAppropriateCategory(mainImage) {\r\n//         if (!mainImage.dataset.name) {\r\n//             console.error(\r\n//                 "something went wrong with getting category for image"\r\n//             );\r\n//             return;\r\n//         }\r\n//         const categoryName = mainImage.dataset.name;\r\n//         const appropariateCategory = slike.find((x) => x.ime === categoryName);\r\n//         return appropariateCategory;\r\n//     }\r\n\r\n//     renderModalHTML(mainImage, category) {\r\n//         let mainItem = mainImage;\r\n//         let id = +mainItem.dataset.id;\r\n//         const selected = category.images.find((x) => x.id === id);\r\n//         this.#modal.innerHTML = `\r\n//         <button class="close-btn">\r\n//             <i class="fas fa-times"></i>\r\n//         </button>\r\n//         <div class="section-gallery__modal--content">\r\n//             <button class="prev-btn">\r\n//                 <i class="fas fa-chevron-left"></i>\r\n//             </button>\r\n//             <button class="next-btn">\r\n//                 <i class="fas fa-chevron-right"></i>\r\n//             </button>\r\n//             <img src="${selected.src}" alt="cat" data-name=${\r\n//             category.ime\r\n//         } data-id="${selected.id}" class="main-img">\r\n//             <p class="image-name">${selected.description}</p>\r\n//             <div class="modal-images g-1">\r\n//                 ${category.images\r\n//                     .map(\r\n//                         (el) =>\r\n//                             `<img src="${el.src}" alt="cat" data-id=${\r\n//                                 el.id\r\n//                             } data-name=${category.ime} class="modal-img ${\r\n//                                 el.id === selected.id ? "selected" : ""\r\n//                             }">`\r\n//                     )\r\n//                     .join("")}\r\n//             </div>\r\n//         </div>\r\n//         `;\r\n//     }\r\n// }\r\n\r\n// {\r\n//     /* <img src="./img/galleryphotos/cat-1.jpg" alt="cat" class="modal-img selected">\r\n//                 <img src="./img/galleryphotos/cat-2.jpg" alt="cat" class="modal-img">\r\n//                 <img src="./img/galleryphotos/cat-3.jpg" alt="cat" class="modal-img"></img> */\r\n// }\r\n\r\n// function setElement(selection) {\r\n//     const element = document.querySelector(selection);\r\n//     if (element) {\r\n//         return element;\r\n//     }\r\n//     throw new Error(\r\n//         `Please check "${selection}" selector, no such element exists`\r\n//     );\r\n// }\r\n\r\n// const kapije = new Gallery(setElement(".kapije"));\r\n// const ograde = new Gallery(setElement(".ograde"));\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/gallery.js?')},"./src/js/glightbox.js":function srcJsGlightboxJs(module){eval('!(function (e, t) {\r\n     true\r\n        ? (module.exports = t())\r\n        : 0;\r\n})(this, function () {\r\n    "use strict";\r\n    function e(t) {\r\n        return (e =\r\n            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator\r\n                ? function (e) {\r\n                      return typeof e;\r\n                  }\r\n                : function (e) {\r\n                      return e &&\r\n                          "function" == typeof Symbol &&\r\n                          e.constructor === Symbol &&\r\n                          e !== Symbol.prototype\r\n                          ? "symbol"\r\n                          : typeof e;\r\n                  })(t);\r\n    }\r\n    function t(e, t) {\r\n        if (!(e instanceof t))\r\n            throw new TypeError("Cannot call a class as a function");\r\n    }\r\n    function i(e, t) {\r\n        for (var i = 0; i < t.length; i++) {\r\n            var n = t[i];\r\n            (n.enumerable = n.enumerable || !1),\r\n                (n.configurable = !0),\r\n                "value" in n && (n.writable = !0),\r\n                Object.defineProperty(e, n.key, n);\r\n        }\r\n    }\r\n    function n(e, t, n) {\r\n        return t && i(e.prototype, t), n && i(e, n), e;\r\n    }\r\n    var s = Date.now();\r\n    function l() {\r\n        var e = {},\r\n            t = !0,\r\n            i = 0,\r\n            n = arguments.length;\r\n        "[object Boolean]" === Object.prototype.toString.call(arguments[0]) &&\r\n            ((t = arguments[0]), i++);\r\n        for (\r\n            var s = function (i) {\r\n                for (var n in i)\r\n                    Object.prototype.hasOwnProperty.call(i, n) &&\r\n                        (t &&\r\n                        "[object Object]" ===\r\n                            Object.prototype.toString.call(i[n])\r\n                            ? (e[n] = l(!0, e[n], i[n]))\r\n                            : (e[n] = i[n]));\r\n            };\r\n            i < n;\r\n            i++\r\n        ) {\r\n            var o = arguments[i];\r\n            s(o);\r\n        }\r\n        return e;\r\n    }\r\n    function o(e, t) {\r\n        if (\r\n            ((k(e) || e === window || e === document) && (e = [e]),\r\n            A(e) || L(e) || (e = [e]),\r\n            0 != P(e))\r\n        )\r\n            if (A(e) && !L(e))\r\n                for (\r\n                    var i = e.length, n = 0;\r\n                    n < i && !1 !== t.call(e[n], e[n], n, e);\r\n                    n++\r\n                );\r\n            else if (L(e))\r\n                for (var s in e)\r\n                    if (O(e, s) && !1 === t.call(e[s], e[s], s, e)) break;\r\n    }\r\n    function r(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : null,\r\n            i =\r\n                arguments.length > 2 && void 0 !== arguments[2]\r\n                    ? arguments[2]\r\n                    : null,\r\n            n = (e[s] = e[s] || []),\r\n            l = { all: n, evt: null, found: null };\r\n        return (\r\n            t &&\r\n                i &&\r\n                P(n) > 0 &&\r\n                o(n, function (e, n) {\r\n                    if (e.eventName == t && e.fn.toString() == i.toString())\r\n                        return (l.found = !0), (l.evt = n), !1;\r\n                }),\r\n            l\r\n        );\r\n    }\r\n    function a(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : {},\r\n            i = t.onElement,\r\n            n = t.withCallback,\r\n            s = t.avoidDuplicate,\r\n            l = void 0 === s || s,\r\n            a = t.once,\r\n            h = void 0 !== a && a,\r\n            d = t.useCapture,\r\n            c = void 0 !== d && d,\r\n            u = arguments.length > 2 ? arguments[2] : void 0,\r\n            g = i || [];\r\n        function v(e) {\r\n            T(n) && n.call(u, e, this), h && v.destroy();\r\n        }\r\n        return (\r\n            C(g) && (g = document.querySelectorAll(g)),\r\n            (v.destroy = function () {\r\n                o(g, function (t) {\r\n                    var i = r(t, e, v);\r\n                    i.found && i.all.splice(i.evt, 1),\r\n                        t.removeEventListener && t.removeEventListener(e, v, c);\r\n                });\r\n            }),\r\n            o(g, function (t) {\r\n                var i = r(t, e, v);\r\n                ((t.addEventListener && l && !i.found) || !l) &&\r\n                    (t.addEventListener(e, v, c),\r\n                    i.all.push({ eventName: e, fn: v }));\r\n            }),\r\n            v\r\n        );\r\n    }\r\n    function h(e, t) {\r\n        o(t.split(" "), function (t) {\r\n            return e.classList.add(t);\r\n        });\r\n    }\r\n    function d(e, t) {\r\n        o(t.split(" "), function (t) {\r\n            return e.classList.remove(t);\r\n        });\r\n    }\r\n    function c(e, t) {\r\n        return e.classList.contains(t);\r\n    }\r\n    function u(e, t) {\r\n        for (; e !== document.body; ) {\r\n            if (!(e = e.parentElement)) return !1;\r\n            if (\r\n                "function" == typeof e.matches\r\n                    ? e.matches(t)\r\n                    : e.msMatchesSelector(t)\r\n            )\r\n                return e;\r\n        }\r\n    }\r\n    function g(e) {\r\n        var t =\r\n                arguments.length > 1 && void 0 !== arguments[1]\r\n                    ? arguments[1]\r\n                    : "",\r\n            i = arguments.length > 2 && void 0 !== arguments[2] && arguments[2];\r\n        if (!e || "" === t) return !1;\r\n        if ("none" == t) return T(i) && i(), !1;\r\n        var n = x(),\r\n            s = t.split(" ");\r\n        o(s, function (t) {\r\n            h(e, "g" + t);\r\n        }),\r\n            a(n, {\r\n                onElement: e,\r\n                avoidDuplicate: !1,\r\n                once: !0,\r\n                withCallback: function (e, t) {\r\n                    o(s, function (e) {\r\n                        d(t, "g" + e);\r\n                    }),\r\n                        T(i) && i();\r\n                },\r\n            });\r\n    }\r\n    function v(e) {\r\n        var t =\r\n            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "";\r\n        if ("" == t)\r\n            return (\r\n                (e.style.webkitTransform = ""),\r\n                (e.style.MozTransform = ""),\r\n                (e.style.msTransform = ""),\r\n                (e.style.OTransform = ""),\r\n                (e.style.transform = ""),\r\n                !1\r\n            );\r\n        (e.style.webkitTransform = t),\r\n            (e.style.MozTransform = t),\r\n            (e.style.msTransform = t),\r\n            (e.style.OTransform = t),\r\n            (e.style.transform = t);\r\n    }\r\n    function f(e) {\r\n        e.style.display = "block";\r\n    }\r\n    function p(e) {\r\n        e.style.display = "none";\r\n    }\r\n    function m(e) {\r\n        var t = document.createDocumentFragment(),\r\n            i = document.createElement("div");\r\n        for (i.innerHTML = e; i.firstChild; ) t.appendChild(i.firstChild);\r\n        return t;\r\n    }\r\n    function y() {\r\n        return {\r\n            width:\r\n                window.innerWidth ||\r\n                document.documentElement.clientWidth ||\r\n                document.body.clientWidth,\r\n            height:\r\n                window.innerHeight ||\r\n                document.documentElement.clientHeight ||\r\n                document.body.clientHeight,\r\n        };\r\n    }\r\n    function x() {\r\n        var e,\r\n            t = document.createElement("fakeelement"),\r\n            i = {\r\n                animation: "animationend",\r\n                OAnimation: "oAnimationEnd",\r\n                MozAnimation: "animationend",\r\n                WebkitAnimation: "webkitAnimationEnd",\r\n            };\r\n        for (e in i) if (void 0 !== t.style[e]) return i[e];\r\n    }\r\n    function b(e, t, i, n) {\r\n        if (e()) t();\r\n        else {\r\n            var s;\r\n            i || (i = 100);\r\n            var l = setInterval(function () {\r\n                e() && (clearInterval(l), s && clearTimeout(s), t());\r\n            }, i);\r\n            n &&\r\n                (s = setTimeout(function () {\r\n                    clearInterval(l);\r\n                }, n));\r\n        }\r\n    }\r\n    function S(e, t, i) {\r\n        if (I(e)) console.error("Inject assets error");\r\n        else if ((T(t) && ((i = t), (t = !1)), C(t) && t in window))\r\n            T(i) && i();\r\n        else {\r\n            var n;\r\n            if (-1 !== e.indexOf(".css")) {\r\n                if (\r\n                    (n = document.querySelectorAll(\'link[href="\' + e + \'"]\')) &&\r\n                    n.length > 0\r\n                )\r\n                    return void (T(i) && i());\r\n                var s = document.getElementsByTagName("head")[0],\r\n                    l = s.querySelectorAll(\'link[rel="stylesheet"]\'),\r\n                    o = document.createElement("link");\r\n                return (\r\n                    (o.rel = "stylesheet"),\r\n                    (o.type = "text/css"),\r\n                    (o.href = e),\r\n                    (o.media = "all"),\r\n                    l ? s.insertBefore(o, l[0]) : s.appendChild(o),\r\n                    void (T(i) && i())\r\n                );\r\n            }\r\n            if (\r\n                (n = document.querySelectorAll(\'script[src="\' + e + \'"]\')) &&\r\n                n.length > 0\r\n            ) {\r\n                if (T(i)) {\r\n                    if (C(t))\r\n                        return (\r\n                            b(\r\n                                function () {\r\n                                    return void 0 !== window[t];\r\n                                },\r\n                                function () {\r\n                                    i();\r\n                                }\r\n                            ),\r\n                            !1\r\n                        );\r\n                    i();\r\n                }\r\n            } else {\r\n                var r = document.createElement("script");\r\n                (r.type = "text/javascript"),\r\n                    (r.src = e),\r\n                    (r.onload = function () {\r\n                        if (T(i)) {\r\n                            if (C(t))\r\n                                return (\r\n                                    b(\r\n                                        function () {\r\n                                            return void 0 !== window[t];\r\n                                        },\r\n                                        function () {\r\n                                            i();\r\n                                        }\r\n                                    ),\r\n                                    !1\r\n                                );\r\n                            i();\r\n                        }\r\n                    }),\r\n                    document.body.appendChild(r);\r\n            }\r\n        }\r\n    }\r\n    function w() {\r\n        return (\r\n            "navigator" in window &&\r\n            window.navigator.userAgent.match(\r\n                /(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i\r\n            )\r\n        );\r\n    }\r\n    function T(e) {\r\n        return "function" == typeof e;\r\n    }\r\n    function C(e) {\r\n        return "string" == typeof e;\r\n    }\r\n    function k(e) {\r\n        return !(!e || !e.nodeType || 1 != e.nodeType);\r\n    }\r\n    function E(e) {\r\n        return Array.isArray(e);\r\n    }\r\n    function A(e) {\r\n        return e && e.length && isFinite(e.length);\r\n    }\r\n    function L(t) {\r\n        return "object" === e(t) && null != t && !T(t) && !E(t);\r\n    }\r\n    function I(e) {\r\n        return null == e;\r\n    }\r\n    function O(e, t) {\r\n        return null !== e && hasOwnProperty.call(e, t);\r\n    }\r\n    function P(e) {\r\n        if (L(e)) {\r\n            if (e.keys) return e.keys().length;\r\n            var t = 0;\r\n            for (var i in e) O(e, i) && t++;\r\n            return t;\r\n        }\r\n        return e.length;\r\n    }\r\n    function M(e) {\r\n        return !isNaN(parseFloat(e)) && isFinite(e);\r\n    }\r\n    function z() {\r\n        var e =\r\n                arguments.length > 0 && void 0 !== arguments[0]\r\n                    ? arguments[0]\r\n                    : -1,\r\n            t = document.querySelectorAll(\r\n                ".gbtn[data-taborder]:not(.disabled)"\r\n            );\r\n        if (!t.length) return !1;\r\n        if (1 == t.length) return t[0];\r\n        "string" == typeof e && (e = parseInt(e));\r\n        var i = [];\r\n        o(t, function (e) {\r\n            i.push(e.getAttribute("data-taborder"));\r\n        });\r\n        var n = Math.max.apply(\r\n                Math,\r\n                i.map(function (e) {\r\n                    return parseInt(e);\r\n                })\r\n            ),\r\n            s = e < 0 ? 1 : e + 1;\r\n        s > n && (s = "1");\r\n        var l = i.filter(function (e) {\r\n                return e >= parseInt(s);\r\n            }),\r\n            r = l.sort()[0];\r\n        return document.querySelector(\'.gbtn[data-taborder="\'.concat(r, \'"]\'));\r\n    }\r\n    function X(e) {\r\n        if (e.events.hasOwnProperty("keyboard")) return !1;\r\n        e.events.keyboard = a("keydown", {\r\n            onElement: window,\r\n            withCallback: function (t, i) {\r\n                var n = (t = t || window.event).keyCode;\r\n                if (9 == n) {\r\n                    var s = document.querySelector(".gbtn.focused");\r\n                    if (!s) {\r\n                        var l =\r\n                            !(\r\n                                !document.activeElement ||\r\n                                !document.activeElement.nodeName\r\n                            ) &&\r\n                            document.activeElement.nodeName.toLocaleLowerCase();\r\n                        if ("input" == l || "textarea" == l || "button" == l)\r\n                            return;\r\n                    }\r\n                    t.preventDefault();\r\n                    var o = document.querySelectorAll(".gbtn[data-taborder]");\r\n                    if (!o || o.length <= 0) return;\r\n                    if (!s) {\r\n                        var r = z();\r\n                        return void (r && (r.focus(), h(r, "focused")));\r\n                    }\r\n                    var a = z(s.getAttribute("data-taborder"));\r\n                    d(s, "focused"), a && (a.focus(), h(a, "focused"));\r\n                }\r\n                39 == n && e.nextSlide(),\r\n                    37 == n && e.prevSlide(),\r\n                    27 == n && e.close();\r\n            },\r\n        });\r\n    }\r\n    function Y(e) {\r\n        return Math.sqrt(e.x * e.x + e.y * e.y);\r\n    }\r\n    function q(e, t) {\r\n        var i = (function (e, t) {\r\n            var i = Y(e) * Y(t);\r\n            if (0 === i) return 0;\r\n            var n =\r\n                (function (e, t) {\r\n                    return e.x * t.x + e.y * t.y;\r\n                })(e, t) / i;\r\n            return n > 1 && (n = 1), Math.acos(n);\r\n        })(e, t);\r\n        return (\r\n            (function (e, t) {\r\n                return e.x * t.y - t.x * e.y;\r\n            })(e, t) > 0 && (i *= -1),\r\n            (180 * i) / Math.PI\r\n        );\r\n    }\r\n    var N = (function () {\r\n        function e(i) {\r\n            t(this, e), (this.handlers = []), (this.el = i);\r\n        }\r\n        return (\r\n            n(e, [\r\n                {\r\n                    key: "add",\r\n                    value: function (e) {\r\n                        this.handlers.push(e);\r\n                    },\r\n                },\r\n                {\r\n                    key: "del",\r\n                    value: function (e) {\r\n                        e || (this.handlers = []);\r\n                        for (var t = this.handlers.length; t >= 0; t--)\r\n                            this.handlers[t] === e &&\r\n                                this.handlers.splice(t, 1);\r\n                    },\r\n                },\r\n                {\r\n                    key: "dispatch",\r\n                    value: function () {\r\n                        for (var e = 0, t = this.handlers.length; e < t; e++) {\r\n                            var i = this.handlers[e];\r\n                            "function" == typeof i &&\r\n                                i.apply(this.el, arguments);\r\n                        }\r\n                    },\r\n                },\r\n            ]),\r\n            e\r\n        );\r\n    })();\r\n    function D(e, t) {\r\n        var i = new N(e);\r\n        return i.add(t), i;\r\n    }\r\n    var _ = (function () {\r\n        function e(i, n) {\r\n            t(this, e),\r\n                (this.element =\r\n                    "string" == typeof i ? document.querySelector(i) : i),\r\n                (this.start = this.start.bind(this)),\r\n                (this.move = this.move.bind(this)),\r\n                (this.end = this.end.bind(this)),\r\n                (this.cancel = this.cancel.bind(this)),\r\n                this.element.addEventListener("touchstart", this.start, !1),\r\n                this.element.addEventListener("touchmove", this.move, !1),\r\n                this.element.addEventListener("touchend", this.end, !1),\r\n                this.element.addEventListener("touchcancel", this.cancel, !1),\r\n                (this.preV = { x: null, y: null }),\r\n                (this.pinchStartLen = null),\r\n                (this.zoom = 1),\r\n                (this.isDoubleTap = !1);\r\n            var s = function () {};\r\n            (this.rotate = D(this.element, n.rotate || s)),\r\n                (this.touchStart = D(this.element, n.touchStart || s)),\r\n                (this.multipointStart = D(\r\n                    this.element,\r\n                    n.multipointStart || s\r\n                )),\r\n                (this.multipointEnd = D(this.element, n.multipointEnd || s)),\r\n                (this.pinch = D(this.element, n.pinch || s)),\r\n                (this.swipe = D(this.element, n.swipe || s)),\r\n                (this.tap = D(this.element, n.tap || s)),\r\n                (this.doubleTap = D(this.element, n.doubleTap || s)),\r\n                (this.longTap = D(this.element, n.longTap || s)),\r\n                (this.singleTap = D(this.element, n.singleTap || s)),\r\n                (this.pressMove = D(this.element, n.pressMove || s)),\r\n                (this.twoFingerPressMove = D(\r\n                    this.element,\r\n                    n.twoFingerPressMove || s\r\n                )),\r\n                (this.touchMove = D(this.element, n.touchMove || s)),\r\n                (this.touchEnd = D(this.element, n.touchEnd || s)),\r\n                (this.touchCancel = D(this.element, n.touchCancel || s)),\r\n                (this.translateContainer = this.element),\r\n                (this._cancelAllHandler = this.cancelAll.bind(this)),\r\n                window.addEventListener("scroll", this._cancelAllHandler),\r\n                (this.delta = null),\r\n                (this.last = null),\r\n                (this.now = null),\r\n                (this.tapTimeout = null),\r\n                (this.singleTapTimeout = null),\r\n                (this.longTapTimeout = null),\r\n                (this.swipeTimeout = null),\r\n                (this.x1 = this.x2 = this.y1 = this.y2 = null),\r\n                (this.preTapPosition = { x: null, y: null });\r\n        }\r\n        return (\r\n            n(e, [\r\n                {\r\n                    key: "start",\r\n                    value: function (e) {\r\n                        if (e.touches) {\r\n                            if (\r\n                                e.target &&\r\n                                e.target.nodeName &&\r\n                                ["a", "button", "input"].indexOf(\r\n                                    e.target.nodeName.toLowerCase()\r\n                                ) >= 0\r\n                            )\r\n                                console.log(\r\n                                    "ignore drag for this touched element",\r\n                                    e.target.nodeName.toLowerCase()\r\n                                );\r\n                            else {\r\n                                (this.now = Date.now()),\r\n                                    (this.x1 = e.touches[0].pageX),\r\n                                    (this.y1 = e.touches[0].pageY),\r\n                                    (this.delta =\r\n                                        this.now - (this.last || this.now)),\r\n                                    this.touchStart.dispatch(e, this.element),\r\n                                    null !== this.preTapPosition.x &&\r\n                                        ((this.isDoubleTap =\r\n                                            this.delta > 0 &&\r\n                                            this.delta <= 250 &&\r\n                                            Math.abs(\r\n                                                this.preTapPosition.x - this.x1\r\n                                            ) < 30 &&\r\n                                            Math.abs(\r\n                                                this.preTapPosition.y - this.y1\r\n                                            ) < 30),\r\n                                        this.isDoubleTap &&\r\n                                            clearTimeout(\r\n                                                this.singleTapTimeout\r\n                                            )),\r\n                                    (this.preTapPosition.x = this.x1),\r\n                                    (this.preTapPosition.y = this.y1),\r\n                                    (this.last = this.now);\r\n                                var t = this.preV;\r\n                                if (e.touches.length > 1) {\r\n                                    this._cancelLongTap(),\r\n                                        this._cancelSingleTap();\r\n                                    var i = {\r\n                                        x: e.touches[1].pageX - this.x1,\r\n                                        y: e.touches[1].pageY - this.y1,\r\n                                    };\r\n                                    (t.x = i.x),\r\n                                        (t.y = i.y),\r\n                                        (this.pinchStartLen = Y(t)),\r\n                                        this.multipointStart.dispatch(\r\n                                            e,\r\n                                            this.element\r\n                                        );\r\n                                }\r\n                                (this._preventTap = !1),\r\n                                    (this.longTapTimeout = setTimeout(\r\n                                        function () {\r\n                                            this.longTap.dispatch(\r\n                                                e,\r\n                                                this.element\r\n                                            ),\r\n                                                (this._preventTap = !0);\r\n                                        }.bind(this),\r\n                                        750\r\n                                    ));\r\n                            }\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "move",\r\n                    value: function (e) {\r\n                        if (e.touches) {\r\n                            var t = this.preV,\r\n                                i = e.touches.length,\r\n                                n = e.touches[0].pageX,\r\n                                s = e.touches[0].pageY;\r\n                            if (((this.isDoubleTap = !1), i > 1)) {\r\n                                var l = e.touches[1].pageX,\r\n                                    o = e.touches[1].pageY,\r\n                                    r = {\r\n                                        x: e.touches[1].pageX - n,\r\n                                        y: e.touches[1].pageY - s,\r\n                                    };\r\n                                null !== t.x &&\r\n                                    (this.pinchStartLen > 0 &&\r\n                                        ((e.zoom = Y(r) / this.pinchStartLen),\r\n                                        this.pinch.dispatch(e, this.element)),\r\n                                    (e.angle = q(r, t)),\r\n                                    this.rotate.dispatch(e, this.element)),\r\n                                    (t.x = r.x),\r\n                                    (t.y = r.y),\r\n                                    null !== this.x2 && null !== this.sx2\r\n                                        ? ((e.deltaX =\r\n                                              (n - this.x2 + l - this.sx2) / 2),\r\n                                          (e.deltaY =\r\n                                              (s - this.y2 + o - this.sy2) / 2))\r\n                                        : ((e.deltaX = 0), (e.deltaY = 0)),\r\n                                    this.twoFingerPressMove.dispatch(\r\n                                        e,\r\n                                        this.element\r\n                                    ),\r\n                                    (this.sx2 = l),\r\n                                    (this.sy2 = o);\r\n                            } else {\r\n                                if (null !== this.x2) {\r\n                                    (e.deltaX = n - this.x2),\r\n                                        (e.deltaY = s - this.y2);\r\n                                    var a = Math.abs(this.x1 - this.x2),\r\n                                        h = Math.abs(this.y1 - this.y2);\r\n                                    (a > 10 || h > 10) &&\r\n                                        (this._preventTap = !0);\r\n                                } else (e.deltaX = 0), (e.deltaY = 0);\r\n                                this.pressMove.dispatch(e, this.element);\r\n                            }\r\n                            this.touchMove.dispatch(e, this.element),\r\n                                this._cancelLongTap(),\r\n                                (this.x2 = n),\r\n                                (this.y2 = s),\r\n                                i > 1 && e.preventDefault();\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "end",\r\n                    value: function (e) {\r\n                        if (e.changedTouches) {\r\n                            this._cancelLongTap();\r\n                            var t = this;\r\n                            e.touches.length < 2 &&\r\n                                (this.multipointEnd.dispatch(e, this.element),\r\n                                (this.sx2 = this.sy2 = null)),\r\n                                (this.x2 && Math.abs(this.x1 - this.x2) > 30) ||\r\n                                (this.y2 && Math.abs(this.y1 - this.y2) > 30)\r\n                                    ? ((e.direction = this._swipeDirection(\r\n                                          this.x1,\r\n                                          this.x2,\r\n                                          this.y1,\r\n                                          this.y2\r\n                                      )),\r\n                                      (this.swipeTimeout = setTimeout(\r\n                                          function () {\r\n                                              t.swipe.dispatch(e, t.element);\r\n                                          },\r\n                                          0\r\n                                      )))\r\n                                    : ((this.tapTimeout = setTimeout(\r\n                                          function () {\r\n                                              t._preventTap ||\r\n                                                  t.tap.dispatch(e, t.element),\r\n                                                  t.isDoubleTap &&\r\n                                                      (t.doubleTap.dispatch(\r\n                                                          e,\r\n                                                          t.element\r\n                                                      ),\r\n                                                      (t.isDoubleTap = !1));\r\n                                          },\r\n                                          0\r\n                                      )),\r\n                                      t.isDoubleTap ||\r\n                                          (t.singleTapTimeout = setTimeout(\r\n                                              function () {\r\n                                                  t.singleTap.dispatch(\r\n                                                      e,\r\n                                                      t.element\r\n                                                  );\r\n                                              },\r\n                                              250\r\n                                          ))),\r\n                                this.touchEnd.dispatch(e, this.element),\r\n                                (this.preV.x = 0),\r\n                                (this.preV.y = 0),\r\n                                (this.zoom = 1),\r\n                                (this.pinchStartLen = null),\r\n                                (this.x1 = this.x2 = this.y1 = this.y2 = null);\r\n                        }\r\n                    },\r\n                },\r\n                {\r\n                    key: "cancelAll",\r\n                    value: function () {\r\n                        (this._preventTap = !0),\r\n                            clearTimeout(this.singleTapTimeout),\r\n                            clearTimeout(this.tapTimeout),\r\n                            clearTimeout(this.longTapTimeout),\r\n                            clearTimeout(this.swipeTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "cancel",\r\n                    value: function (e) {\r\n                        this.cancelAll(),\r\n                            this.touchCancel.dispatch(e, this.element);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_cancelLongTap",\r\n                    value: function () {\r\n                        clearTimeout(this.longTapTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_cancelSingleTap",\r\n                    value: function () {\r\n                        clearTimeout(this.singleTapTimeout);\r\n                    },\r\n                },\r\n                {\r\n                    key: "_swipeDirection",\r\n                    value: function (e, t, i, n) {\r\n                        return Math.abs(e - t) >= Math.abs(i - n)\r\n                            ? e - t > 0\r\n                                ? "Left"\r\n                                : "Right"\r\n                            : i - n > 0\r\n                            ? "Up"\r\n                            : "Down";\r\n                    },\r\n                },\r\n                {\r\n                    key: "on",\r\n                    value: function (e, t) {\r\n                        this[e] && this[e].add(t);\r\n                    },\r\n                },\r\n                {\r\n                    key: "off",\r\n                    value: function (e, t) {\r\n                        this[e] && this[e].del(t);\r\n                    },\r\n                },\r\n                {\r\n                    key: "destroy",\r\n                    value: function () {\r\n                        return (\r\n                            this.singleTapTimeout &&\r\n                                clearTimeout(this.singleTapTimeout),\r\n                            this.tapTimeout && clearTimeout(this.tapTimeout),\r\n                            this.longTapTimeout &&\r\n                                clearTimeout(this.longTapTimeout),\r\n                            this.swipeTimeout &&\r\n                                clearTimeout(this.swipeTimeout),\r\n                            this.element.removeEventListener(\r\n                                "touchstart",\r\n                                this.start\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchmove",\r\n                                this.move\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchend",\r\n                                this.end\r\n                            ),\r\n                            this.element.removeEventListener(\r\n                                "touchcancel",\r\n                                this.cancel\r\n                            ),\r\n                            this.rotate.del(),\r\n                            this.touchStart.del(),\r\n                            this.multipointStart.del(),\r\n                            this.multipointEnd.del(),\r\n                            this.pinch.del(),\r\n                            this.swipe.del(),\r\n                            this.tap.del(),\r\n                            this.doubleTap.del(),\r\n                            this.longTap.del(),\r\n                            this.singleTap.del(),\r\n                            this.pressMove.del(),\r\n                            this.twoFingerPressMove.del(),\r\n                            this.touchMove.del(),\r\n                            this.touchEnd.del(),\r\n                            this.touchCancel.del(),\r\n                            (this.preV =\r\n                                this.pinchStartLen =\r\n                                this.zoom =\r\n                                this.isDoubleTap =\r\n                                this.delta =\r\n                                this.last =\r\n                                this.now =\r\n                                this.tapTimeout =\r\n                                this.singleTapTimeout =\r\n                                this.longTapTimeout =\r\n                                this.swipeTimeout =\r\n                                this.x1 =\r\n                                this.x2 =\r\n                                this.y1 =\r\n                                this.y2 =\r\n                                this.preTapPosition =\r\n                                this.rotate =\r\n                                this.touchStart =\r\n                                this.multipointStart =\r\n                                this.multipointEnd =\r\n                                this.pinch =\r\n                                this.swipe =\r\n                                this.tap =\r\n                                this.doubleTap =\r\n                                this.longTap =\r\n                                this.singleTap =\r\n                                this.pressMove =\r\n                                this.touchMove =\r\n                                this.touchEnd =\r\n                                this.touchCancel =\r\n                                this.twoFingerPressMove =\r\n                                    null),\r\n                            window.removeEventListener(\r\n                                "scroll",\r\n                                this._cancelAllHandler\r\n                            ),\r\n                            null\r\n                        );\r\n                    },\r\n                },\r\n            ]),\r\n            e\r\n        );\r\n    })();\r\n    function W(e) {\r\n        var t = (function () {\r\n                var e,\r\n                    t = document.createElement("fakeelement"),\r\n                    i = {\r\n                        transition: "transitionend",\r\n                        OTransition: "oTransitionEnd",\r\n                        MozTransition: "transitionend",\r\n                        WebkitTransition: "webkitTransitionEnd",\r\n                    };\r\n                for (e in i) if (void 0 !== t.style[e]) return i[e];\r\n            })(),\r\n            i =\r\n                window.innerWidth ||\r\n                document.documentElement.clientWidth ||\r\n                document.body.clientWidth,\r\n            n = c(e, "gslide-media") ? e : e.querySelector(".gslide-media"),\r\n            s = u(n, ".ginner-container"),\r\n            l = e.querySelector(".gslide-description");\r\n        i > 769 && (n = s),\r\n            h(n, "greset"),\r\n            v(n, "translate3d(0, 0, 0)"),\r\n            a(t, {\r\n                onElement: n,\r\n                once: !0,\r\n                withCallback: function (e, t) {\r\n                    d(n, "greset");\r\n                },\r\n            }),\r\n            (n.style.opacity = ""),\r\n            l && (l.style.opacity = "");\r\n    }\r\n    function B(e) {\r\n        if (e.events.hasOwnProperty("touch")) return !1;\r\n        var t,\r\n            i,\r\n            n,\r\n            s = y(),\r\n            l = s.width,\r\n            o = s.height,\r\n            r = !1,\r\n            a = null,\r\n            g = null,\r\n            f = null,\r\n            p = !1,\r\n            m = 1,\r\n            x = 1,\r\n            b = !1,\r\n            S = !1,\r\n            w = null,\r\n            T = null,\r\n            C = null,\r\n            k = null,\r\n            E = 0,\r\n            A = 0,\r\n            L = !1,\r\n            I = !1,\r\n            O = {},\r\n            P = {},\r\n            M = 0,\r\n            z = 0,\r\n            X = document.getElementById("glightbox-slider"),\r\n            Y = document.querySelector(".goverlay"),\r\n            q = new _(X, {\r\n                touchStart: function (t) {\r\n                    if (\r\n                        ((r = !0),\r\n                        (c(t.targetTouches[0].target, "ginner-container") ||\r\n                            u(t.targetTouches[0].target, ".gslide-desc") ||\r\n                            "a" ==\r\n                                t.targetTouches[0].target.nodeName.toLowerCase()) &&\r\n                            (r = !1),\r\n                        u(t.targetTouches[0].target, ".gslide-inline") &&\r\n                            !c(\r\n                                t.targetTouches[0].target.parentNode,\r\n                                "gslide-inline"\r\n                            ) &&\r\n                            (r = !1),\r\n                        r)\r\n                    ) {\r\n                        if (\r\n                            ((P = t.targetTouches[0]),\r\n                            (O.pageX = t.targetTouches[0].pageX),\r\n                            (O.pageY = t.targetTouches[0].pageY),\r\n                            (M = t.targetTouches[0].clientX),\r\n                            (z = t.targetTouches[0].clientY),\r\n                            (a = e.activeSlide),\r\n                            (g = a.querySelector(".gslide-media")),\r\n                            (n = a.querySelector(".gslide-inline")),\r\n                            (f = null),\r\n                            c(g, "gslide-image") &&\r\n                                (f = g.querySelector("img")),\r\n                            (window.innerWidth ||\r\n                                document.documentElement.clientWidth ||\r\n                                document.body.clientWidth) > 769 &&\r\n                                (g = a.querySelector(".ginner-container")),\r\n                            d(Y, "greset"),\r\n                            t.pageX > 20 && t.pageX < window.innerWidth - 20)\r\n                        )\r\n                            return;\r\n                        t.preventDefault();\r\n                    }\r\n                },\r\n                touchMove: function (s) {\r\n                    if (r && ((P = s.targetTouches[0]), !b && !S)) {\r\n                        if (n && n.offsetHeight > o) {\r\n                            var a = O.pageX - P.pageX;\r\n                            if (Math.abs(a) <= 13) return !1;\r\n                        }\r\n                        p = !0;\r\n                        var h,\r\n                            d = s.targetTouches[0].clientX,\r\n                            c = s.targetTouches[0].clientY,\r\n                            u = M - d,\r\n                            m = z - c;\r\n                        if (\r\n                            (Math.abs(u) > Math.abs(m)\r\n                                ? ((L = !1), (I = !0))\r\n                                : ((I = !1), (L = !0)),\r\n                            (t = P.pageX - O.pageX),\r\n                            (E = (100 * t) / l),\r\n                            (i = P.pageY - O.pageY),\r\n                            (A = (100 * i) / o),\r\n                            L &&\r\n                                f &&\r\n                                ((h = 1 - Math.abs(i) / o),\r\n                                (Y.style.opacity = h),\r\n                                e.settings.touchFollowAxis && (E = 0)),\r\n                            I &&\r\n                                ((h = 1 - Math.abs(t) / l),\r\n                                (g.style.opacity = h),\r\n                                e.settings.touchFollowAxis && (A = 0)),\r\n                            !f)\r\n                        )\r\n                            return v(g, "translate3d(".concat(E, "%, 0, 0)"));\r\n                        v(\r\n                            g,\r\n                            "translate3d(".concat(E, "%, ").concat(A, "%, 0)")\r\n                        );\r\n                    }\r\n                },\r\n                touchEnd: function () {\r\n                    if (r) {\r\n                        if (((p = !1), S || b)) return (C = w), void (k = T);\r\n                        var t = Math.abs(parseInt(A)),\r\n                            i = Math.abs(parseInt(E));\r\n                        if (!(t > 29 && f))\r\n                            return t < 29 && i < 25\r\n                                ? (h(Y, "greset"), (Y.style.opacity = 1), W(g))\r\n                                : void 0;\r\n                        e.close();\r\n                    }\r\n                },\r\n                multipointEnd: function () {\r\n                    setTimeout(function () {\r\n                        b = !1;\r\n                    }, 50);\r\n                },\r\n                multipointStart: function () {\r\n                    (b = !0), (m = x || 1);\r\n                },\r\n                pinch: function (e) {\r\n                    if (!f || p) return !1;\r\n                    (b = !0), (f.scaleX = f.scaleY = m * e.zoom);\r\n                    var t = m * e.zoom;\r\n                    if (((S = !0), t <= 1))\r\n                        return (\r\n                            (S = !1),\r\n                            (t = 1),\r\n                            (k = null),\r\n                            (C = null),\r\n                            (w = null),\r\n                            (T = null),\r\n                            void f.setAttribute("style", "")\r\n                        );\r\n                    t > 4.5 && (t = 4.5),\r\n                        (f.style.transform = "scale3d("\r\n                            .concat(t, ", ")\r\n                            .concat(t, ", 1)")),\r\n                        (x = t);\r\n                },\r\n                pressMove: function (e) {\r\n                    if (S && !b) {\r\n                        var t = P.pageX - O.pageX,\r\n                            i = P.pageY - O.pageY;\r\n                        C && (t += C), k && (i += k), (w = t), (T = i);\r\n                        var n = "translate3d("\r\n                            .concat(t, "px, ")\r\n                            .concat(i, "px, 0)");\r\n                        x &&\r\n                            (n += " scale3d("\r\n                                .concat(x, ", ")\r\n                                .concat(x, ", 1)")),\r\n                            v(f, n);\r\n                    }\r\n                },\r\n                swipe: function (t) {\r\n                    if (!S)\r\n                        if (b) b = !1;\r\n                        else {\r\n                            if ("Left" == t.direction) {\r\n                                if (e.index == e.elements.length - 1)\r\n                                    return W(g);\r\n                                e.nextSlide();\r\n                            }\r\n                            if ("Right" == t.direction) {\r\n                                if (0 == e.index) return W(g);\r\n                                e.prevSlide();\r\n                            }\r\n                        }\r\n                },\r\n            });\r\n        e.events.touch = q;\r\n    }\r\n    var H = (function () {\r\n            function e(i, n) {\r\n                var s = this,\r\n                    l =\r\n                        arguments.length > 2 && void 0 !== arguments[2]\r\n                            ? arguments[2]\r\n                            : null;\r\n                if (\r\n                    (t(this, e),\r\n                    (this.img = i),\r\n                    (this.slide = n),\r\n                    (this.onclose = l),\r\n                    this.img.setZoomEvents)\r\n                )\r\n                    return !1;\r\n                (this.active = !1),\r\n                    (this.zoomedIn = !1),\r\n                    (this.dragging = !1),\r\n                    (this.currentX = null),\r\n                    (this.currentY = null),\r\n                    (this.initialX = null),\r\n                    (this.initialY = null),\r\n                    (this.xOffset = 0),\r\n                    (this.yOffset = 0),\r\n                    this.img.addEventListener(\r\n                        "mousedown",\r\n                        function (e) {\r\n                            return s.dragStart(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "mouseup",\r\n                        function (e) {\r\n                            return s.dragEnd(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "mousemove",\r\n                        function (e) {\r\n                            return s.drag(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.img.addEventListener(\r\n                        "click",\r\n                        function (e) {\r\n                            return s.slide.classList.contains("dragging-nav")\r\n                                ? (s.zoomOut(), !1)\r\n                                : s.zoomedIn\r\n                                ? void (\r\n                                      s.zoomedIn &&\r\n                                      !s.dragging &&\r\n                                      s.zoomOut()\r\n                                  )\r\n                                : s.zoomIn();\r\n                        },\r\n                        !1\r\n                    ),\r\n                    (this.img.setZoomEvents = !0);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "zoomIn",\r\n                        value: function () {\r\n                            var e = this.widowWidth();\r\n                            if (!(this.zoomedIn || e <= 768)) {\r\n                                var t = this.img;\r\n                                if (\r\n                                    (t.setAttribute(\r\n                                        "data-style",\r\n                                        t.getAttribute("style")\r\n                                    ),\r\n                                    (t.style.maxWidth = t.naturalWidth + "px"),\r\n                                    (t.style.maxHeight =\r\n                                        t.naturalHeight + "px"),\r\n                                    t.naturalWidth > e)\r\n                                ) {\r\n                                    var i = e / 2 - t.naturalWidth / 2;\r\n                                    this.setTranslate(\r\n                                        this.img.parentNode,\r\n                                        i,\r\n                                        0\r\n                                    );\r\n                                }\r\n                                this.slide.classList.add("zoomed"),\r\n                                    (this.zoomedIn = !0);\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "zoomOut",\r\n                        value: function () {\r\n                            this.img.parentNode.setAttribute("style", ""),\r\n                                this.img.setAttribute(\r\n                                    "style",\r\n                                    this.img.getAttribute("data-style")\r\n                                ),\r\n                                this.slide.classList.remove("zoomed"),\r\n                                (this.zoomedIn = !1),\r\n                                (this.currentX = null),\r\n                                (this.currentY = null),\r\n                                (this.initialX = null),\r\n                                (this.initialY = null),\r\n                                (this.xOffset = 0),\r\n                                (this.yOffset = 0),\r\n                                this.onclose &&\r\n                                    "function" == typeof this.onclose &&\r\n                                    this.onclose();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragStart",\r\n                        value: function (e) {\r\n                            e.preventDefault(),\r\n                                this.zoomedIn\r\n                                    ? ("touchstart" === e.type\r\n                                          ? ((this.initialX =\r\n                                                e.touches[0].clientX -\r\n                                                this.xOffset),\r\n                                            (this.initialY =\r\n                                                e.touches[0].clientY -\r\n                                                this.yOffset))\r\n                                          : ((this.initialX =\r\n                                                e.clientX - this.xOffset),\r\n                                            (this.initialY =\r\n                                                e.clientY - this.yOffset)),\r\n                                      e.target === this.img &&\r\n                                          ((this.active = !0),\r\n                                          this.img.classList.add("dragging")))\r\n                                    : (this.active = !1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragEnd",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            e.preventDefault(),\r\n                                (this.initialX = this.currentX),\r\n                                (this.initialY = this.currentY),\r\n                                (this.active = !1),\r\n                                setTimeout(function () {\r\n                                    (t.dragging = !1),\r\n                                        (t.img.isDragging = !1),\r\n                                        t.img.classList.remove("dragging");\r\n                                }, 100);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "drag",\r\n                        value: function (e) {\r\n                            this.active &&\r\n                                (e.preventDefault(),\r\n                                "touchmove" === e.type\r\n                                    ? ((this.currentX =\r\n                                          e.touches[0].clientX - this.initialX),\r\n                                      (this.currentY =\r\n                                          e.touches[0].clientY - this.initialY))\r\n                                    : ((this.currentX =\r\n                                          e.clientX - this.initialX),\r\n                                      (this.currentY =\r\n                                          e.clientY - this.initialY)),\r\n                                (this.xOffset = this.currentX),\r\n                                (this.yOffset = this.currentY),\r\n                                (this.img.isDragging = !0),\r\n                                (this.dragging = !0),\r\n                                this.setTranslate(\r\n                                    this.img,\r\n                                    this.currentX,\r\n                                    this.currentY\r\n                                ));\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "onMove",\r\n                        value: function (e) {\r\n                            if (this.zoomedIn) {\r\n                                var t = e.clientX - this.img.naturalWidth / 2,\r\n                                    i = e.clientY - this.img.naturalHeight / 2;\r\n                                this.setTranslate(this.img, t, i);\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setTranslate",\r\n                        value: function (e, t, i) {\r\n                            e.style.transform =\r\n                                "translate3d(" + t + "px, " + i + "px, 0)";\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "widowWidth",\r\n                        value: function () {\r\n                            return (\r\n                                window.innerWidth ||\r\n                                document.documentElement.clientWidth ||\r\n                                document.body.clientWidth\r\n                            );\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        V = (function () {\r\n            function e() {\r\n                var i = this,\r\n                    n =\r\n                        arguments.length > 0 && void 0 !== arguments[0]\r\n                            ? arguments[0]\r\n                            : {};\r\n                t(this, e);\r\n                var s = n.dragEl,\r\n                    l = n.toleranceX,\r\n                    o = void 0 === l ? 40 : l,\r\n                    r = n.toleranceY,\r\n                    a = void 0 === r ? 65 : r,\r\n                    h = n.slide,\r\n                    d = void 0 === h ? null : h,\r\n                    c = n.instance,\r\n                    u = void 0 === c ? null : c;\r\n                (this.el = s),\r\n                    (this.active = !1),\r\n                    (this.dragging = !1),\r\n                    (this.currentX = null),\r\n                    (this.currentY = null),\r\n                    (this.initialX = null),\r\n                    (this.initialY = null),\r\n                    (this.xOffset = 0),\r\n                    (this.yOffset = 0),\r\n                    (this.direction = null),\r\n                    (this.lastDirection = null),\r\n                    (this.toleranceX = o),\r\n                    (this.toleranceY = a),\r\n                    (this.toleranceReached = !1),\r\n                    (this.dragContainer = this.el),\r\n                    (this.slide = d),\r\n                    (this.instance = u),\r\n                    this.el.addEventListener(\r\n                        "mousedown",\r\n                        function (e) {\r\n                            return i.dragStart(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.el.addEventListener(\r\n                        "mouseup",\r\n                        function (e) {\r\n                            return i.dragEnd(e);\r\n                        },\r\n                        !1\r\n                    ),\r\n                    this.el.addEventListener(\r\n                        "mousemove",\r\n                        function (e) {\r\n                            return i.drag(e);\r\n                        },\r\n                        !1\r\n                    );\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "dragStart",\r\n                        value: function (e) {\r\n                            if (this.slide.classList.contains("zoomed"))\r\n                                this.active = !1;\r\n                            else {\r\n                                "touchstart" === e.type\r\n                                    ? ((this.initialX =\r\n                                          e.touches[0].clientX - this.xOffset),\r\n                                      (this.initialY =\r\n                                          e.touches[0].clientY - this.yOffset))\r\n                                    : ((this.initialX =\r\n                                          e.clientX - this.xOffset),\r\n                                      (this.initialY =\r\n                                          e.clientY - this.yOffset));\r\n                                var t = e.target.nodeName.toLowerCase();\r\n                                e.target.classList.contains("nodrag") ||\r\n                                u(e.target, ".nodrag") ||\r\n                                -1 !==\r\n                                    [\r\n                                        "input",\r\n                                        "select",\r\n                                        "textarea",\r\n                                        "button",\r\n                                        "a",\r\n                                    ].indexOf(t)\r\n                                    ? (this.active = !1)\r\n                                    : (e.preventDefault(),\r\n                                      (e.target === this.el ||\r\n                                          ("img" !== t &&\r\n                                              u(e.target, ".gslide-inline"))) &&\r\n                                          ((this.active = !0),\r\n                                          this.el.classList.add("dragging"),\r\n                                          (this.dragContainer = u(\r\n                                              e.target,\r\n                                              ".ginner-container"\r\n                                          ))));\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "dragEnd",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            e && e.preventDefault(),\r\n                                (this.initialX = 0),\r\n                                (this.initialY = 0),\r\n                                (this.currentX = null),\r\n                                (this.currentY = null),\r\n                                (this.initialX = null),\r\n                                (this.initialY = null),\r\n                                (this.xOffset = 0),\r\n                                (this.yOffset = 0),\r\n                                (this.active = !1),\r\n                                this.doSlideChange &&\r\n                                    ((this.instance.preventOutsideClick = !0),\r\n                                    "right" == this.doSlideChange &&\r\n                                        this.instance.prevSlide(),\r\n                                    "left" == this.doSlideChange &&\r\n                                        this.instance.nextSlide()),\r\n                                this.doSlideClose && this.instance.close(),\r\n                                this.toleranceReached ||\r\n                                    this.setTranslate(\r\n                                        this.dragContainer,\r\n                                        0,\r\n                                        0,\r\n                                        !0\r\n                                    ),\r\n                                setTimeout(function () {\r\n                                    (t.instance.preventOutsideClick = !1),\r\n                                        (t.toleranceReached = !1),\r\n                                        (t.lastDirection = null),\r\n                                        (t.dragging = !1),\r\n                                        (t.el.isDragging = !1),\r\n                                        t.el.classList.remove("dragging"),\r\n                                        t.slide.classList.remove(\r\n                                            "dragging-nav"\r\n                                        ),\r\n                                        (t.dragContainer.style.transform = ""),\r\n                                        (t.dragContainer.style.transition = "");\r\n                                }, 100);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "drag",\r\n                        value: function (e) {\r\n                            if (this.active) {\r\n                                e.preventDefault(),\r\n                                    this.slide.classList.add("dragging-nav"),\r\n                                    "touchmove" === e.type\r\n                                        ? ((this.currentX =\r\n                                              e.touches[0].clientX -\r\n                                              this.initialX),\r\n                                          (this.currentY =\r\n                                              e.touches[0].clientY -\r\n                                              this.initialY))\r\n                                        : ((this.currentX =\r\n                                              e.clientX - this.initialX),\r\n                                          (this.currentY =\r\n                                              e.clientY - this.initialY)),\r\n                                    (this.xOffset = this.currentX),\r\n                                    (this.yOffset = this.currentY),\r\n                                    (this.el.isDragging = !0),\r\n                                    (this.dragging = !0),\r\n                                    (this.doSlideChange = !1),\r\n                                    (this.doSlideClose = !1);\r\n                                var t = Math.abs(this.currentX),\r\n                                    i = Math.abs(this.currentY);\r\n                                if (\r\n                                    t > 0 &&\r\n                                    t >= Math.abs(this.currentY) &&\r\n                                    (!this.lastDirection ||\r\n                                        "x" == this.lastDirection)\r\n                                ) {\r\n                                    (this.yOffset = 0),\r\n                                        (this.lastDirection = "x"),\r\n                                        this.setTranslate(\r\n                                            this.dragContainer,\r\n                                            this.currentX,\r\n                                            0\r\n                                        );\r\n                                    var n = this.shouldChange();\r\n                                    if (\r\n                                        (!this.instance.settings.dragAutoSnap &&\r\n                                            n &&\r\n                                            (this.doSlideChange = n),\r\n                                        this.instance.settings.dragAutoSnap &&\r\n                                            n)\r\n                                    )\r\n                                        return (\r\n                                            (this.instance.preventOutsideClick =\r\n                                                !0),\r\n                                            (this.toleranceReached = !0),\r\n                                            (this.active = !1),\r\n                                            (this.instance.preventOutsideClick =\r\n                                                !0),\r\n                                            this.dragEnd(null),\r\n                                            "right" == n &&\r\n                                                this.instance.prevSlide(),\r\n                                            void (\r\n                                                "left" == n &&\r\n                                                this.instance.nextSlide()\r\n                                            )\r\n                                        );\r\n                                }\r\n                                if (\r\n                                    this.toleranceY > 0 &&\r\n                                    i > 0 &&\r\n                                    i >= t &&\r\n                                    (!this.lastDirection ||\r\n                                        "y" == this.lastDirection)\r\n                                ) {\r\n                                    (this.xOffset = 0),\r\n                                        (this.lastDirection = "y"),\r\n                                        this.setTranslate(\r\n                                            this.dragContainer,\r\n                                            0,\r\n                                            this.currentY\r\n                                        );\r\n                                    var s = this.shouldClose();\r\n                                    return (\r\n                                        !this.instance.settings.dragAutoSnap &&\r\n                                            s &&\r\n                                            (this.doSlideClose = !0),\r\n                                        void (\r\n                                            this.instance.settings\r\n                                                .dragAutoSnap &&\r\n                                            s &&\r\n                                            this.instance.close()\r\n                                        )\r\n                                    );\r\n                                }\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "shouldChange",\r\n                        value: function () {\r\n                            var e = !1;\r\n                            if (Math.abs(this.currentX) >= this.toleranceX) {\r\n                                var t = this.currentX > 0 ? "right" : "left";\r\n                                (("left" == t &&\r\n                                    this.slide !==\r\n                                        this.slide.parentNode.lastChild) ||\r\n                                    ("right" == t &&\r\n                                        this.slide !==\r\n                                            this.slide.parentNode\r\n                                                .firstChild)) &&\r\n                                    (e = t);\r\n                            }\r\n                            return e;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "shouldClose",\r\n                        value: function () {\r\n                            var e = !1;\r\n                            return (\r\n                                Math.abs(this.currentY) >= this.toleranceY &&\r\n                                    (e = !0),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setTranslate",\r\n                        value: function (e, t, i) {\r\n                            var n =\r\n                                arguments.length > 3 &&\r\n                                void 0 !== arguments[3] &&\r\n                                arguments[3];\r\n                            (e.style.transition = n ? "all .2s ease" : ""),\r\n                                (e.style.transform = "translate3d("\r\n                                    .concat(t, "px, ")\r\n                                    .concat(i, "px, 0)"));\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })();\r\n    function j(e, t, i, n) {\r\n        var s = e.querySelector(".gslide-media"),\r\n            l = new Image(),\r\n            o = "gSlideTitle_" + i,\r\n            r = "gSlideDesc_" + i;\r\n        l.addEventListener(\r\n            "load",\r\n            function () {\r\n                T(n) && n();\r\n            },\r\n            !1\r\n        ),\r\n            (l.src = t.href),\r\n            "" != t.sizes &&\r\n                "" != t.srcset &&\r\n                ((l.sizes = t.sizes), (l.srcset = t.srcset)),\r\n            (l.alt = ""),\r\n            I(t.alt) || "" === t.alt || (l.alt = t.alt),\r\n            "" !== t.title && l.setAttribute("aria-labelledby", o),\r\n            "" !== t.description && l.setAttribute("aria-describedby", r),\r\n            t.hasOwnProperty("_hasCustomWidth") &&\r\n                t._hasCustomWidth &&\r\n                (l.style.width = t.width),\r\n            t.hasOwnProperty("_hasCustomHeight") &&\r\n                t._hasCustomHeight &&\r\n                (l.style.height = t.height),\r\n            s.insertBefore(l, s.firstChild);\r\n    }\r\n    function F(e, t, i, n) {\r\n        var s = this,\r\n            l = e.querySelector(".ginner-container"),\r\n            o = "gvideo" + i,\r\n            r = e.querySelector(".gslide-media"),\r\n            a = this.getAllPlayers();\r\n        h(l, "gvideo-container"),\r\n            r.insertBefore(\r\n                m(\'<div class="gvideo-wrapper"></div>\'),\r\n                r.firstChild\r\n            );\r\n        var d = e.querySelector(".gvideo-wrapper");\r\n        S(this.settings.plyr.css, "Plyr");\r\n        var c = t.href,\r\n            u = location.protocol.replace(":", ""),\r\n            g = "",\r\n            v = "",\r\n            f = !1;\r\n        "file" == u && (u = "http"),\r\n            (r.style.maxWidth = t.width),\r\n            S(this.settings.plyr.js, "Plyr", function () {\r\n                if (c.match(/vimeo\\.com\\/([0-9]*)/)) {\r\n                    var l = /vimeo.*\\/(\\d+)/i.exec(c);\r\n                    (g = "vimeo"), (v = l[1]);\r\n                }\r\n                if (\r\n                    c.match(\r\n                        /(youtube\\.com|youtube-nocookie\\.com)\\/watch\\?v=([a-zA-Z0-9\\-_]+)/\r\n                    ) ||\r\n                    c.match(/youtu\\.be\\/([a-zA-Z0-9\\-_]+)/) ||\r\n                    c.match(\r\n                        /(youtube\\.com|youtube-nocookie\\.com)\\/embed\\/([a-zA-Z0-9\\-_]+)/\r\n                    )\r\n                ) {\r\n                    var r = (function (e) {\r\n                        var t = "";\r\n                        t =\r\n                            void 0 !==\r\n                            (e = e\r\n                                .replace(/(>|<)/gi, "")\r\n                                .split(\r\n                                    /(vi\\/|v=|\\/v\\/|youtu\\.be\\/|\\/embed\\/)/\r\n                                ))[2]\r\n                                ? (t = e[2].split(/[^0-9a-z_\\-]/i))[0]\r\n                                : e;\r\n                        return t;\r\n                    })(c);\r\n                    (g = "youtube"), (v = r);\r\n                }\r\n                if (null !== c.match(/\\.(mp4|ogg|webm|mov)$/)) {\r\n                    g = "local";\r\n                    var u = \'<video id="\' + o + \'" \';\r\n                    (u += \'style="background:#000; max-width: \'.concat(\r\n                        t.width,\r\n                        \';" \'\r\n                    )),\r\n                        (u += \'preload="metadata" \'),\r\n                        (u += \'x-webkit-airplay="allow" \'),\r\n                        (u += "playsinline "),\r\n                        (u += "controls "),\r\n                        (u += \'class="gvideo-local">\');\r\n                    var p = c.toLowerCase().split(".").pop(),\r\n                        y = { mp4: "", ogg: "", webm: "" };\r\n                    for (var x in ((y[(p = "mov" == p ? "mp4" : p)] = c), y))\r\n                        if (y.hasOwnProperty(x)) {\r\n                            var S = y[x];\r\n                            t.hasOwnProperty(x) && (S = t[x]),\r\n                                "" !== S &&\r\n                                    (u += \'<source src="\'\r\n                                        .concat(S, \'" type="video/\')\r\n                                        .concat(x, \'">\'));\r\n                        }\r\n                    f = m((u += "</video>"));\r\n                }\r\n                var w =\r\n                    f ||\r\n                    m(\r\n                        \'<div id="\'\r\n                            .concat(o, \'" data-plyr-provider="\')\r\n                            .concat(g, \'" data-plyr-embed-id="\')\r\n                            .concat(v, \'"></div>\')\r\n                    );\r\n                h(d, "".concat(g, "-video gvideo")),\r\n                    d.appendChild(w),\r\n                    d.setAttribute("data-id", o),\r\n                    d.setAttribute("data-index", i);\r\n                var C = O(s.settings.plyr, "config")\r\n                        ? s.settings.plyr.config\r\n                        : {},\r\n                    k = new Plyr("#" + o, C);\r\n                k.on("ready", function (e) {\r\n                    var t = e.detail.plyr;\r\n                    (a[o] = t), T(n) && n();\r\n                }),\r\n                    b(\r\n                        function () {\r\n                            return (\r\n                                e.querySelector("iframe") &&\r\n                                "true" ==\r\n                                    e.querySelector("iframe").dataset.ready\r\n                            );\r\n                        },\r\n                        function () {\r\n                            s.resize(e);\r\n                        }\r\n                    ),\r\n                    k.on("enterfullscreen", R),\r\n                    k.on("exitfullscreen", R);\r\n            });\r\n    }\r\n    function R(e) {\r\n        var t = u(e.target, ".gslide-media");\r\n        "enterfullscreen" == e.type && h(t, "fullscreen"),\r\n            "exitfullscreen" == e.type && d(t, "fullscreen");\r\n    }\r\n    function G(e, t, i, n) {\r\n        var s,\r\n            l = this,\r\n            o = e.querySelector(".gslide-media"),\r\n            r = !(!O(t, "href") || !t.href) && t.href.split("#").pop().trim(),\r\n            d = !(!O(t, "content") || !t.content) && t.content;\r\n        if (\r\n            d &&\r\n            (C(d) &&\r\n                (s = m(\'<div class="ginlined-content">\'.concat(d, "</div>"))),\r\n            k(d))\r\n        ) {\r\n            "none" == d.style.display && (d.style.display = "block");\r\n            var c = document.createElement("div");\r\n            (c.className = "ginlined-content"), c.appendChild(d), (s = c);\r\n        }\r\n        if (r) {\r\n            var u = document.getElementById(r);\r\n            if (!u) return !1;\r\n            var g = u.cloneNode(!0);\r\n            (g.style.height = t.height),\r\n                (g.style.maxWidth = t.width),\r\n                h(g, "ginlined-content"),\r\n                (s = g);\r\n        }\r\n        if (!s)\r\n            return (\r\n                console.error("Unable to append inline slide content", t), !1\r\n            );\r\n        (o.style.height = t.height),\r\n            (o.style.width = t.width),\r\n            o.appendChild(s),\r\n            (this.events["inlineclose" + r] = a("click", {\r\n                onElement: o.querySelectorAll(".gtrigger-close"),\r\n                withCallback: function (e) {\r\n                    e.preventDefault(), l.close();\r\n                },\r\n            })),\r\n            T(n) && n();\r\n    }\r\n    function Z(e, t, i, n) {\r\n        var s = e.querySelector(".gslide-media"),\r\n            l = (function (e) {\r\n                var t = e.url,\r\n                    i = e.allow,\r\n                    n = e.callback,\r\n                    s = e.appendTo,\r\n                    l = document.createElement("iframe");\r\n                return (\r\n                    (l.className = "vimeo-video gvideo"),\r\n                    (l.src = t),\r\n                    (l.style.width = "100%"),\r\n                    (l.style.height = "100%"),\r\n                    i && l.setAttribute("allow", i),\r\n                    (l.onload = function () {\r\n                        h(l, "node-ready"), T(n) && n();\r\n                    }),\r\n                    s && s.appendChild(l),\r\n                    l\r\n                );\r\n            })({ url: t.href, callback: n });\r\n        (s.parentNode.style.maxWidth = t.width),\r\n            (s.parentNode.style.height = t.height),\r\n            s.appendChild(l);\r\n    }\r\n    var $ = (function () {\r\n            function e() {\r\n                var i =\r\n                    arguments.length > 0 && void 0 !== arguments[0]\r\n                        ? arguments[0]\r\n                        : {};\r\n                t(this, e),\r\n                    (this.defaults = {\r\n                        href: "",\r\n                        sizes: "",\r\n                        srcset: "",\r\n                        title: "",\r\n                        type: "",\r\n                        description: "",\r\n                        alt: "",\r\n                        descPosition: "bottom",\r\n                        effect: "",\r\n                        width: "",\r\n                        height: "",\r\n                        content: !1,\r\n                        zoomable: !0,\r\n                        draggable: !0,\r\n                    }),\r\n                    L(i) && (this.defaults = l(this.defaults, i));\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "sourceType",\r\n                        value: function (e) {\r\n                            var t = e;\r\n                            if (\r\n                                null !==\r\n                                (e = e.toLowerCase()).match(\r\n                                    /\\.(jpeg|jpg|jpe|gif|png|apn|webp|avif|svg)/\r\n                                )\r\n                            )\r\n                                return "image";\r\n                            if (\r\n                                e.match(\r\n                                    /(youtube\\.com|youtube-nocookie\\.com)\\/watch\\?v=([a-zA-Z0-9\\-_]+)/\r\n                                ) ||\r\n                                e.match(/youtu\\.be\\/([a-zA-Z0-9\\-_]+)/) ||\r\n                                e.match(\r\n                                    /(youtube\\.com|youtube-nocookie\\.com)\\/embed\\/([a-zA-Z0-9\\-_]+)/\r\n                                )\r\n                            )\r\n                                return "video";\r\n                            if (e.match(/vimeo\\.com\\/([0-9]*)/)) return "video";\r\n                            if (null !== e.match(/\\.(mp4|ogg|webm|mov)/))\r\n                                return "video";\r\n                            if (null !== e.match(/\\.(mp3|wav|wma|aac|ogg)/))\r\n                                return "audio";\r\n                            if (\r\n                                e.indexOf("#") > -1 &&\r\n                                "" !== t.split("#").pop().trim()\r\n                            )\r\n                                return "inline";\r\n                            return e.indexOf("goajax=true") > -1\r\n                                ? "ajax"\r\n                                : "external";\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "parseConfig",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = l(\r\n                                    { descPosition: t.descPosition },\r\n                                    this.defaults\r\n                                );\r\n                            if (L(e) && !k(e)) {\r\n                                O(e, "type") ||\r\n                                    (O(e, "content") && e.content\r\n                                        ? (e.type = "inline")\r\n                                        : O(e, "href") &&\r\n                                          (e.type = this.sourceType(e.href)));\r\n                                var s = l(n, e);\r\n                                return this.setSize(s, t), s;\r\n                            }\r\n                            var r = "",\r\n                                a = e.getAttribute("data-glightbox"),\r\n                                h = e.nodeName.toLowerCase();\r\n                            if (\r\n                                ("a" === h && (r = e.href),\r\n                                "img" === h && ((r = e.src), (n.alt = e.alt)),\r\n                                (n.href = r),\r\n                                o(n, function (s, l) {\r\n                                    O(t, l) && "width" !== l && (n[l] = t[l]);\r\n                                    var o = e.dataset[l];\r\n                                    I(o) || (n[l] = i.sanitizeValue(o));\r\n                                }),\r\n                                n.content && (n.type = "inline"),\r\n                                !n.type && r && (n.type = this.sourceType(r)),\r\n                                I(a))\r\n                            ) {\r\n                                if (!n.title && "a" == h) {\r\n                                    var d = e.title;\r\n                                    I(d) || "" === d || (n.title = d);\r\n                                }\r\n                                if (!n.title && "img" == h) {\r\n                                    var c = e.alt;\r\n                                    I(c) || "" === c || (n.title = c);\r\n                                }\r\n                            } else {\r\n                                var u = [];\r\n                                o(n, function (e, t) {\r\n                                    u.push(";\\\\s?" + t);\r\n                                }),\r\n                                    (u = u.join("\\\\s?:|")),\r\n                                    "" !== a.trim() &&\r\n                                        o(n, function (e, t) {\r\n                                            var s = a,\r\n                                                l = new RegExp(\r\n                                                    "s?" +\r\n                                                        t +\r\n                                                        "s?:s?(.*?)(" +\r\n                                                        u +\r\n                                                        "s?:|$)"\r\n                                                ),\r\n                                                o = s.match(l);\r\n                                            if (o && o.length && o[1]) {\r\n                                                var r = o[1]\r\n                                                    .trim()\r\n                                                    .replace(/;\\s*$/, "");\r\n                                                n[t] = i.sanitizeValue(r);\r\n                                            }\r\n                                        });\r\n                            }\r\n                            if (\r\n                                n.description &&\r\n                                "." === n.description.substring(0, 1)\r\n                            ) {\r\n                                var g;\r\n                                try {\r\n                                    g = document.querySelector(\r\n                                        n.description\r\n                                    ).innerHTML;\r\n                                } catch (e) {\r\n                                    if (!(e instanceof DOMException)) throw e;\r\n                                }\r\n                                g && (n.description = g);\r\n                            }\r\n                            if (!n.description) {\r\n                                var v = e.querySelector(".glightbox-desc");\r\n                                v && (n.description = v.innerHTML);\r\n                            }\r\n                            return (\r\n                                this.setSize(n, t, e), (this.slideConfig = n), n\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setSize",\r\n                        value: function (e, t) {\r\n                            var i =\r\n                                    arguments.length > 2 &&\r\n                                    void 0 !== arguments[2]\r\n                                        ? arguments[2]\r\n                                        : null,\r\n                                n =\r\n                                    "video" == e.type\r\n                                        ? this.checkSize(t.videosWidth)\r\n                                        : this.checkSize(t.width),\r\n                                s = this.checkSize(t.height);\r\n                            return (\r\n                                (e.width =\r\n                                    O(e, "width") && "" !== e.width\r\n                                        ? this.checkSize(e.width)\r\n                                        : n),\r\n                                (e.height =\r\n                                    O(e, "height") && "" !== e.height\r\n                                        ? this.checkSize(e.height)\r\n                                        : s),\r\n                                i &&\r\n                                    "image" == e.type &&\r\n                                    ((e._hasCustomWidth = !!i.dataset.width),\r\n                                    (e._hasCustomHeight = !!i.dataset.height)),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "checkSize",\r\n                        value: function (e) {\r\n                            return M(e) ? "".concat(e, "px") : e;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "sanitizeValue",\r\n                        value: function (e) {\r\n                            return "true" !== e && "false" !== e\r\n                                ? e\r\n                                : "true" === e;\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        U = (function () {\r\n            function e(i, n, s) {\r\n                t(this, e),\r\n                    (this.element = i),\r\n                    (this.instance = n),\r\n                    (this.index = s);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "setContent",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : null,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1] &&\r\n                                    arguments[1];\r\n                            if (c(t, "loaded")) return !1;\r\n                            var n = this.instance.settings,\r\n                                s = this.slideConfig,\r\n                                l = w();\r\n                            T(n.beforeSlideLoad) &&\r\n                                n.beforeSlideLoad({\r\n                                    index: this.index,\r\n                                    slide: t,\r\n                                    player: !1,\r\n                                });\r\n                            var o = s.type,\r\n                                r = s.descPosition,\r\n                                a = t.querySelector(".gslide-media"),\r\n                                d = t.querySelector(".gslide-title"),\r\n                                u = t.querySelector(".gslide-desc"),\r\n                                g = t.querySelector(".gdesc-inner"),\r\n                                v = i,\r\n                                f = "gSlideTitle_" + this.index,\r\n                                p = "gSlideDesc_" + this.index;\r\n                            if (\r\n                                (T(n.afterSlideLoad) &&\r\n                                    (v = function () {\r\n                                        T(i) && i(),\r\n                                            n.afterSlideLoad({\r\n                                                index: e.index,\r\n                                                slide: t,\r\n                                                player: e.instance.getSlidePlayerInstance(\r\n                                                    e.index\r\n                                                ),\r\n                                            });\r\n                                    }),\r\n                                "" == s.title && "" == s.description\r\n                                    ? g &&\r\n                                      g.parentNode.parentNode.removeChild(\r\n                                          g.parentNode\r\n                                      )\r\n                                    : (d && "" !== s.title\r\n                                          ? ((d.id = f),\r\n                                            (d.innerHTML = s.title))\r\n                                          : d.parentNode.removeChild(d),\r\n                                      u && "" !== s.description\r\n                                          ? ((u.id = p),\r\n                                            l && n.moreLength > 0\r\n                                                ? ((s.smallDescription =\r\n                                                      this.slideShortDesc(\r\n                                                          s.description,\r\n                                                          n.moreLength,\r\n                                                          n.moreText\r\n                                                      )),\r\n                                                  (u.innerHTML =\r\n                                                      s.smallDescription),\r\n                                                  this.descriptionEvents(u, s))\r\n                                                : (u.innerHTML = s.description))\r\n                                          : u.parentNode.removeChild(u),\r\n                                      h(a.parentNode, "desc-".concat(r)),\r\n                                      h(\r\n                                          g.parentNode,\r\n                                          "description-".concat(r)\r\n                                      )),\r\n                                h(a, "gslide-".concat(o)),\r\n                                h(t, "loaded"),\r\n                                "video" !== o)\r\n                            ) {\r\n                                if ("external" !== o)\r\n                                    return "inline" === o\r\n                                        ? (G.apply(this.instance, [\r\n                                              t,\r\n                                              s,\r\n                                              this.index,\r\n                                              v,\r\n                                          ]),\r\n                                          void (\r\n                                              s.draggable &&\r\n                                              new V({\r\n                                                  dragEl: t.querySelector(\r\n                                                      ".gslide-inline"\r\n                                                  ),\r\n                                                  toleranceX: n.dragToleranceX,\r\n                                                  toleranceY: n.dragToleranceY,\r\n                                                  slide: t,\r\n                                                  instance: this.instance,\r\n                                              })\r\n                                          ))\r\n                                        : void ("image" !== o\r\n                                              ? T(v) && v()\r\n                                              : j(\r\n                                                    t,\r\n                                                    s,\r\n                                                    this.index,\r\n                                                    function () {\r\n                                                        var i =\r\n                                                            t.querySelector(\r\n                                                                "img"\r\n                                                            );\r\n                                                        s.draggable &&\r\n                                                            new V({\r\n                                                                dragEl: i,\r\n                                                                toleranceX:\r\n                                                                    n.dragToleranceX,\r\n                                                                toleranceY:\r\n                                                                    n.dragToleranceY,\r\n                                                                slide: t,\r\n                                                                instance:\r\n                                                                    e.instance,\r\n                                                            }),\r\n                                                            s.zoomable &&\r\n                                                                i.naturalWidth >\r\n                                                                    i.offsetWidth &&\r\n                                                                (h(\r\n                                                                    i,\r\n                                                                    "zoomable"\r\n                                                                ),\r\n                                                                new H(\r\n                                                                    i,\r\n                                                                    t,\r\n                                                                    function () {\r\n                                                                        e.instance.resize();\r\n                                                                    }\r\n                                                                )),\r\n                                                            T(v) && v();\r\n                                                    }\r\n                                                ));\r\n                                Z.apply(this, [t, s, this.index, v]);\r\n                            } else\r\n                                F.apply(this.instance, [t, s, this.index, v]);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideShortDesc",\r\n                        value: function (e) {\r\n                            var t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : 50,\r\n                                i =\r\n                                    arguments.length > 2 &&\r\n                                    void 0 !== arguments[2] &&\r\n                                    arguments[2],\r\n                                n = document.createElement("div");\r\n                            n.innerHTML = e;\r\n                            var s = n.innerText,\r\n                                l = i;\r\n                            if ((e = s.trim()).length <= t) return e;\r\n                            var o = e.substr(0, t - 1);\r\n                            return l\r\n                                ? ((n = null),\r\n                                  o +\r\n                                      \'... <a href="#" class="desc-more">\' +\r\n                                      i +\r\n                                      "</a>")\r\n                                : o;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "descriptionEvents",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = e.querySelector(".desc-more");\r\n                            if (!n) return !1;\r\n                            a("click", {\r\n                                onElement: n,\r\n                                withCallback: function (e, n) {\r\n                                    e.preventDefault();\r\n                                    var s = document.body,\r\n                                        l = u(n, ".gslide-desc");\r\n                                    if (!l) return !1;\r\n                                    (l.innerHTML = t.description),\r\n                                        h(s, "gdesc-open");\r\n                                    var o = a("click", {\r\n                                        onElement: [\r\n                                            s,\r\n                                            u(l, ".gslide-description"),\r\n                                        ],\r\n                                        withCallback: function (e, n) {\r\n                                            "a" !==\r\n                                                e.target.nodeName.toLowerCase() &&\r\n                                                (d(s, "gdesc-open"),\r\n                                                h(s, "gdesc-closed"),\r\n                                                (l.innerHTML =\r\n                                                    t.smallDescription),\r\n                                                i.descriptionEvents(l, t),\r\n                                                setTimeout(function () {\r\n                                                    d(s, "gdesc-closed");\r\n                                                }, 400),\r\n                                                o.destroy());\r\n                                        },\r\n                                    });\r\n                                },\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "create",\r\n                        value: function () {\r\n                            return m(this.instance.settings.slideHTML);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getConfig",\r\n                        value: function () {\r\n                            k(this.element) ||\r\n                                this.element.hasOwnProperty("draggable") ||\r\n                                (this.element.draggable =\r\n                                    this.instance.settings.draggable);\r\n                            var e = new $(\r\n                                this.instance.settings.slideExtraAttributes\r\n                            );\r\n                            return (\r\n                                (this.slideConfig = e.parseConfig(\r\n                                    this.element,\r\n                                    this.instance.settings\r\n                                )),\r\n                                this.slideConfig\r\n                            );\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })(),\r\n        J = w(),\r\n        K =\r\n            null !== w() ||\r\n            void 0 !== document.createTouch ||\r\n            "ontouchstart" in window ||\r\n            "onmsgesturechange" in window ||\r\n            navigator.msMaxTouchPoints,\r\n        Q = document.getElementsByTagName("html")[0],\r\n        ee = {\r\n            selector: ".glightbox",\r\n            elements: null,\r\n            skin: "clean",\r\n            theme: "clean",\r\n            closeButton: !0,\r\n            startAt: null,\r\n            autoplayVideos: !0,\r\n            autofocusVideos: !0,\r\n            descPosition: "bottom",\r\n            width: "900px",\r\n            height: "506px",\r\n            videosWidth: "960px",\r\n            beforeSlideChange: null,\r\n            afterSlideChange: null,\r\n            beforeSlideLoad: null,\r\n            afterSlideLoad: null,\r\n            slideInserted: null,\r\n            slideRemoved: null,\r\n            slideExtraAttributes: null,\r\n            onOpen: null,\r\n            onClose: null,\r\n            loop: !1,\r\n            zoomable: !0,\r\n            draggable: !0,\r\n            dragAutoSnap: !1,\r\n            dragToleranceX: 40,\r\n            dragToleranceY: 65,\r\n            preload: !0,\r\n            oneSlidePerOpen: !1,\r\n            touchNavigation: !0,\r\n            touchFollowAxis: !0,\r\n            keyboardNavigation: !0,\r\n            closeOnOutsideClick: !0,\r\n            plugins: !1,\r\n            plyr: {\r\n                css: "https://cdn.plyr.io/3.6.8/plyr.css",\r\n                js: "https://cdn.plyr.io/3.6.8/plyr.js",\r\n                config: {\r\n                    ratio: "16:9",\r\n                    fullscreen: { enabled: !0, iosNative: !0 },\r\n                    youtube: {\r\n                        noCookie: !0,\r\n                        rel: 0,\r\n                        showinfo: 0,\r\n                        iv_load_policy: 3,\r\n                    },\r\n                    vimeo: {\r\n                        byline: !1,\r\n                        portrait: !1,\r\n                        title: !1,\r\n                        transparent: !1,\r\n                    },\r\n                },\r\n            },\r\n            openEffect: "zoom",\r\n            closeEffect: "zoom",\r\n            slideEffect: "slide",\r\n            moreText: "See more",\r\n            moreLength: 60,\r\n            cssEfects: {\r\n                fade: { in: "fadeIn", out: "fadeOut" },\r\n                zoom: { in: "zoomIn", out: "zoomOut" },\r\n                slide: { in: "slideInRight", out: "slideOutLeft" },\r\n                slideBack: { in: "slideInLeft", out: "slideOutRight" },\r\n                none: { in: "none", out: "none" },\r\n            },\r\n            svg: {\r\n                close: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 512 512" xml:space="preserve"><g><g><path d="M505.943,6.058c-8.077-8.077-21.172-8.077-29.249,0L6.058,476.693c-8.077,8.077-8.077,21.172,0,29.249C10.096,509.982,15.39,512,20.683,512c5.293,0,10.586-2.019,14.625-6.059L505.943,35.306C514.019,27.23,514.019,14.135,505.943,6.058z"/></g></g><g><g><path d="M505.942,476.694L35.306,6.059c-8.076-8.077-21.172-8.077-29.248,0c-8.077,8.076-8.077,21.171,0,29.248l470.636,470.636c4.038,4.039,9.332,6.058,14.625,6.058c5.293,0,10.587-2.019,14.624-6.057C514.018,497.866,514.018,484.771,505.942,476.694z"/></g></g></svg>\',\r\n                next: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"> <g><path d="M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z"/></g></svg>\',\r\n                prev: \'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 477.175 477.175" xml:space="preserve"><g><path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/></g></svg>\',\r\n            },\r\n            slideHTML:\r\n                \'<div class="gslide">\\n    <div class="gslide-inner-content">\\n        <div class="ginner-container">\\n            <div class="gslide-media">\\n            </div>\\n            <div class="gslide-description">\\n                <div class="gdesc-inner">\\n                    <h4 class="gslide-title"></h4>\\n                    <div class="gslide-desc"></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n</div>\',\r\n            lightboxHTML:\r\n                \'<div id="glightbox-body" class="glightbox-container" tabindex="-1" role="dialog" aria-hidden="false">\\n    <div class="gloader visible"></div>\\n    <div class="goverlay"></div>\\n    <div class="gcontainer">\\n    <div id="glightbox-slider" class="gslider"></div>\\n    <button class="gclose gbtn" aria-label="Close" data-taborder="3">{closeSVG}</button>\\n    <button class="gprev gbtn" aria-label="Previous" data-taborder="2">{prevSVG}</button>\\n    <button class="gnext gbtn" aria-label="Next" data-taborder="1">{nextSVG}</button>\\n</div>\\n</div>\',\r\n        },\r\n        te = (function () {\r\n            function e() {\r\n                var i =\r\n                    arguments.length > 0 && void 0 !== arguments[0]\r\n                        ? arguments[0]\r\n                        : {};\r\n                t(this, e),\r\n                    (this.customOptions = i),\r\n                    (this.settings = l(ee, i)),\r\n                    (this.effectsClasses = this.getAnimationClasses()),\r\n                    (this.videoPlayers = {}),\r\n                    (this.apiEvents = []),\r\n                    (this.fullElementsList = !1);\r\n            }\r\n            return (\r\n                n(e, [\r\n                    {\r\n                        key: "init",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t = this.getSelector();\r\n                            t &&\r\n                                (this.baseEvents = a("click", {\r\n                                    onElement: t,\r\n                                    withCallback: function (t, i) {\r\n                                        t.preventDefault(), e.open(i);\r\n                                    },\r\n                                })),\r\n                                (this.elements = this.getElements());\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "open",\r\n                        value: function () {\r\n                            var e =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : null,\r\n                                t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : null;\r\n                            if (0 == this.elements.length) return !1;\r\n                            (this.activeSlide = null),\r\n                                (this.prevActiveSlideIndex = null),\r\n                                (this.prevActiveSlide = null);\r\n                            var i = M(t) ? t : this.settings.startAt;\r\n                            if (k(e)) {\r\n                                var n = e.getAttribute("data-gallery");\r\n                                n &&\r\n                                    ((this.fullElementsList = this.elements),\r\n                                    (this.elements = this.getGalleryElements(\r\n                                        this.elements,\r\n                                        n\r\n                                    ))),\r\n                                    I(i) &&\r\n                                        (i = this.getElementIndex(e)) < 0 &&\r\n                                        (i = 0);\r\n                            }\r\n                            M(i) || (i = 0),\r\n                                this.build(),\r\n                                g(\r\n                                    this.overlay,\r\n                                    "none" == this.settings.openEffect\r\n                                        ? "none"\r\n                                        : this.settings.cssEfects.fade.in\r\n                                );\r\n                            var s = document.body,\r\n                                l =\r\n                                    window.innerWidth -\r\n                                    document.documentElement.clientWidth;\r\n                            if (l > 0) {\r\n                                var o = document.createElement("style");\r\n                                (o.type = "text/css"),\r\n                                    (o.className = "gcss-styles"),\r\n                                    (o.innerText =\r\n                                        ".gscrollbar-fixer {margin-right: ".concat(\r\n                                            l,\r\n                                            "px}"\r\n                                        )),\r\n                                    document.head.appendChild(o),\r\n                                    h(s, "gscrollbar-fixer");\r\n                            }\r\n                            h(s, "glightbox-open"),\r\n                                h(Q, "glightbox-open"),\r\n                                J &&\r\n                                    (h(document.body, "glightbox-mobile"),\r\n                                    (this.settings.slideEffect = "slide")),\r\n                                this.showSlide(i, !0),\r\n                                1 == this.elements.length\r\n                                    ? (h(\r\n                                          this.prevButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ),\r\n                                      h(\r\n                                          this.nextButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ))\r\n                                    : (d(\r\n                                          this.prevButton,\r\n                                          "glightbox-button-hidden"\r\n                                      ),\r\n                                      d(\r\n                                          this.nextButton,\r\n                                          "glightbox-button-hidden"\r\n                                      )),\r\n                                (this.lightboxOpen = !0),\r\n                                this.trigger("open"),\r\n                                T(this.settings.onOpen) &&\r\n                                    this.settings.onOpen(),\r\n                                K && this.settings.touchNavigation && B(this),\r\n                                this.settings.keyboardNavigation && X(this);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "openAt",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : 0;\r\n                            this.open(null, e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "showSlide",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : 0,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1] &&\r\n                                    arguments[1];\r\n                            f(this.loader), (this.index = parseInt(t));\r\n                            var n =\r\n                                this.slidesContainer.querySelector(".current");\r\n                            n && d(n, "current"), this.slideAnimateOut();\r\n                            var s =\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[t];\r\n                            if (c(s, "loaded"))\r\n                                this.slideAnimateIn(s, i), p(this.loader);\r\n                            else {\r\n                                f(this.loader);\r\n                                var l = this.elements[t],\r\n                                    o = {\r\n                                        index: this.index,\r\n                                        slide: s,\r\n                                        slideNode: s,\r\n                                        slideConfig: l.slideConfig,\r\n                                        slideIndex: this.index,\r\n                                        trigger: l.node,\r\n                                        player: null,\r\n                                    };\r\n                                this.trigger("slide_before_load", o),\r\n                                    l.instance.setContent(s, function () {\r\n                                        p(e.loader),\r\n                                            e.resize(),\r\n                                            e.slideAnimateIn(s, i),\r\n                                            e.trigger("slide_after_load", o);\r\n                                    });\r\n                            }\r\n                            (this.slideDescription = s.querySelector(\r\n                                ".gslide-description"\r\n                            )),\r\n                                (this.slideDescriptionContained =\r\n                                    this.slideDescription &&\r\n                                    c(\r\n                                        this.slideDescription.parentNode,\r\n                                        "gslide-media"\r\n                                    )),\r\n                                this.settings.preload &&\r\n                                    (this.preloadSlide(t + 1),\r\n                                    this.preloadSlide(t - 1)),\r\n                                this.updateNavigationClasses(),\r\n                                (this.activeSlide = s);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "preloadSlide",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            if (e < 0 || e > this.elements.length - 1)\r\n                                return !1;\r\n                            if (I(this.elements[e])) return !1;\r\n                            var i =\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[e];\r\n                            if (c(i, "loaded")) return !1;\r\n                            var n = this.elements[e],\r\n                                s = n.type,\r\n                                l = {\r\n                                    index: e,\r\n                                    slide: i,\r\n                                    slideNode: i,\r\n                                    slideConfig: n.slideConfig,\r\n                                    slideIndex: e,\r\n                                    trigger: n.node,\r\n                                    player: null,\r\n                                };\r\n                            this.trigger("slide_before_load", l),\r\n                                "video" == s || "external" == s\r\n                                    ? setTimeout(function () {\r\n                                          n.instance.setContent(i, function () {\r\n                                              t.trigger("slide_after_load", l);\r\n                                          });\r\n                                      }, 200)\r\n                                    : n.instance.setContent(i, function () {\r\n                                          t.trigger("slide_after_load", l);\r\n                                      });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "prevSlide",\r\n                        value: function () {\r\n                            this.goToSlide(this.index - 1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "nextSlide",\r\n                        value: function () {\r\n                            this.goToSlide(this.index + 1);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "goToSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 &&\r\n                                void 0 !== arguments[0] &&\r\n                                arguments[0];\r\n                            if (\r\n                                ((this.prevActiveSlide = this.activeSlide),\r\n                                (this.prevActiveSlideIndex = this.index),\r\n                                !this.loop() &&\r\n                                    (e < 0 || e > this.elements.length - 1))\r\n                            )\r\n                                return !1;\r\n                            e < 0\r\n                                ? (e = this.elements.length - 1)\r\n                                : e >= this.elements.length && (e = 0),\r\n                                this.showSlide(e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "insertSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                    arguments.length > 0 &&\r\n                                    void 0 !== arguments[0]\r\n                                        ? arguments[0]\r\n                                        : {},\r\n                                t =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : -1;\r\n                            t < 0 && (t = this.elements.length);\r\n                            var i = new U(e, this, t),\r\n                                n = i.getConfig(),\r\n                                s = l({}, n),\r\n                                o = i.create(),\r\n                                r = this.elements.length - 1;\r\n                            (s.index = t),\r\n                                (s.node = !1),\r\n                                (s.instance = i),\r\n                                (s.slideConfig = n),\r\n                                this.elements.splice(t, 0, s);\r\n                            var a = null,\r\n                                h = null;\r\n                            if (this.slidesContainer) {\r\n                                if (t > r) this.slidesContainer.appendChild(o);\r\n                                else {\r\n                                    var d =\r\n                                        this.slidesContainer.querySelectorAll(\r\n                                            ".gslide"\r\n                                        )[t];\r\n                                    this.slidesContainer.insertBefore(o, d);\r\n                                }\r\n                                ((this.settings.preload &&\r\n                                    0 == this.index &&\r\n                                    0 == t) ||\r\n                                    this.index - 1 == t ||\r\n                                    this.index + 1 == t) &&\r\n                                    this.preloadSlide(t),\r\n                                    0 == this.index &&\r\n                                        0 == t &&\r\n                                        (this.index = 1),\r\n                                    this.updateNavigationClasses(),\r\n                                    (a =\r\n                                        this.slidesContainer.querySelectorAll(\r\n                                            ".gslide"\r\n                                        )[t]),\r\n                                    (h = this.getSlidePlayerInstance(t)),\r\n                                    (s.slideNode = a);\r\n                            }\r\n                            this.trigger("slide_inserted", {\r\n                                index: t,\r\n                                slide: a,\r\n                                slideNode: a,\r\n                                slideConfig: n,\r\n                                slideIndex: t,\r\n                                trigger: null,\r\n                                player: h,\r\n                            }),\r\n                                T(this.settings.slideInserted) &&\r\n                                    this.settings.slideInserted({\r\n                                        index: t,\r\n                                        slide: a,\r\n                                        player: h,\r\n                                    });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "removeSlide",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : -1;\r\n                            if (e < 0 || e > this.elements.length - 1)\r\n                                return !1;\r\n                            var t =\r\n                                this.slidesContainer &&\r\n                                this.slidesContainer.querySelectorAll(\r\n                                    ".gslide"\r\n                                )[e];\r\n                            t &&\r\n                                (this.getActiveSlideIndex() == e &&\r\n                                    (e == this.elements.length - 1\r\n                                        ? this.prevSlide()\r\n                                        : this.nextSlide()),\r\n                                t.parentNode.removeChild(t)),\r\n                                this.elements.splice(e, 1),\r\n                                this.trigger("slide_removed", e),\r\n                                T(this.settings.slideRemoved) &&\r\n                                    this.settings.slideRemoved(e);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideAnimateIn",\r\n                        value: function (e, t) {\r\n                            var i = this,\r\n                                n = e.querySelector(".gslide-media"),\r\n                                s = e.querySelector(".gslide-description"),\r\n                                l = {\r\n                                    index: this.prevActiveSlideIndex,\r\n                                    slide: this.prevActiveSlide,\r\n                                    slideNode: this.prevActiveSlide,\r\n                                    slideIndex: this.prevActiveSlide,\r\n                                    slideConfig: I(this.prevActiveSlideIndex)\r\n                                        ? null\r\n                                        : this.elements[\r\n                                              this.prevActiveSlideIndex\r\n                                          ].slideConfig,\r\n                                    trigger: I(this.prevActiveSlideIndex)\r\n                                        ? null\r\n                                        : this.elements[\r\n                                              this.prevActiveSlideIndex\r\n                                          ].node,\r\n                                    player: this.getSlidePlayerInstance(\r\n                                        this.prevActiveSlideIndex\r\n                                    ),\r\n                                },\r\n                                o = {\r\n                                    index: this.index,\r\n                                    slide: this.activeSlide,\r\n                                    slideNode: this.activeSlide,\r\n                                    slideConfig:\r\n                                        this.elements[this.index].slideConfig,\r\n                                    slideIndex: this.index,\r\n                                    trigger: this.elements[this.index].node,\r\n                                    player: this.getSlidePlayerInstance(\r\n                                        this.index\r\n                                    ),\r\n                                };\r\n                            if (\r\n                                (n.offsetWidth > 0 &&\r\n                                    s &&\r\n                                    (p(s), (s.style.display = "")),\r\n                                d(e, this.effectsClasses),\r\n                                t)\r\n                            )\r\n                                g(\r\n                                    e,\r\n                                    this.settings.cssEfects[\r\n                                        this.settings.openEffect\r\n                                    ].in,\r\n                                    function () {\r\n                                        i.settings.autoplayVideos &&\r\n                                            i.slidePlayerPlay(e),\r\n                                            i.trigger("slide_changed", {\r\n                                                prev: l,\r\n                                                current: o,\r\n                                            }),\r\n                                            T(i.settings.afterSlideChange) &&\r\n                                                i.settings.afterSlideChange.apply(\r\n                                                    i,\r\n                                                    [l, o]\r\n                                                );\r\n                                    }\r\n                                );\r\n                            else {\r\n                                var r = this.settings.slideEffect,\r\n                                    a =\r\n                                        "none" !== r\r\n                                            ? this.settings.cssEfects[r].in\r\n                                            : r;\r\n                                this.prevActiveSlideIndex > this.index &&\r\n                                    "slide" == this.settings.slideEffect &&\r\n                                    (a = this.settings.cssEfects.slideBack.in),\r\n                                    g(e, a, function () {\r\n                                        i.settings.autoplayVideos &&\r\n                                            i.slidePlayerPlay(e),\r\n                                            i.trigger("slide_changed", {\r\n                                                prev: l,\r\n                                                current: o,\r\n                                            }),\r\n                                            T(i.settings.afterSlideChange) &&\r\n                                                i.settings.afterSlideChange.apply(\r\n                                                    i,\r\n                                                    [l, o]\r\n                                                );\r\n                                    });\r\n                            }\r\n                            setTimeout(function () {\r\n                                i.resize(e);\r\n                            }, 100),\r\n                                h(e, "current");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slideAnimateOut",\r\n                        value: function () {\r\n                            if (!this.prevActiveSlide) return !1;\r\n                            var e = this.prevActiveSlide;\r\n                            d(e, this.effectsClasses), h(e, "prev");\r\n                            var t = this.settings.slideEffect,\r\n                                i =\r\n                                    "none" !== t\r\n                                        ? this.settings.cssEfects[t].out\r\n                                        : t;\r\n                            this.slidePlayerPause(e),\r\n                                this.trigger("slide_before_change", {\r\n                                    prev: {\r\n                                        index: this.prevActiveSlideIndex,\r\n                                        slide: this.prevActiveSlide,\r\n                                        slideNode: this.prevActiveSlide,\r\n                                        slideIndex: this.prevActiveSlideIndex,\r\n                                        slideConfig: I(\r\n                                            this.prevActiveSlideIndex\r\n                                        )\r\n                                            ? null\r\n                                            : this.elements[\r\n                                                  this.prevActiveSlideIndex\r\n                                              ].slideConfig,\r\n                                        trigger: I(this.prevActiveSlideIndex)\r\n                                            ? null\r\n                                            : this.elements[\r\n                                                  this.prevActiveSlideIndex\r\n                                              ].node,\r\n                                        player: this.getSlidePlayerInstance(\r\n                                            this.prevActiveSlideIndex\r\n                                        ),\r\n                                    },\r\n                                    current: {\r\n                                        index: this.index,\r\n                                        slide: this.activeSlide,\r\n                                        slideNode: this.activeSlide,\r\n                                        slideIndex: this.index,\r\n                                        slideConfig:\r\n                                            this.elements[this.index]\r\n                                                .slideConfig,\r\n                                        trigger: this.elements[this.index].node,\r\n                                        player: this.getSlidePlayerInstance(\r\n                                            this.index\r\n                                        ),\r\n                                    },\r\n                                }),\r\n                                T(this.settings.beforeSlideChange) &&\r\n                                    this.settings.beforeSlideChange.apply(\r\n                                        this,\r\n                                        [\r\n                                            {\r\n                                                index: this\r\n                                                    .prevActiveSlideIndex,\r\n                                                slide: this.prevActiveSlide,\r\n                                                player: this.getSlidePlayerInstance(\r\n                                                    this.prevActiveSlideIndex\r\n                                                ),\r\n                                            },\r\n                                            {\r\n                                                index: this.index,\r\n                                                slide: this.activeSlide,\r\n                                                player: this.getSlidePlayerInstance(\r\n                                                    this.index\r\n                                                ),\r\n                                            },\r\n                                        ]\r\n                                    ),\r\n                                this.prevActiveSlideIndex > this.index &&\r\n                                    "slide" == this.settings.slideEffect &&\r\n                                    (i = this.settings.cssEfects.slideBack.out),\r\n                                g(e, i, function () {\r\n                                    var t =\r\n                                            e.querySelector(\r\n                                                ".ginner-container"\r\n                                            ),\r\n                                        i = e.querySelector(".gslide-media"),\r\n                                        n = e.querySelector(\r\n                                            ".gslide-description"\r\n                                        );\r\n                                    (t.style.transform = ""),\r\n                                        (i.style.transform = ""),\r\n                                        d(i, "greset"),\r\n                                        (i.style.opacity = ""),\r\n                                        n && (n.style.opacity = ""),\r\n                                        d(e, "prev");\r\n                                });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getAllPlayers",\r\n                        value: function () {\r\n                            return this.videoPlayers;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getSlidePlayerInstance",\r\n                        value: function (e) {\r\n                            var t = "gvideo" + e,\r\n                                i = this.getAllPlayers();\r\n                            return !(!O(i, t) || !i[t]) && i[t];\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "stopSlideVideo",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            console.log(\r\n                                "stopSlideVideo is deprecated, use slidePlayerPause"\r\n                            );\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && i.playing && i.pause();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slidePlayerPause",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && i.playing && i.pause();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "playSlideVideo",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            console.log(\r\n                                "playSlideVideo is deprecated, use slidePlayerPlay"\r\n                            );\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i && !i.playing && i.play();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "slidePlayerPlay",\r\n                        value: function (e) {\r\n                            if (k(e)) {\r\n                                var t = e.querySelector(".gvideo-wrapper");\r\n                                t && (e = t.getAttribute("data-index"));\r\n                            }\r\n                            var i = this.getSlidePlayerInstance(e);\r\n                            i &&\r\n                                !i.playing &&\r\n                                (i.play(),\r\n                                this.settings.autofocusVideos &&\r\n                                    i.elements.container.focus());\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "setElements",\r\n                        value: function (e) {\r\n                            var t = this;\r\n                            this.settings.elements = !1;\r\n                            var i = [];\r\n                            e &&\r\n                                e.length &&\r\n                                o(e, function (e, n) {\r\n                                    var s = new U(e, t, n),\r\n                                        o = s.getConfig(),\r\n                                        r = l({}, o);\r\n                                    (r.slideConfig = o),\r\n                                        (r.instance = s),\r\n                                        (r.index = n),\r\n                                        i.push(r);\r\n                                }),\r\n                                (this.elements = i),\r\n                                this.lightboxOpen &&\r\n                                    ((this.slidesContainer.innerHTML = ""),\r\n                                    this.elements.length &&\r\n                                        (o(this.elements, function () {\r\n                                            var e = m(t.settings.slideHTML);\r\n                                            t.slidesContainer.appendChild(e);\r\n                                        }),\r\n                                        this.showSlide(0, !0)));\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getElementIndex",\r\n                        value: function (e) {\r\n                            var t = !1;\r\n                            return (\r\n                                o(this.elements, function (i, n) {\r\n                                    if (O(i, "node") && i.node == e)\r\n                                        return (t = n), !0;\r\n                                }),\r\n                                t\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getElements",\r\n                        value: function () {\r\n                            var e = this,\r\n                                t = [];\r\n                            (this.elements = this.elements\r\n                                ? this.elements\r\n                                : []),\r\n                                !I(this.settings.elements) &&\r\n                                    E(this.settings.elements) &&\r\n                                    this.settings.elements.length &&\r\n                                    o(this.settings.elements, function (i, n) {\r\n                                        var s = new U(i, e, n),\r\n                                            o = s.getConfig(),\r\n                                            r = l({}, o);\r\n                                        (r.node = !1),\r\n                                            (r.index = n),\r\n                                            (r.instance = s),\r\n                                            (r.slideConfig = o),\r\n                                            t.push(r);\r\n                                    });\r\n                            var i = !1;\r\n                            return (\r\n                                this.getSelector() &&\r\n                                    (i = document.querySelectorAll(\r\n                                        this.getSelector()\r\n                                    )),\r\n                                i\r\n                                    ? (o(i, function (i, n) {\r\n                                          var s = new U(i, e, n),\r\n                                              o = s.getConfig(),\r\n                                              r = l({}, o);\r\n                                          (r.node = i),\r\n                                              (r.index = n),\r\n                                              (r.instance = s),\r\n                                              (r.slideConfig = o),\r\n                                              (r.gallery =\r\n                                                  i.getAttribute(\r\n                                                      "data-gallery"\r\n                                                  )),\r\n                                              t.push(r);\r\n                                      }),\r\n                                      t)\r\n                                    : t\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getGalleryElements",\r\n                        value: function (e, t) {\r\n                            return e.filter(function (e) {\r\n                                return e.gallery == t;\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getSelector",\r\n                        value: function () {\r\n                            return (\r\n                                !this.settings.elements &&\r\n                                (this.settings.selector &&\r\n                                "data-" ==\r\n                                    this.settings.selector.substring(0, 5)\r\n                                    ? "*[".concat(this.settings.selector, "]")\r\n                                    : this.settings.selector)\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getActiveSlide",\r\n                        value: function () {\r\n                            return this.slidesContainer.querySelectorAll(\r\n                                ".gslide"\r\n                            )[this.index];\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getActiveSlideIndex",\r\n                        value: function () {\r\n                            return this.index;\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "getAnimationClasses",\r\n                        value: function () {\r\n                            var e = [];\r\n                            for (var t in this.settings.cssEfects)\r\n                                if (this.settings.cssEfects.hasOwnProperty(t)) {\r\n                                    var i = this.settings.cssEfects[t];\r\n                                    e.push("g".concat(i.in)),\r\n                                        e.push("g".concat(i.out));\r\n                                }\r\n                            return e.join(" ");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "build",\r\n                        value: function () {\r\n                            var e = this;\r\n                            if (this.built) return !1;\r\n                            var t = document.body.childNodes,\r\n                                i = [];\r\n                            o(t, function (e) {\r\n                                e.parentNode == document.body &&\r\n                                    "#" !== e.nodeName.charAt(0) &&\r\n                                    e.hasAttribute &&\r\n                                    !e.hasAttribute("aria-hidden") &&\r\n                                    (i.push(e),\r\n                                    e.setAttribute("aria-hidden", "true"));\r\n                            });\r\n                            var n = O(this.settings.svg, "next")\r\n                                    ? this.settings.svg.next\r\n                                    : "",\r\n                                s = O(this.settings.svg, "prev")\r\n                                    ? this.settings.svg.prev\r\n                                    : "",\r\n                                l = O(this.settings.svg, "close")\r\n                                    ? this.settings.svg.close\r\n                                    : "",\r\n                                r = this.settings.lightboxHTML;\r\n                            (r = m(\r\n                                (r = (r = (r = r.replace(\r\n                                    /{nextSVG}/g,\r\n                                    n\r\n                                )).replace(/{prevSVG}/g, s)).replace(\r\n                                    /{closeSVG}/g,\r\n                                    l\r\n                                ))\r\n                            )),\r\n                                document.body.appendChild(r);\r\n                            var d = document.getElementById("glightbox-body");\r\n                            this.modal = d;\r\n                            var g = d.querySelector(".gclose");\r\n                            (this.prevButton = d.querySelector(".gprev")),\r\n                                (this.nextButton = d.querySelector(".gnext")),\r\n                                (this.overlay = d.querySelector(".goverlay")),\r\n                                (this.loader = d.querySelector(".gloader")),\r\n                                (this.slidesContainer =\r\n                                    document.getElementById(\r\n                                        "glightbox-slider"\r\n                                    )),\r\n                                (this.bodyHiddenChildElms = i),\r\n                                (this.events = {}),\r\n                                h(\r\n                                    this.modal,\r\n                                    "glightbox-" + this.settings.skin\r\n                                ),\r\n                                this.settings.closeButton &&\r\n                                    g &&\r\n                                    (this.events.close = a("click", {\r\n                                        onElement: g,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.close();\r\n                                        },\r\n                                    })),\r\n                                g &&\r\n                                    !this.settings.closeButton &&\r\n                                    g.parentNode.removeChild(g),\r\n                                this.nextButton &&\r\n                                    (this.events.next = a("click", {\r\n                                        onElement: this.nextButton,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.nextSlide();\r\n                                        },\r\n                                    })),\r\n                                this.prevButton &&\r\n                                    (this.events.prev = a("click", {\r\n                                        onElement: this.prevButton,\r\n                                        withCallback: function (t, i) {\r\n                                            t.preventDefault(), e.prevSlide();\r\n                                        },\r\n                                    })),\r\n                                this.settings.closeOnOutsideClick &&\r\n                                    (this.events.outClose = a("click", {\r\n                                        onElement: d,\r\n                                        withCallback: function (t, i) {\r\n                                            e.preventOutsideClick ||\r\n                                                c(\r\n                                                    document.body,\r\n                                                    "glightbox-mobile"\r\n                                                ) ||\r\n                                                u(\r\n                                                    t.target,\r\n                                                    ".ginner-container"\r\n                                                ) ||\r\n                                                u(t.target, ".gbtn") ||\r\n                                                c(t.target, "gnext") ||\r\n                                                c(t.target, "gprev") ||\r\n                                                e.close();\r\n                                        },\r\n                                    })),\r\n                                o(this.elements, function (t, i) {\r\n                                    e.slidesContainer.appendChild(\r\n                                        t.instance.create()\r\n                                    ),\r\n                                        (t.slideNode =\r\n                                            e.slidesContainer.querySelectorAll(\r\n                                                ".gslide"\r\n                                            )[i]);\r\n                                }),\r\n                                K && h(document.body, "glightbox-touch"),\r\n                                (this.events.resize = a("resize", {\r\n                                    onElement: window,\r\n                                    withCallback: function () {\r\n                                        e.resize();\r\n                                    },\r\n                                })),\r\n                                (this.built = !0);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "resize",\r\n                        value: function () {\r\n                            var e =\r\n                                arguments.length > 0 && void 0 !== arguments[0]\r\n                                    ? arguments[0]\r\n                                    : null;\r\n                            if (\r\n                                (e = e || this.activeSlide) &&\r\n                                !c(e, "zoomed")\r\n                            ) {\r\n                                var t = y(),\r\n                                    i = e.querySelector(".gvideo-wrapper"),\r\n                                    n = e.querySelector(".gslide-image"),\r\n                                    s = this.slideDescription,\r\n                                    l = t.width,\r\n                                    o = t.height;\r\n                                if (\r\n                                    (l <= 768\r\n                                        ? h(document.body, "glightbox-mobile")\r\n                                        : d(document.body, "glightbox-mobile"),\r\n                                    i || n)\r\n                                ) {\r\n                                    var r = !1;\r\n                                    if (\r\n                                        (s &&\r\n                                            (c(s, "description-bottom") ||\r\n                                                c(s, "description-top")) &&\r\n                                            !c(s, "gabsolute") &&\r\n                                            (r = !0),\r\n                                        n)\r\n                                    )\r\n                                        if (l <= 768) n.querySelector("img");\r\n                                        else if (r) {\r\n                                            var a = s.offsetHeight,\r\n                                                u = n.querySelector("img");\r\n                                            u.setAttribute(\r\n                                                "style",\r\n                                                "max-height: calc(100vh - ".concat(\r\n                                                    a,\r\n                                                    "px)"\r\n                                                )\r\n                                            ),\r\n                                                s.setAttribute(\r\n                                                    "style",\r\n                                                    "max-width: ".concat(\r\n                                                        u.offsetWidth,\r\n                                                        "px;"\r\n                                                    )\r\n                                                );\r\n                                        }\r\n                                    if (i) {\r\n                                        var g = O(\r\n                                            this.settings.plyr.config,\r\n                                            "ratio"\r\n                                        )\r\n                                            ? this.settings.plyr.config.ratio\r\n                                            : "";\r\n                                        if (!g) {\r\n                                            var v = i.clientWidth,\r\n                                                f = i.clientHeight,\r\n                                                p = v / f;\r\n                                            g = ""\r\n                                                .concat(v / p, ":")\r\n                                                .concat(f / p);\r\n                                        }\r\n                                        var m = g.split(":"),\r\n                                            x = this.settings.videosWidth,\r\n                                            b = this.settings.videosWidth,\r\n                                            S =\r\n                                                (b =\r\n                                                    M(x) ||\r\n                                                    -1 !== x.indexOf("px")\r\n                                                        ? parseInt(x)\r\n                                                        : -1 !== x.indexOf("vw")\r\n                                                        ? (l * parseInt(x)) /\r\n                                                          100\r\n                                                        : -1 !== x.indexOf("vh")\r\n                                                        ? (o * parseInt(x)) /\r\n                                                          100\r\n                                                        : -1 !== x.indexOf("%")\r\n                                                        ? (l * parseInt(x)) /\r\n                                                          100\r\n                                                        : parseInt(\r\n                                                              i.clientWidth\r\n                                                          )) /\r\n                                                (parseInt(m[0]) /\r\n                                                    parseInt(m[1]));\r\n                                        if (\r\n                                            ((S = Math.floor(S)),\r\n                                            r && (o -= s.offsetHeight),\r\n                                            b > l || S > o || (o < S && l > b))\r\n                                        ) {\r\n                                            var w = i.offsetWidth,\r\n                                                T = i.offsetHeight,\r\n                                                C = o / T,\r\n                                                k = {\r\n                                                    width: w * C,\r\n                                                    height: T * C,\r\n                                                };\r\n                                            i.parentNode.setAttribute(\r\n                                                "style",\r\n                                                "max-width: ".concat(\r\n                                                    k.width,\r\n                                                    "px"\r\n                                                )\r\n                                            ),\r\n                                                r &&\r\n                                                    s.setAttribute(\r\n                                                        "style",\r\n                                                        "max-width: ".concat(\r\n                                                            k.width,\r\n                                                            "px;"\r\n                                                        )\r\n                                                    );\r\n                                        } else\r\n                                            (i.parentNode.style.maxWidth =\r\n                                                "".concat(x)),\r\n                                                r &&\r\n                                                    s.setAttribute(\r\n                                                        "style",\r\n                                                        "max-width: ".concat(\r\n                                                            x,\r\n                                                            ";"\r\n                                                        )\r\n                                                    );\r\n                                    }\r\n                                }\r\n                            }\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "reload",\r\n                        value: function () {\r\n                            this.init();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "updateNavigationClasses",\r\n                        value: function () {\r\n                            var e = this.loop();\r\n                            d(this.nextButton, "disabled"),\r\n                                d(this.prevButton, "disabled"),\r\n                                0 == this.index && this.elements.length - 1 == 0\r\n                                    ? (h(this.prevButton, "disabled"),\r\n                                      h(this.nextButton, "disabled"))\r\n                                    : 0 !== this.index || e\r\n                                    ? this.index !== this.elements.length - 1 ||\r\n                                      e ||\r\n                                      h(this.nextButton, "disabled")\r\n                                    : h(this.prevButton, "disabled");\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "loop",\r\n                        value: function () {\r\n                            var e = O(this.settings, "loopAtEnd")\r\n                                ? this.settings.loopAtEnd\r\n                                : null;\r\n                            return (\r\n                                (e = O(this.settings, "loop")\r\n                                    ? this.settings.loop\r\n                                    : e),\r\n                                e\r\n                            );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "close",\r\n                        value: function () {\r\n                            var e = this;\r\n                            if (!this.lightboxOpen) {\r\n                                if (this.events) {\r\n                                    for (var t in this.events)\r\n                                        this.events.hasOwnProperty(t) &&\r\n                                            this.events[t].destroy();\r\n                                    this.events = null;\r\n                                }\r\n                                return !1;\r\n                            }\r\n                            if (this.closing) return !1;\r\n                            (this.closing = !0),\r\n                                this.slidePlayerPause(this.activeSlide),\r\n                                this.fullElementsList &&\r\n                                    (this.elements = this.fullElementsList),\r\n                                this.bodyHiddenChildElms.length &&\r\n                                    o(this.bodyHiddenChildElms, function (e) {\r\n                                        e.removeAttribute("aria-hidden");\r\n                                    }),\r\n                                h(this.modal, "glightbox-closing"),\r\n                                g(\r\n                                    this.overlay,\r\n                                    "none" == this.settings.openEffect\r\n                                        ? "none"\r\n                                        : this.settings.cssEfects.fade.out\r\n                                ),\r\n                                g(\r\n                                    this.activeSlide,\r\n                                    this.settings.cssEfects[\r\n                                        this.settings.closeEffect\r\n                                    ].out,\r\n                                    function () {\r\n                                        if (\r\n                                            ((e.activeSlide = null),\r\n                                            (e.prevActiveSlideIndex = null),\r\n                                            (e.prevActiveSlide = null),\r\n                                            (e.built = !1),\r\n                                            e.events)\r\n                                        ) {\r\n                                            for (var t in e.events)\r\n                                                e.events.hasOwnProperty(t) &&\r\n                                                    e.events[t].destroy();\r\n                                            e.events = null;\r\n                                        }\r\n                                        var i = document.body;\r\n                                        d(Q, "glightbox-open"),\r\n                                            d(\r\n                                                i,\r\n                                                "glightbox-open touching gdesc-open glightbox-touch glightbox-mobile gscrollbar-fixer"\r\n                                            ),\r\n                                            e.modal.parentNode.removeChild(\r\n                                                e.modal\r\n                                            ),\r\n                                            e.trigger("close"),\r\n                                            T(e.settings.onClose) &&\r\n                                                e.settings.onClose();\r\n                                        var n =\r\n                                            document.querySelector(\r\n                                                ".gcss-styles"\r\n                                            );\r\n                                        n && n.parentNode.removeChild(n),\r\n                                            (e.lightboxOpen = !1),\r\n                                            (e.closing = null);\r\n                                    }\r\n                                );\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "destroy",\r\n                        value: function () {\r\n                            this.close(),\r\n                                this.clearAllEvents(),\r\n                                this.baseEvents && this.baseEvents.destroy();\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "on",\r\n                        value: function (e, t) {\r\n                            var i =\r\n                                arguments.length > 2 &&\r\n                                void 0 !== arguments[2] &&\r\n                                arguments[2];\r\n                            if (!e || !T(t))\r\n                                throw new TypeError(\r\n                                    "Event name and callback must be defined"\r\n                                );\r\n                            this.apiEvents.push({\r\n                                evt: e,\r\n                                once: i,\r\n                                callback: t,\r\n                            });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "once",\r\n                        value: function (e, t) {\r\n                            this.on(e, t, !0);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "trigger",\r\n                        value: function (e) {\r\n                            var t = this,\r\n                                i =\r\n                                    arguments.length > 1 &&\r\n                                    void 0 !== arguments[1]\r\n                                        ? arguments[1]\r\n                                        : null,\r\n                                n = [];\r\n                            o(this.apiEvents, function (t, s) {\r\n                                var l = t.evt,\r\n                                    o = t.once,\r\n                                    r = t.callback;\r\n                                l == e && (r(i), o && n.push(s));\r\n                            }),\r\n                                n.length &&\r\n                                    o(n, function (e) {\r\n                                        return t.apiEvents.splice(e, 1);\r\n                                    });\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "clearAllEvents",\r\n                        value: function () {\r\n                            this.apiEvents.splice(0, this.apiEvents.length);\r\n                        },\r\n                    },\r\n                    {\r\n                        key: "version",\r\n                        value: function () {\r\n                            return "3.1.1";\r\n                        },\r\n                    },\r\n                ]),\r\n                e\r\n            );\r\n        })();\r\n    return function () {\r\n        var e =\r\n                arguments.length > 0 && void 0 !== arguments[0]\r\n                    ? arguments[0]\r\n                    : {},\r\n            t = new te(e);\r\n        return t.init(), t;\r\n    };\r\n});\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/glightbox.js?')},"./src/js/main.js":function srcJsMainJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _gallery_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./gallery.js */ "./src/js/gallery.js");\n/* harmony import */ var _gallery_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_gallery_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _glightbox_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./glightbox.js */ "./src/js/glightbox.js");\n/* harmony import */ var _glightbox_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_glightbox_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _accordion_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./accordion.js */ "./src/js/accordion.js");\n/* harmony import */ var _accordion_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_accordion_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _testimonials_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./testimonials.js */ "./src/js/testimonials.js");\n\r\n\r\n\r\n\r\n\r\nconst togglerBtn = document.querySelector(".main-nav--toggler");\r\nconst linksContainer = document.querySelector(".main-nav__links-container");\r\nconst hamburgerLines = document.querySelectorAll(".main-nav--toggler-line");\r\nconst galleryItemsContainer = document.querySelectorAll(\r\n    ".section-gallery__content"\r\n);\r\n\r\nconst lightbox = GLightbox({\r\n    touchNavigation: true,\r\n    selector: ".glightbox3",\r\n});\r\n\r\ntogglerBtn.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    hamburgerLines.forEach((el) => el.classList.toggle("active"));\r\n    linksContainer.classList.toggle("active");\r\n});\r\n\r\nlinksContainer.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    if ([...hamburgerLines].some((el) => el.classList.contains("active"))) {\r\n        hamburgerLines.forEach((el) => el.classList.remove("active"));\r\n        linksContainer.classList.remove("active");\r\n    }\r\n});\r\n\r\ngalleryItemsContainer.forEach((container) => {\r\n    const imagesCounts = [...container.querySelectorAll(".glightbox3")];\r\n    const span = container.querySelector(".section-gallery--item-count");\r\n    console.log(span);\r\n\r\n    const DEFAULT_IMG_COUNT = 2;\r\n    if (span) {\r\n        const count = imagesCounts.length - DEFAULT_IMG_COUNT;\r\n        if (count > 0) {\r\n            span.textContent = `+${count}`;\r\n        }\r\n    }\r\n});\r\n\r\n// document.addEventListener("DOMContentLoaded", () => {\r\n//     [...accordionContents].forEach((el) => el.classList.add("hidden"));\r\n// });\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/main.js?')},"./src/js/reviews.js":function srcJsReviewsJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "reviews": () => (/* binding */ reviews)\n/* harmony export */ });\nconst reviews = [\r\n    {\r\n        id: 1,\r\n        name: "Cat One",\r\n        job: "UX",\r\n        img: "img/cat-1.jpg",\r\n        text: "Odličan posao na našoj kući u Vinišću, izuzetno smo zadovoljni kvalitetom i radom.",\r\n    },\r\n    {\r\n        id: 2,\r\n        name: "Cat Two",\r\n        job: "Graphics",\r\n        img: "img/cat-2.jpg",\r\n        text: "This is some random text",\r\n    },\r\n    {\r\n        id: 3,\r\n        name: "Cat One",\r\n        job: "Tester",\r\n        img: "img/cat-3.jpg",\r\n        text: "This is some random text",\r\n    },\r\n];\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/reviews.js?')},"./src/js/testimonials.js":function srcJsTestimonialsJs(__unused_webpack_module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _reviews_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./reviews.js */ "./src/js/reviews.js");\n\r\n\r\nconst testimonialContainer = document.querySelector(".testimonials");\r\nconst testimonialImg = document.querySelector(".testimonials__img");\r\nconst testimonialTitle = document.querySelector(".testimonials__title");\r\nconst testimonialJob = document.querySelector(".testimonials__job");\r\nconst testimonialInfo = document.querySelector(".testimonials__info");\r\nconst btnTestimonialLeft = document.querySelector(\r\n    ".testimonials__button--left"\r\n);\r\nconst btnTestimonialRight = document.querySelector(\r\n    ".testimonials__button--right"\r\n);\r\n\r\n// State\r\nlet currentNumber = 0;\r\nconst intervalTiming = 2250;\r\nlet interval = setInterval(() => intervalSetup(), intervalTiming);\r\n\r\n// Event Listeners\r\ntestimonialContainer.addEventListener("mouseover", () => {\r\n    console.log("hi");\r\n    clearInterval(interval);\r\n});\r\n\r\ntestimonialContainer.addEventListener("mouseout", () => {\r\n    interval = setInterval(() => intervalSetup(), intervalTiming);\r\n});\r\n\r\nbtnTestimonialLeft.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    currentNumber--;\r\n    moveItem();\r\n});\r\n\r\nbtnTestimonialRight.addEventListener("click", (e) => {\r\n    e.preventDefault();\r\n    currentNumber++;\r\n    moveItem();\r\n});\r\n\r\nwindow.addEventListener("DOMContentLoaded", () => {\r\n    const item = _reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews[currentNumber];\r\n    setProperties(item);\r\n});\r\n\r\n// Logic - Functions\r\nfunction adjustNumber(num) {\r\n    if (num < 0) {\r\n        currentNumber = _reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews.length - 1;\r\n        return currentNumber;\r\n    }\r\n    if (num > _reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews.length - 1) {\r\n        currentNumber = 0;\r\n        return currentNumber;\r\n    }\r\n}\r\n\r\nfunction intervalSetup() {\r\n    currentNumber++;\r\n    moveItem();\r\n}\r\n\r\nfunction moveItem() {\r\n    if (isValidNumber(currentNumber)) {\r\n        setProperties(_reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews[currentNumber]);\r\n        return;\r\n    }\r\n    adjustNumber(currentNumber);\r\n    setProperties(_reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews[currentNumber]);\r\n}\r\n\r\nfunction isValidNumber(num) {\r\n    return Number.isFinite(num) && num >= 0 && num < _reviews_js__WEBPACK_IMPORTED_MODULE_0__.reviews.length;\r\n}\r\n\r\nfunction setProperties(item) {\r\n    testimonialImg.src = item.img;\r\n    testimonialTitle.textContent = item.name;\r\n    testimonialJob.textContent = item.job;\r\n    testimonialInfo.textContent = item.text;\r\n}\r\n\n\n//# sourceURL=webpack://gulpstarter/./src/js/testimonials.js?')}},__webpack_module_cache__={};function __webpack_require__(n){var r=__webpack_module_cache__[n];return void 0!==r||(r=__webpack_module_cache__[n]={exports:{}},__webpack_modules__[n].call(r.exports,r,r.exports,__webpack_require__)),r.exports}__webpack_require__.n=function(n){var r=n&&n.__esModule?function(){return n.default}:function(){return n};return __webpack_require__.d(r,{a:r}),r},__webpack_require__.d=function(n,r){for(var e in r)__webpack_require__.o(r,e)&&!__webpack_require__.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},__webpack_require__.o=function(n,r){return Object.prototype.hasOwnProperty.call(n,r)},__webpack_require__.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/js/main.js")}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlcyI6WyJidW5kbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qXG4gKiBBVFRFTlRJT046IFRoZSBcImV2YWxcIiBkZXZ0b29sIGhhcyBiZWVuIHVzZWQgKG1heWJlIGJ5IGRlZmF1bHQgaW4gbW9kZTogXCJkZXZlbG9wbWVudFwiKS5cbiAqIFRoaXMgZGV2dG9vbCBpcyBuZWl0aGVyIG1hZGUgZm9yIHByb2R1Y3Rpb24gbm9yIGZvciByZWFkYWJsZSBvdXRwdXQgZmlsZXMuXG4gKiBJdCB1c2VzIFwiZXZhbCgpXCIgY2FsbHMgdG8gY3JlYXRlIGEgc2VwYXJhdGUgc291cmNlIGZpbGUgaW4gdGhlIGJyb3dzZXIgZGV2dG9vbHMuXG4gKiBJZiB5b3UgYXJlIHRyeWluZyB0byByZWFkIHRoZSBvdXRwdXQgZmlsZSwgc2VsZWN0IGEgZGlmZmVyZW50IGRldnRvb2wgKGh0dHBzOi8vd2VicGFjay5qcy5vcmcvY29uZmlndXJhdGlvbi9kZXZ0b29sLylcbiAqIG9yIGRpc2FibGUgdGhlIGRlZmF1bHQgZGV2dG9vbCB3aXRoIFwiZGV2dG9vbDogZmFsc2VcIi5cbiAqIElmIHlvdSBhcmUgbG9va2luZyBmb3IgcHJvZHVjdGlvbi1yZWFkeSBvdXRwdXQgZmlsZXMsIHNlZSBtb2RlOiBcInByb2R1Y3Rpb25cIiAoaHR0cHM6Ly93ZWJwYWNrLmpzLm9yZy9jb25maWd1cmF0aW9uL21vZGUvKS5cbiAqL1xuXG4vKioqKioqL1xuKGZ1bmN0aW9uICgpIHtcbiAgLy8gd2VicGFja0Jvb3RzdHJhcFxuXG4gIC8qKioqKiovXG4gIHZhciBfX3dlYnBhY2tfbW9kdWxlc19fID0ge1xuICAgIC8qKiovXG4gICAgXCIuL3NyYy9qcy9hY2NvcmRpb24uanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgICAgICEqKiogLi9zcmMvanMvYWNjb3JkaW9uLmpzICoqKiFcbiAgICAgIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzQWNjb3JkaW9uSnMoKSB7XG4gICAgICBldmFsKFwiY29uc3QgYWNjb3JkaW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5hY2NvcmRpb25cXFwiKTtcXHJcXG5jb25zdCBhY2NvcmRpb25Db250ZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5hY2NvcmRpb24tY29udGVudFxcXCIpO1xcclxcblxcclxcbmFjY29yZGlvbnMuZm9yRWFjaCgoYWNjKSA9PlxcclxcbiAgICBhY2MuYWRkRXZlbnRMaXN0ZW5lcihcXFwiY2xpY2tcXFwiLCAoZSkgPT4ge1xcclxcbiAgICAgICAgaGFuZGxlQWNjb3JkaW9ucyhhY2MsIGUpO1xcclxcbiAgICB9KVxcclxcbik7XFxyXFxuXFxyXFxuZnVuY3Rpb24gaGFuZGxlQWNjb3JkaW9ucyhhY2NvcmRpb24sIGV2ZW50KSB7XFxyXFxuICAgIGlmICghZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcXFwiYWNjb3JkaW9uLWhlYWRpbmctLWljb25cXFwiKSkgcmV0dXJuO1xcclxcblxcclxcbiAgICBldmVudC50YXJnZXQudGV4dENvbnRlbnQudHJpbSgpID09PSBcXFwiK1xcXCJcXHJcXG4gICAgICAgID8gKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9IFxcXCItXFxcIilcXHJcXG4gICAgICAgIDogKGV2ZW50LnRhcmdldC50ZXh0Q29udGVudCA9IFxcXCIrXFxcIik7XFxyXFxuXFxyXFxuICAgIGlmIChcXHJcXG4gICAgICAgIGFjY29yZGlvbi5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmNvbnRhaW5zKFxcclxcbiAgICAgICAgICAgIFxcXCJoaWRkZW5cXFwiXFxyXFxuICAgICAgICApXFxyXFxuICAgICkge1xcclxcbiAgICAgICAgYWNjb3JkaW9uLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKFxcclxcbiAgICAgICAgICAgIFxcXCJoaWRkZW5cXFwiXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgICAgYWNjb3JkaW9uLmZpcnN0RWxlbWVudENoaWxkLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKFxcXCJzaG93XFxcIik7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBhY2NvcmRpb24uZmlyc3RFbGVtZW50Q2hpbGQubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoXFxcInNob3dcXFwiKTtcXHJcXG4gICAgICAgIGFjY29yZGlvbi5maXJzdEVsZW1lbnRDaGlsZC5uZXh0RWxlbWVudFNpYmxpbmcuY2xhc3NMaXN0LmFkZChcXFwiaGlkZGVuXFxcIik7XFxyXFxuICAgIH1cXHJcXG59XFxyXFxuXFxyXFxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXFxcIkRPTUNvbnRlbnRMb2FkZWRcXFwiLCAoKSA9PiB7XFxyXFxuICAgIFsuLi5hY2NvcmRpb25Db250ZW50c10uZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5hZGQoXFxcImhpZGRlblxcXCIpKTtcXHJcXG59KTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9hY2NvcmRpb24uanM/XCIpO1xuICAgICAgLyoqKi9cbiAgICB9LFxuXG4gICAgLyoqKi9cbiAgICBcIi4vc3JjL2pzL2dhbGxlcnkuanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICAgICAhKioqIC4vc3JjL2pzL2dhbGxlcnkuanMgKioqIVxuICAgICAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzR2FsbGVyeUpzKCkge1xuICAgICAgZXZhbChcIi8vIGltcG9ydCB7IHNsaWtlIH0gZnJvbSBcXFwiLi4vanMva2F0ZWdvcmlqZS9kYXRhLmpzXFxcIjtcXHJcXG5cXHJcXG4vLyBjbGFzcyBHYWxsZXJ5IHtcXHJcXG4vLyAgICAgI2VsZW1lbnQgPSBudWxsO1xcclxcbi8vICAgICAjbGlzdCA9IFtdO1xcclxcbi8vICAgICAjbW9kYWwgPSBudWxsO1xcclxcbi8vICAgICAjbW9kYWxJbWcgPSBudWxsO1xcclxcbi8vICAgICAjbW9kYWxJbWFnZXMgPSBbXTtcXHJcXG4vLyAgICAgI2Nsb3NlQnRuID0gbnVsbDtcXHJcXG4vLyAgICAgI25leHRCdG4gPSBudWxsO1xcclxcbi8vICAgICAjcHJldkJ0biA9IG51bGw7XFxyXFxuLy8gICAgICNpbWFnZU5hbWUgPSBudWxsO1xcclxcblxcclxcbi8vICAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XFxyXFxuLy8gICAgICAgICB0aGlzLiNlbGVtZW50ID0gZWxlbWVudDtcXHJcXG4vLyAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuI2VsZW1lbnQpO1xcclxcbi8vICAgICAgICAgdGhpcy5pbml0UHJvcHMoKTtcXHJcXG4vLyAgICAgICAgIHRoaXMub3Blbk1vZGFsKCk7XFxyXFxuLy8gICAgICAgICB0aGlzLmNsb3NlTW9kYWwoKTtcXHJcXG4vLyAgICAgfVxcclxcblxcclxcbi8vICAgICBzZXRJbWFnZXMoZWxlbWVudCkge1xcclxcbi8vICAgICAgICAgLy8gY29udmVydCBub2RlTGlzdCB0byBBcnJcXHJcXG4vLyAgICAgICAgIHRoaXMuI2xpc3QgPSBbLi4uZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcXCIuZ2FsbGVyeS1pbWdcXFwiKV07XFxyXFxuLy8gICAgIH1cXHJcXG5cXHJcXG4vLyAgICAgc2V0TW9kYWwoZWxlbWVudCkge1xcclxcbi8vICAgICAgICAgdGhpcy4jbW9kYWwgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcXHJcXG4vLyAgICAgICAgICAgICBcXFwiLnNlY3Rpb24tZ2FsbGVyeV9fbW9kYWxcXFwiXFxyXFxuLy8gICAgICAgICApO1xcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIHNldE1vZGFsSW1nKGVsZW1lbnQpIHtcXHJcXG4vLyAgICAgICAgIHRoaXMuI21vZGFsSW1nID0gZWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5tYWluLWltZ1xcXCIpO1xcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIHNldE1vZGFsSW1hZ2VzKGVsZW1lbnQpIHtcXHJcXG4vLyAgICAgICAgIHRoaXMuI21vZGFsSW1hZ2VzID0gW1xcclxcbi8vICAgICAgICAgICAgIC4uLmVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFxcXCIubW9kYWwtaW1nXFxcIiksXFxyXFxuLy8gICAgICAgICBdO1xcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIHNldEltYWdlTmFtZShlbGVtZW50KSB7XFxyXFxuLy8gICAgICAgICB0aGlzLiNpbWFnZU5hbWUgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLmltYWdlLW5hbWVcXFwiKTtcXHJcXG4vLyAgICAgfVxcclxcblxcclxcbi8vICAgICBzZXRDbG9zZUJ0bigpIHtcXHJcXG4vLyAgICAgICAgIGlmICh0aGlzLiNtb2RhbCkge1xcclxcbi8vICAgICAgICAgICAgIHRoaXMuI2Nsb3NlQnRuID0gdGhpcy4jbW9kYWwucXVlcnlTZWxlY3RvcihcXFwiLmNsb3NlLWJ0blxcXCIpO1xcclxcbi8vICAgICAgICAgfVxcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIHNldE5leHRCdG4oKSB7XFxyXFxuLy8gICAgICAgICB0aGlzLiNuZXh0QnRuID0gdGhpcy4jbW9kYWwucXVlcnlTZWxlY3RvcihcXFwiLm5leHQtYnRuXFxcIik7XFxyXFxuLy8gICAgIH1cXHJcXG5cXHJcXG4vLyAgICAgc2V0UHJldkJ0bigpIHtcXHJcXG4vLyAgICAgICAgIHRoaXMuI3ByZXZCdG4gPSB0aGlzLiNtb2RhbC5xdWVyeVNlbGVjdG9yKFxcXCIucHJldi1idG5cXFwiKTtcXHJcXG4vLyAgICAgfVxcclxcblxcclxcbi8vICAgICBpbml0UHJvcHMoKSB7XFxyXFxuLy8gICAgICAgICB0aGlzLnNldEltYWdlcyh0aGlzLiNlbGVtZW50KTtcXHJcXG4vLyAgICAgICAgIHRoaXMuc2V0TW9kYWwodGhpcy4jZWxlbWVudCk7XFxyXFxuLy8gICAgICAgICB0aGlzLnNldE1vZGFsSW1nKHRoaXMuI2VsZW1lbnQpO1xcclxcbi8vICAgICAgICAgdGhpcy5zZXRNb2RhbEltYWdlcyh0aGlzLiNlbGVtZW50KTtcXHJcXG4vLyAgICAgICAgIHRoaXMuc2V0SW1hZ2VOYW1lKHRoaXMuI2VsZW1lbnQpO1xcclxcbi8vICAgICAgICAgdGhpcy5zZXRDbG9zZUJ0bigpO1xcclxcbi8vICAgICAgICAgdGhpcy5zZXROZXh0QnRuKCk7XFxyXFxuLy8gICAgICAgICB0aGlzLnNldFByZXZCdG4oKTtcXHJcXG4vLyAgICAgfVxcclxcblxcclxcbi8vICAgICBvcGVuTW9kYWwoKSB7XFxyXFxuLy8gICAgICAgICB0aGlzLiNlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcImNsaWNrXFxcIiwgKGUpID0+IHtcXHJcXG4vLyAgICAgICAgICAgICB0aGlzLiNtb2RhbC5jbGFzc0xpc3QuYWRkKFxcXCJvcGVuXFxcIik7XFxyXFxuLy8gICAgICAgICAgICAgdGhpcy5zZXRPcGVuTW9kYWxJbWFnZXMoZS50YXJnZXQpO1xcclxcbi8vICAgICAgICAgfSk7XFxyXFxuLy8gICAgIH1cXHJcXG5cXHJcXG4vLyAgICAgY2xvc2VNb2RhbCgpIHtcXHJcXG4vLyAgICAgICAgIHRoaXMuI21vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXFxcImNsaWNrXFxcIiwgKGUpID0+IHtcXHJcXG4vLyAgICAgICAgICAgICBpZiAoXFxyXFxuLy8gICAgICAgICAgICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC52YWx1ZSA9PT0gXFxcInNlY3Rpb24tZ2FsbGVyeV9fbW9kYWwgb3BlblxcXCIgfHxcXHJcXG4vLyAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFxcXCJmYS10aW1lc1xcXCIpXFxyXFxuLy8gICAgICAgICAgICAgKSB7XFxyXFxuLy8gICAgICAgICAgICAgICAgIHRoaXMuI21vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXFxcIm9wZW5cXFwiKTtcXHJcXG4vLyAgICAgICAgICAgICB9XFxyXFxuLy8gICAgICAgICB9KTtcXHJcXG4vLyAgICAgfVxcclxcblxcclxcbi8vICAgICBzZXRPcGVuTW9kYWxJbWFnZXMobWFpbkltYWdlKSB7XFxyXFxuLy8gICAgICAgICAvLyBtYWluSW1hZ2UgaXMgZS50YXJnZXQgZnJvbSBjbGlja1xcclxcbi8vICAgICAgICAgY29uc3QgY2F0ZWdvcnkgPSB0aGlzLmdldEFwcHJvcHJpYXRlQ2F0ZWdvcnkobWFpbkltYWdlKTtcXHJcXG4vLyAgICAgICAgIHRoaXMucmVuZGVyTW9kYWxIVE1MKG1haW5JbWFnZSwgY2F0ZWdvcnkpO1xcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIGdldEFwcHJvcHJpYXRlQ2F0ZWdvcnkobWFpbkltYWdlKSB7XFxyXFxuLy8gICAgICAgICBpZiAoIW1haW5JbWFnZS5kYXRhc2V0Lm5hbWUpIHtcXHJcXG4vLyAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxcclxcbi8vICAgICAgICAgICAgICAgICBcXFwic29tZXRoaW5nIHdlbnQgd3Jvbmcgd2l0aCBnZXR0aW5nIGNhdGVnb3J5IGZvciBpbWFnZVxcXCJcXHJcXG4vLyAgICAgICAgICAgICApO1xcclxcbi8vICAgICAgICAgICAgIHJldHVybjtcXHJcXG4vLyAgICAgICAgIH1cXHJcXG4vLyAgICAgICAgIGNvbnN0IGNhdGVnb3J5TmFtZSA9IG1haW5JbWFnZS5kYXRhc2V0Lm5hbWU7XFxyXFxuLy8gICAgICAgICBjb25zdCBhcHByb3BhcmlhdGVDYXRlZ29yeSA9IHNsaWtlLmZpbmQoKHgpID0+IHguaW1lID09PSBjYXRlZ29yeU5hbWUpO1xcclxcbi8vICAgICAgICAgcmV0dXJuIGFwcHJvcGFyaWF0ZUNhdGVnb3J5O1xcclxcbi8vICAgICB9XFxyXFxuXFxyXFxuLy8gICAgIHJlbmRlck1vZGFsSFRNTChtYWluSW1hZ2UsIGNhdGVnb3J5KSB7XFxyXFxuLy8gICAgICAgICBsZXQgbWFpbkl0ZW0gPSBtYWluSW1hZ2U7XFxyXFxuLy8gICAgICAgICBsZXQgaWQgPSArbWFpbkl0ZW0uZGF0YXNldC5pZDtcXHJcXG4vLyAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gY2F0ZWdvcnkuaW1hZ2VzLmZpbmQoKHgpID0+IHguaWQgPT09IGlkKTtcXHJcXG4vLyAgICAgICAgIHRoaXMuI21vZGFsLmlubmVySFRNTCA9IGBcXHJcXG4vLyAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlLWJ0blxcXCI+XFxyXFxuLy8gICAgICAgICAgICAgPGkgY2xhc3M9XFxcImZhcyBmYS10aW1lc1xcXCI+PC9pPlxcclxcbi8vICAgICAgICAgPC9idXR0b24+XFxyXFxuLy8gICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzZWN0aW9uLWdhbGxlcnlfX21vZGFsLS1jb250ZW50XFxcIj5cXHJcXG4vLyAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJwcmV2LWJ0blxcXCI+XFxyXFxuLy8gICAgICAgICAgICAgICAgIDxpIGNsYXNzPVxcXCJmYXMgZmEtY2hldnJvbi1sZWZ0XFxcIj48L2k+XFxyXFxuLy8gICAgICAgICAgICAgPC9idXR0b24+XFxyXFxuLy8gICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwibmV4dC1idG5cXFwiPlxcclxcbi8vICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cXFwiZmFzIGZhLWNoZXZyb24tcmlnaHRcXFwiPjwvaT5cXHJcXG4vLyAgICAgICAgICAgICA8L2J1dHRvbj5cXHJcXG4vLyAgICAgICAgICAgICA8aW1nIHNyYz1cXFwiJHtzZWxlY3RlZC5zcmN9XFxcIiBhbHQ9XFxcImNhdFxcXCIgZGF0YS1uYW1lPSR7XFxyXFxuLy8gICAgICAgICAgICAgY2F0ZWdvcnkuaW1lXFxyXFxuLy8gICAgICAgICB9IGRhdGEtaWQ9XFxcIiR7c2VsZWN0ZWQuaWR9XFxcIiBjbGFzcz1cXFwibWFpbi1pbWdcXFwiPlxcclxcbi8vICAgICAgICAgICAgIDxwIGNsYXNzPVxcXCJpbWFnZS1uYW1lXFxcIj4ke3NlbGVjdGVkLmRlc2NyaXB0aW9ufTwvcD5cXHJcXG4vLyAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtb2RhbC1pbWFnZXMgZy0xXFxcIj5cXHJcXG4vLyAgICAgICAgICAgICAgICAgJHtjYXRlZ29yeS5pbWFnZXNcXHJcXG4vLyAgICAgICAgICAgICAgICAgICAgIC5tYXAoXFxyXFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgKGVsKSA9Plxcclxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGltZyBzcmM9XFxcIiR7ZWwuc3JjfVxcXCIgYWx0PVxcXCJjYXRcXFwiIGRhdGEtaWQ9JHtcXHJcXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsLmlkXFxyXFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZGF0YS1uYW1lPSR7Y2F0ZWdvcnkuaW1lfSBjbGFzcz1cXFwibW9kYWwtaW1nICR7XFxyXFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbC5pZCA9PT0gc2VsZWN0ZWQuaWQgPyBcXFwic2VsZWN0ZWRcXFwiIDogXFxcIlxcXCJcXHJcXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcXCI+YFxcclxcbi8vICAgICAgICAgICAgICAgICAgICAgKVxcclxcbi8vICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXFxcIlxcXCIpfVxcclxcbi8vICAgICAgICAgICAgIDwvZGl2Plxcclxcbi8vICAgICAgICAgPC9kaXY+XFxyXFxuLy8gICAgICAgICBgO1xcclxcbi8vICAgICB9XFxyXFxuLy8gfVxcclxcblxcclxcbi8vIHtcXHJcXG4vLyAgICAgLyogPGltZyBzcmM9XFxcIi4vaW1nL2dhbGxlcnlwaG90b3MvY2F0LTEuanBnXFxcIiBhbHQ9XFxcImNhdFxcXCIgY2xhc3M9XFxcIm1vZGFsLWltZyBzZWxlY3RlZFxcXCI+XFxyXFxuLy8gICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCIuL2ltZy9nYWxsZXJ5cGhvdG9zL2NhdC0yLmpwZ1xcXCIgYWx0PVxcXCJjYXRcXFwiIGNsYXNzPVxcXCJtb2RhbC1pbWdcXFwiPlxcclxcbi8vICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cXFwiLi9pbWcvZ2FsbGVyeXBob3Rvcy9jYXQtMy5qcGdcXFwiIGFsdD1cXFwiY2F0XFxcIiBjbGFzcz1cXFwibW9kYWwtaW1nXFxcIj48L2ltZz4gKi9cXHJcXG4vLyB9XFxyXFxuXFxyXFxuLy8gZnVuY3Rpb24gc2V0RWxlbWVudChzZWxlY3Rpb24pIHtcXHJcXG4vLyAgICAgY29uc3QgZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0aW9uKTtcXHJcXG4vLyAgICAgaWYgKGVsZW1lbnQpIHtcXHJcXG4vLyAgICAgICAgIHJldHVybiBlbGVtZW50O1xcclxcbi8vICAgICB9XFxyXFxuLy8gICAgIHRocm93IG5ldyBFcnJvcihcXHJcXG4vLyAgICAgICAgIGBQbGVhc2UgY2hlY2sgXFxcIiR7c2VsZWN0aW9ufVxcXCIgc2VsZWN0b3IsIG5vIHN1Y2ggZWxlbWVudCBleGlzdHNgXFxyXFxuLy8gICAgICk7XFxyXFxuLy8gfVxcclxcblxcclxcbi8vIGNvbnN0IGthcGlqZSA9IG5ldyBHYWxsZXJ5KHNldEVsZW1lbnQoXFxcIi5rYXBpamVcXFwiKSk7XFxyXFxuLy8gY29uc3Qgb2dyYWRlID0gbmV3IEdhbGxlcnkoc2V0RWxlbWVudChcXFwiLm9ncmFkZVxcXCIpKTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9nYWxsZXJ5LmpzP1wiKTtcbiAgICAgIC8qKiovXG4gICAgfSxcblxuICAgIC8qKiovXG4gICAgXCIuL3NyYy9qcy9nbGlnaHRib3guanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiEqXFxcbiAgICAgICEqKiogLi9zcmMvanMvZ2xpZ2h0Ym94LmpzICoqKiFcbiAgICAgIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzR2xpZ2h0Ym94SnMobW9kdWxlKSB7XG4gICAgICBldmFsKFwiIShmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgdHJ1ZVxcclxcbiAgICAgICAgPyAobW9kdWxlLmV4cG9ydHMgPSB0KCkpXFxyXFxuICAgICAgICA6IDA7XFxyXFxufSkodGhpcywgZnVuY3Rpb24gKCkge1xcclxcbiAgICBcXFwidXNlIHN0cmljdFxcXCI7XFxyXFxuICAgIGZ1bmN0aW9uIGUodCkge1xcclxcbiAgICAgICAgcmV0dXJuIChlID1cXHJcXG4gICAgICAgICAgICBcXFwiZnVuY3Rpb25cXFwiID09IHR5cGVvZiBTeW1ib2wgJiYgXFxcInN5bWJvbFxcXCIgPT0gdHlwZW9mIFN5bWJvbC5pdGVyYXRvclxcclxcbiAgICAgICAgICAgICAgICA/IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZTtcXHJcXG4gICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIDogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIFN5bWJvbCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlICE9PSBTeW1ib2wucHJvdG90eXBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IFxcXCJzeW1ib2xcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICA6IHR5cGVvZiBlO1xcclxcbiAgICAgICAgICAgICAgICAgIH0pKHQpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHQoZSwgdCkge1xcclxcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIHQpKVxcclxcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXFxcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblxcXCIpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIGkoZSwgdCkge1xcclxcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0Lmxlbmd0aDsgaSsrKSB7XFxyXFxuICAgICAgICAgICAgdmFyIG4gPSB0W2ldO1xcclxcbiAgICAgICAgICAgIChuLmVudW1lcmFibGUgPSBuLmVudW1lcmFibGUgfHwgITEpLFxcclxcbiAgICAgICAgICAgICAgICAobi5jb25maWd1cmFibGUgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgIFxcXCJ2YWx1ZVxcXCIgaW4gbiAmJiAobi53cml0YWJsZSA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIG4ua2V5LCBuKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBuKGUsIHQsIG4pIHtcXHJcXG4gICAgICAgIHJldHVybiB0ICYmIGkoZS5wcm90b3R5cGUsIHQpLCBuICYmIGkoZSwgbiksIGU7XFxyXFxuICAgIH1cXHJcXG4gICAgdmFyIHMgPSBEYXRlLm5vdygpO1xcclxcbiAgICBmdW5jdGlvbiBsKCkge1xcclxcbiAgICAgICAgdmFyIGUgPSB7fSxcXHJcXG4gICAgICAgICAgICB0ID0gITAsXFxyXFxuICAgICAgICAgICAgaSA9IDAsXFxyXFxuICAgICAgICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XFxyXFxuICAgICAgICBcXFwiW29iamVjdCBCb29sZWFuXVxcXCIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudHNbMF0pICYmXFxyXFxuICAgICAgICAgICAgKCh0ID0gYXJndW1lbnRzWzBdKSwgaSsrKTtcXHJcXG4gICAgICAgIGZvciAoXFxyXFxuICAgICAgICAgICAgdmFyIHMgPSBmdW5jdGlvbiAoaSkge1xcclxcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBuIGluIGkpXFxyXFxuICAgICAgICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSwgbikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAodCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJbb2JqZWN0IE9iamVjdF1cXFwiID09PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaVtuXSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZVtuXSA9IGwoITAsIGVbbl0sIGlbbl0pKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IChlW25dID0gaVtuXSkpO1xcclxcbiAgICAgICAgICAgIH07XFxyXFxuICAgICAgICAgICAgaSA8IG47XFxyXFxuICAgICAgICAgICAgaSsrXFxyXFxuICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICB2YXIgbyA9IGFyZ3VtZW50c1tpXTtcXHJcXG4gICAgICAgICAgICBzKG8pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIGU7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gbyhlLCB0KSB7XFxyXFxuICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgKChrKGUpIHx8IGUgPT09IHdpbmRvdyB8fCBlID09PSBkb2N1bWVudCkgJiYgKGUgPSBbZV0pLFxcclxcbiAgICAgICAgICAgIEEoZSkgfHwgTChlKSB8fCAoZSA9IFtlXSksXFxyXFxuICAgICAgICAgICAgMCAhPSBQKGUpKVxcclxcbiAgICAgICAgKVxcclxcbiAgICAgICAgICAgIGlmIChBKGUpICYmICFMKGUpKVxcclxcbiAgICAgICAgICAgICAgICBmb3IgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBlLmxlbmd0aCwgbiA9IDA7XFxyXFxuICAgICAgICAgICAgICAgICAgICBuIDwgaSAmJiAhMSAhPT0gdC5jYWxsKGVbbl0sIGVbbl0sIG4sIGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgbisrXFxyXFxuICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgZWxzZSBpZiAoTChlKSlcXHJcXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgcyBpbiBlKVxcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKE8oZSwgcykgJiYgITEgPT09IHQuY2FsbChlW3NdLCBlW3NdLCBzLCBlKSkgYnJlYWs7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gcihlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXVxcclxcbiAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMl1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDogbnVsbCxcXHJcXG4gICAgICAgICAgICBuID0gKGVbc10gPSBlW3NdIHx8IFtdKSxcXHJcXG4gICAgICAgICAgICBsID0geyBhbGw6IG4sIGV2dDogbnVsbCwgZm91bmQ6IG51bGwgfTtcXHJcXG4gICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgdCAmJlxcclxcbiAgICAgICAgICAgICAgICBpICYmXFxyXFxuICAgICAgICAgICAgICAgIFAobikgPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgIG8obiwgZnVuY3Rpb24gKGUsIG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmV2ZW50TmFtZSA9PSB0ICYmIGUuZm4udG9TdHJpbmcoKSA9PSBpLnRvU3RyaW5nKCkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChsLmZvdW5kID0gITApLCAobC5ldnQgPSBuKSwgITE7XFxyXFxuICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgIGxcXHJcXG4gICAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gYShlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiB7fSxcXHJcXG4gICAgICAgICAgICBpID0gdC5vbkVsZW1lbnQsXFxyXFxuICAgICAgICAgICAgbiA9IHQud2l0aENhbGxiYWNrLFxcclxcbiAgICAgICAgICAgIHMgPSB0LmF2b2lkRHVwbGljYXRlLFxcclxcbiAgICAgICAgICAgIGwgPSB2b2lkIDAgPT09IHMgfHwgcyxcXHJcXG4gICAgICAgICAgICBhID0gdC5vbmNlLFxcclxcbiAgICAgICAgICAgIGggPSB2b2lkIDAgIT09IGEgJiYgYSxcXHJcXG4gICAgICAgICAgICBkID0gdC51c2VDYXB0dXJlLFxcclxcbiAgICAgICAgICAgIGMgPSB2b2lkIDAgIT09IGQgJiYgZCxcXHJcXG4gICAgICAgICAgICB1ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB2b2lkIDAsXFxyXFxuICAgICAgICAgICAgZyA9IGkgfHwgW107XFxyXFxuICAgICAgICBmdW5jdGlvbiB2KGUpIHtcXHJcXG4gICAgICAgICAgICBUKG4pICYmIG4uY2FsbCh1LCBlLCB0aGlzKSwgaCAmJiB2LmRlc3Ryb3koKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgQyhnKSAmJiAoZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZykpLFxcclxcbiAgICAgICAgICAgICh2LmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgIG8oZywgZnVuY3Rpb24gKHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gcih0LCBlLCB2KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGkuZm91bmQgJiYgaS5hbGwuc3BsaWNlKGkuZXZ0LCAxKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgdC5yZW1vdmVFdmVudExpc3RlbmVyKGUsIHYsIGMpO1xcclxcbiAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICBvKGcsIGZ1bmN0aW9uICh0KSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBpID0gcih0LCBlLCB2KTtcXHJcXG4gICAgICAgICAgICAgICAgKCh0LmFkZEV2ZW50TGlzdGVuZXIgJiYgbCAmJiAhaS5mb3VuZCkgfHwgIWwpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAodC5hZGRFdmVudExpc3RlbmVyKGUsIHYsIGMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgaS5hbGwucHVzaCh7IGV2ZW50TmFtZTogZSwgZm46IHYgfSkpO1xcclxcbiAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgIHZcXHJcXG4gICAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gaChlLCB0KSB7XFxyXFxuICAgICAgICBvKHQuc3BsaXQoXFxcIiBcXFwiKSwgZnVuY3Rpb24gKHQpIHtcXHJcXG4gICAgICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QuYWRkKHQpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gZChlLCB0KSB7XFxyXFxuICAgICAgICBvKHQuc3BsaXQoXFxcIiBcXFwiKSwgZnVuY3Rpb24gKHQpIHtcXHJcXG4gICAgICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QucmVtb3ZlKHQpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gYyhlLCB0KSB7XFxyXFxuICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QuY29udGFpbnModCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gdShlLCB0KSB7XFxyXFxuICAgICAgICBmb3IgKDsgZSAhPT0gZG9jdW1lbnQuYm9keTsgKSB7XFxyXFxuICAgICAgICAgICAgaWYgKCEoZSA9IGUucGFyZW50RWxlbWVudCkpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIGUubWF0Y2hlc1xcclxcbiAgICAgICAgICAgICAgICAgICAgPyBlLm1hdGNoZXModClcXHJcXG4gICAgICAgICAgICAgICAgICAgIDogZS5tc01hdGNoZXNTZWxlY3Rvcih0KVxcclxcbiAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gZyhlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICBpID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gJiYgYXJndW1lbnRzWzJdO1xcclxcbiAgICAgICAgaWYgKCFlIHx8IFxcXCJcXFwiID09PSB0KSByZXR1cm4gITE7XFxyXFxuICAgICAgICBpZiAoXFxcIm5vbmVcXFwiID09IHQpIHJldHVybiBUKGkpICYmIGkoKSwgITE7XFxyXFxuICAgICAgICB2YXIgbiA9IHgoKSxcXHJcXG4gICAgICAgICAgICBzID0gdC5zcGxpdChcXFwiIFxcXCIpO1xcclxcbiAgICAgICAgbyhzLCBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgIGgoZSwgXFxcImdcXFwiICsgdCk7XFxyXFxuICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICBhKG4sIHtcXHJcXG4gICAgICAgICAgICAgICAgb25FbGVtZW50OiBlLFxcclxcbiAgICAgICAgICAgICAgICBhdm9pZER1cGxpY2F0ZTogITEsXFxyXFxuICAgICAgICAgICAgICAgIG9uY2U6ICEwLFxcclxcbiAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBvKHMsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZCh0LCBcXFwiZ1xcXCIgKyBlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFQoaSkgJiYgaSgpO1xcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIH0pO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHYoZSkge1xcclxcbiAgICAgICAgdmFyIHQgPVxcclxcbiAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdID8gYXJndW1lbnRzWzFdIDogXFxcIlxcXCI7XFxyXFxuICAgICAgICBpZiAoXFxcIlxcXCIgPT0gdClcXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAoZS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgIChlLnN0eWxlLk1velRyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgKGUuc3R5bGUubXNUcmFuc2Zvcm0gPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgIChlLnN0eWxlLk9UcmFuc2Zvcm0gPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgIChlLnN0eWxlLnRyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgKGUuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdCksXFxyXFxuICAgICAgICAgICAgKGUuc3R5bGUuTW96VHJhbnNmb3JtID0gdCksXFxyXFxuICAgICAgICAgICAgKGUuc3R5bGUubXNUcmFuc2Zvcm0gPSB0KSxcXHJcXG4gICAgICAgICAgICAoZS5zdHlsZS5PVHJhbnNmb3JtID0gdCksXFxyXFxuICAgICAgICAgICAgKGUuc3R5bGUudHJhbnNmb3JtID0gdCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gZihlKSB7XFxyXFxuICAgICAgICBlLnN0eWxlLmRpc3BsYXkgPSBcXFwiYmxvY2tcXFwiO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHAoZSkge1xcclxcbiAgICAgICAgZS5zdHlsZS5kaXNwbGF5ID0gXFxcIm5vbmVcXFwiO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIG0oZSkge1xcclxcbiAgICAgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXFxyXFxuICAgICAgICAgICAgaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcImRpdlxcXCIpO1xcclxcbiAgICAgICAgZm9yIChpLmlubmVySFRNTCA9IGU7IGkuZmlyc3RDaGlsZDsgKSB0LmFwcGVuZENoaWxkKGkuZmlyc3RDaGlsZCk7XFxyXFxuICAgICAgICByZXR1cm4gdDtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiB5KCkge1xcclxcbiAgICAgICAgcmV0dXJuIHtcXHJcXG4gICAgICAgICAgICB3aWR0aDpcXHJcXG4gICAgICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGgsXFxyXFxuICAgICAgICAgICAgaGVpZ2h0OlxcclxcbiAgICAgICAgICAgICAgICB3aW5kb3cuaW5uZXJIZWlnaHQgfHxcXHJcXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCB8fFxcclxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodCxcXHJcXG4gICAgICAgIH07XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24geCgpIHtcXHJcXG4gICAgICAgIHZhciBlLFxcclxcbiAgICAgICAgICAgIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXCJmYWtlZWxlbWVudFxcXCIpLFxcclxcbiAgICAgICAgICAgIGkgPSB7XFxyXFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogXFxcImFuaW1hdGlvbmVuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgIE9BbmltYXRpb246IFxcXCJvQW5pbWF0aW9uRW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgTW96QW5pbWF0aW9uOiBcXFwiYW5pbWF0aW9uZW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgV2Via2l0QW5pbWF0aW9uOiBcXFwid2Via2l0QW5pbWF0aW9uRW5kXFxcIixcXHJcXG4gICAgICAgICAgICB9O1xcclxcbiAgICAgICAgZm9yIChlIGluIGkpIGlmICh2b2lkIDAgIT09IHQuc3R5bGVbZV0pIHJldHVybiBpW2VdO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIGIoZSwgdCwgaSwgbikge1xcclxcbiAgICAgICAgaWYgKGUoKSkgdCgpO1xcclxcbiAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgdmFyIHM7XFxyXFxuICAgICAgICAgICAgaSB8fCAoaSA9IDEwMCk7XFxyXFxuICAgICAgICAgICAgdmFyIGwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgIGUoKSAmJiAoY2xlYXJJbnRlcnZhbChsKSwgcyAmJiBjbGVhclRpbWVvdXQocyksIHQoKSk7XFxyXFxuICAgICAgICAgICAgfSwgaSk7XFxyXFxuICAgICAgICAgICAgbiAmJlxcclxcbiAgICAgICAgICAgICAgICAocyA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChsKTtcXHJcXG4gICAgICAgICAgICAgICAgfSwgbikpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIFMoZSwgdCwgaSkge1xcclxcbiAgICAgICAgaWYgKEkoZSkpIGNvbnNvbGUuZXJyb3IoXFxcIkluamVjdCBhc3NldHMgZXJyb3JcXFwiKTtcXHJcXG4gICAgICAgIGVsc2UgaWYgKChUKHQpICYmICgoaSA9IHQpLCAodCA9ICExKSksIEModCkgJiYgdCBpbiB3aW5kb3cpKVxcclxcbiAgICAgICAgICAgIFQoaSkgJiYgaSgpO1xcclxcbiAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgdmFyIG47XFxyXFxuICAgICAgICAgICAgaWYgKC0xICE9PSBlLmluZGV4T2YoXFxcIi5jc3NcXFwiKSkge1xcclxcbiAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAobiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2xpbmtbaHJlZj1cXFwiJyArIGUgKyAnXFxcIl0nKSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgIG4ubGVuZ3RoID4gMFxcclxcbiAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAoVChpKSAmJiBpKCkpO1xcclxcbiAgICAgICAgICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFxcXCJoZWFkXFxcIilbMF0sXFxyXFxuICAgICAgICAgICAgICAgICAgICBsID0gcy5xdWVyeVNlbGVjdG9yQWxsKCdsaW5rW3JlbD1cXFwic3R5bGVzaGVldFxcXCJdJyksXFxyXFxuICAgICAgICAgICAgICAgICAgICBvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwibGlua1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgKG8ucmVsID0gXFxcInN0eWxlc2hlZXRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChvLnR5cGUgPSBcXFwidGV4dC9jc3NcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChvLmhyZWYgPSBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChvLm1lZGlhID0gXFxcImFsbFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgbCA/IHMuaW5zZXJ0QmVmb3JlKG8sIGxbMF0pIDogcy5hcHBlbmRDaGlsZChvKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZvaWQgKFQoaSkgJiYgaSgpKVxcclxcbiAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgIChuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2NyaXB0W3NyYz1cXFwiJyArIGUgKyAnXFxcIl0nKSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgbi5sZW5ndGggPiAwXFxyXFxuICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChUKGkpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoQyh0KSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IHdpbmRvd1t0XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpKCk7XFxyXFxuICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICB2YXIgciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcInNjcmlwdFxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAoci50eXBlID0gXFxcInRleHQvamF2YXNjcmlwdFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHIuc3JjID0gZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAoci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFQoaSkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEModCkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2b2lkIDAgIT09IHdpbmRvd1t0XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICB9XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gdygpIHtcXHJcXG4gICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgXFxcIm5hdmlnYXRvclxcXCIgaW4gd2luZG93ICYmXFxyXFxuICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goXFxyXFxuICAgICAgICAgICAgICAgIC8oaVBhZCl8KGlQaG9uZSl8KGlQb2QpfChBbmRyb2lkKXwoUGxheUJvb2spfChCQjEwKXwoQmxhY2tCZXJyeSl8KE9wZXJhIE1pbmkpfChJRU1vYmlsZSl8KHdlYk9TKXwoTWVlR28pL2lcXHJcXG4gICAgICAgICAgICApXFxyXFxuICAgICAgICApO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIFQoZSkge1xcclxcbiAgICAgICAgcmV0dXJuIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIGU7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gQyhlKSB7XFxyXFxuICAgICAgICByZXR1cm4gXFxcInN0cmluZ1xcXCIgPT0gdHlwZW9mIGU7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gayhlKSB7XFxyXFxuICAgICAgICByZXR1cm4gISghZSB8fCAhZS5ub2RlVHlwZSB8fCAxICE9IGUubm9kZVR5cGUpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIEUoZSkge1xcclxcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoZSk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gQShlKSB7XFxyXFxuICAgICAgICByZXR1cm4gZSAmJiBlLmxlbmd0aCAmJiBpc0Zpbml0ZShlLmxlbmd0aCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gTCh0KSB7XFxyXFxuICAgICAgICByZXR1cm4gXFxcIm9iamVjdFxcXCIgPT09IGUodCkgJiYgbnVsbCAhPSB0ICYmICFUKHQpICYmICFFKHQpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIEkoZSkge1xcclxcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gZTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBPKGUsIHQpIHtcXHJcXG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIGhhc093blByb3BlcnR5LmNhbGwoZSwgdCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gUChlKSB7XFxyXFxuICAgICAgICBpZiAoTChlKSkge1xcclxcbiAgICAgICAgICAgIGlmIChlLmtleXMpIHJldHVybiBlLmtleXMoKS5sZW5ndGg7XFxyXFxuICAgICAgICAgICAgdmFyIHQgPSAwO1xcclxcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gZSkgTyhlLCBpKSAmJiB0Kys7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIHQ7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICByZXR1cm4gZS5sZW5ndGg7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gTShlKSB7XFxyXFxuICAgICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQoZSkpICYmIGlzRmluaXRlKGUpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIHooKSB7XFxyXFxuICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgOiAtMSxcXHJcXG4gICAgICAgICAgICB0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgXFxcIi5nYnRuW2RhdGEtdGFib3JkZXJdOm5vdCguZGlzYWJsZWQpXFxcIlxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICBpZiAoIXQubGVuZ3RoKSByZXR1cm4gITE7XFxyXFxuICAgICAgICBpZiAoMSA9PSB0Lmxlbmd0aCkgcmV0dXJuIHRbMF07XFxyXFxuICAgICAgICBcXFwic3RyaW5nXFxcIiA9PSB0eXBlb2YgZSAmJiAoZSA9IHBhcnNlSW50KGUpKTtcXHJcXG4gICAgICAgIHZhciBpID0gW107XFxyXFxuICAgICAgICBvKHQsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgaS5wdXNoKGUuZ2V0QXR0cmlidXRlKFxcXCJkYXRhLXRhYm9yZGVyXFxcIikpO1xcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgICB2YXIgbiA9IE1hdGgubWF4LmFwcGx5KFxcclxcbiAgICAgICAgICAgICAgICBNYXRoLFxcclxcbiAgICAgICAgICAgICAgICBpLm1hcChmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGUpO1xcclxcbiAgICAgICAgICAgICAgICB9KVxcclxcbiAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgcyA9IGUgPCAwID8gMSA6IGUgKyAxO1xcclxcbiAgICAgICAgcyA+IG4gJiYgKHMgPSBcXFwiMVxcXCIpO1xcclxcbiAgICAgICAgdmFyIGwgPSBpLmZpbHRlcihmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gZSA+PSBwYXJzZUludChzKTtcXHJcXG4gICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICByID0gbC5zb3J0KClbMF07XFxyXFxuICAgICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdidG5bZGF0YS10YWJvcmRlcj1cXFwiJy5jb25jYXQociwgJ1xcXCJdJykpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIFgoZSkge1xcclxcbiAgICAgICAgaWYgKGUuZXZlbnRzLmhhc093blByb3BlcnR5KFxcXCJrZXlib2FyZFxcXCIpKSByZXR1cm4gITE7XFxyXFxuICAgICAgICBlLmV2ZW50cy5rZXlib2FyZCA9IGEoXFxcImtleWRvd25cXFwiLCB7XFxyXFxuICAgICAgICAgICAgb25FbGVtZW50OiB3aW5kb3csXFxyXFxuICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICB2YXIgbiA9ICh0ID0gdCB8fCB3aW5kb3cuZXZlbnQpLmtleUNvZGU7XFxyXFxuICAgICAgICAgICAgICAgIGlmICg5ID09IG4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLmdidG4uZm9jdXNlZFxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ub2RlTmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXFwiaW5wdXRcXFwiID09IGwgfHwgXFxcInRleHRhcmVhXFxcIiA9PSBsIHx8IFxcXCJidXR0b25cXFwiID09IGwpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciBvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXFwiLmdidG5bZGF0YS10YWJvcmRlcl1cXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmICghbyB8fCBvLmxlbmd0aCA8PSAwKSByZXR1cm47XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAoIXMpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IHooKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm9pZCAociAmJiAoci5mb2N1cygpLCBoKHIsIFxcXCJmb2N1c2VkXFxcIikpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhciBhID0geihzLmdldEF0dHJpYnV0ZShcXFwiZGF0YS10YWJvcmRlclxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGQocywgXFxcImZvY3VzZWRcXFwiKSwgYSAmJiAoYS5mb2N1cygpLCBoKGEsIFxcXCJmb2N1c2VkXFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIDM5ID09IG4gJiYgZS5uZXh0U2xpZGUoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIDM3ID09IG4gJiYgZS5wcmV2U2xpZGUoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIDI3ID09IG4gJiYgZS5jbG9zZSgpO1xcclxcbiAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBZKGUpIHtcXHJcXG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoZS54ICogZS54ICsgZS55ICogZS55KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBxKGUsIHQpIHtcXHJcXG4gICAgICAgIHZhciBpID0gKGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgdmFyIGkgPSBZKGUpICogWSh0KTtcXHJcXG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkgcmV0dXJuIDA7XFxyXFxuICAgICAgICAgICAgdmFyIG4gPVxcclxcbiAgICAgICAgICAgICAgICAoZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnggKiB0LnggKyBlLnkgKiB0Lnk7XFxyXFxuICAgICAgICAgICAgICAgIH0pKGUsIHQpIC8gaTtcXHJcXG4gICAgICAgICAgICByZXR1cm4gbiA+IDEgJiYgKG4gPSAxKSwgTWF0aC5hY29zKG4pO1xcclxcbiAgICAgICAgfSkoZSwgdCk7XFxyXFxuICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgIChmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICByZXR1cm4gZS54ICogdC55IC0gdC54ICogZS55O1xcclxcbiAgICAgICAgICAgIH0pKGUsIHQpID4gMCAmJiAoaSAqPSAtMSksXFxyXFxuICAgICAgICAgICAgKDE4MCAqIGkpIC8gTWF0aC5QSVxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgfVxcclxcbiAgICB2YXIgTiA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICBmdW5jdGlvbiBlKGkpIHtcXHJcXG4gICAgICAgICAgICB0KHRoaXMsIGUpLCAodGhpcy5oYW5kbGVycyA9IFtdKSwgKHRoaXMuZWwgPSBpKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgbihlLCBbXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcImFkZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnB1c2goZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkZWxcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZSB8fCAodGhpcy5oYW5kbGVycyA9IFtdKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0ID0gdGhpcy5oYW5kbGVycy5sZW5ndGg7IHQgPj0gMDsgdC0tKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzW3RdID09PSBlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZXJzLnNwbGljZSh0LCAxKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRpc3BhdGNoXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgZSA9IDAsIHQgPSB0aGlzLmhhbmRsZXJzLmxlbmd0aDsgZSA8IHQ7IGUrKykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuaGFuZGxlcnNbZV07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJmdW5jdGlvblxcXCIgPT0gdHlwZW9mIGkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuYXBwbHkodGhpcy5lbCwgYXJndW1lbnRzKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIF0pLFxcclxcbiAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICk7XFxyXFxuICAgIH0pKCk7XFxyXFxuICAgIGZ1bmN0aW9uIEQoZSwgdCkge1xcclxcbiAgICAgICAgdmFyIGkgPSBuZXcgTihlKTtcXHJcXG4gICAgICAgIHJldHVybiBpLmFkZCh0KSwgaTtcXHJcXG4gICAgfVxcclxcbiAgICB2YXIgXyA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICBmdW5jdGlvbiBlKGksIG4pIHtcXHJcXG4gICAgICAgICAgICB0KHRoaXMsIGUpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgIFxcXCJzdHJpbmdcXFwiID09IHR5cGVvZiBpID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpKSA6IGkpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5zdGFydCA9IHRoaXMuc3RhcnQuYmluZCh0aGlzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLm1vdmUgPSB0aGlzLm1vdmUuYmluZCh0aGlzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmVuZCA9IHRoaXMuZW5kLmJpbmQodGhpcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5jYW5jZWwgPSB0aGlzLmNhbmNlbC5iaW5kKHRoaXMpKSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcInRvdWNoc3RhcnRcXFwiLCB0aGlzLnN0YXJ0LCAhMSksXFxyXFxuICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxcXCJ0b3VjaG1vdmVcXFwiLCB0aGlzLm1vdmUsICExKSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcInRvdWNoZW5kXFxcIiwgdGhpcy5lbmQsICExKSxcXHJcXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcInRvdWNoY2FuY2VsXFxcIiwgdGhpcy5jYW5jZWwsICExKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMucHJlViA9IHsgeDogbnVsbCwgeTogbnVsbCB9KSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMucGluY2hTdGFydExlbiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy56b29tID0gMSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmlzRG91YmxlVGFwID0gITEpO1xcclxcbiAgICAgICAgICAgIHZhciBzID0gZnVuY3Rpb24gKCkge307XFxyXFxuICAgICAgICAgICAgKHRoaXMucm90YXRlID0gRCh0aGlzLmVsZW1lbnQsIG4ucm90YXRlIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudG91Y2hTdGFydCA9IEQodGhpcy5lbGVtZW50LCBuLnRvdWNoU3RhcnQgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5tdWx0aXBvaW50U3RhcnQgPSBEKFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LFxcclxcbiAgICAgICAgICAgICAgICAgICAgbi5tdWx0aXBvaW50U3RhcnQgfHwgc1xcclxcbiAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMubXVsdGlwb2ludEVuZCA9IEQodGhpcy5lbGVtZW50LCBuLm11bHRpcG9pbnRFbmQgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5waW5jaCA9IEQodGhpcy5lbGVtZW50LCBuLnBpbmNoIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuc3dpcGUgPSBEKHRoaXMuZWxlbWVudCwgbi5zd2lwZSB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnRhcCA9IEQodGhpcy5lbGVtZW50LCBuLnRhcCB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmRvdWJsZVRhcCA9IEQodGhpcy5lbGVtZW50LCBuLmRvdWJsZVRhcCB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLmxvbmdUYXAgPSBEKHRoaXMuZWxlbWVudCwgbi5sb25nVGFwIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuc2luZ2xlVGFwID0gRCh0aGlzLmVsZW1lbnQsIG4uc2luZ2xlVGFwIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMucHJlc3NNb3ZlID0gRCh0aGlzLmVsZW1lbnQsIG4ucHJlc3NNb3ZlIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudHdvRmluZ2VyUHJlc3NNb3ZlID0gRChcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIG4udHdvRmluZ2VyUHJlc3NNb3ZlIHx8IHNcXHJcXG4gICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnRvdWNoTW92ZSA9IEQodGhpcy5lbGVtZW50LCBuLnRvdWNoTW92ZSB8fCBzKSksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnRvdWNoRW5kID0gRCh0aGlzLmVsZW1lbnQsIG4udG91Y2hFbmQgfHwgcykpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy50b3VjaENhbmNlbCA9IEQodGhpcy5lbGVtZW50LCBuLnRvdWNoQ2FuY2VsIHx8IHMpKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMudHJhbnNsYXRlQ29udGFpbmVyID0gdGhpcy5lbGVtZW50KSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuX2NhbmNlbEFsbEhhbmRsZXIgPSB0aGlzLmNhbmNlbEFsbC5iaW5kKHRoaXMpKSxcXHJcXG4gICAgICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXFxcInNjcm9sbFxcXCIsIHRoaXMuX2NhbmNlbEFsbEhhbmRsZXIpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5kZWx0YSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy5sYXN0ID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLm5vdyA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAodGhpcy50YXBUaW1lb3V0ID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnNpbmdsZVRhcFRpbWVvdXQgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMubG9uZ1RhcFRpbWVvdXQgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuc3dpcGVUaW1lb3V0ID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLngxID0gdGhpcy54MiA9IHRoaXMueTEgPSB0aGlzLnkyID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICh0aGlzLnByZVRhcFBvc2l0aW9uID0geyB4OiBudWxsLCB5OiBudWxsIH0pO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic3RhcnRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudG91Y2hlcykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQubm9kZU5hbWUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtcXFwiYVxcXCIsIFxcXCJidXR0b25cXFwiLCBcXFwiaW5wdXRcXFwiXS5pbmRleE9mKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgPj0gMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiaWdub3JlIGRyYWcgZm9yIHRoaXMgdG91Y2hlZCBlbGVtZW50XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLm5vdyA9IERhdGUubm93KCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLngxID0gZS50b3VjaGVzWzBdLnBhZ2VYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy55MSA9IGUudG91Y2hlc1swXS5wYWdlWSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGVsdGEgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdyAtICh0aGlzLmxhc3QgfHwgdGhpcy5ub3cpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoU3RhcnQuZGlzcGF0Y2goZSwgdGhpcy5lbGVtZW50KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLnByZVRhcFBvc2l0aW9uLnggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLmlzRG91YmxlVGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVsdGEgPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbHRhIDw9IDI1MCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVUYXBQb3NpdGlvbi54IC0gdGhpcy54MVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA8IDMwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVRhcFBvc2l0aW9uLnkgLSB0aGlzLnkxXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDwgMzApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmlzRG91YmxlVGFwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVUYXBUaW1lb3V0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmVUYXBQb3NpdGlvbi54ID0gdGhpcy54MSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJlVGFwUG9zaXRpb24ueSA9IHRoaXMueTEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmxhc3QgPSB0aGlzLm5vdyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMucHJlVjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID4gMSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbExvbmdUYXAoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsU2luZ2xlVGFwKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg6IGUudG91Y2hlc1sxXS5wYWdlWCAtIHRoaXMueDEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHk6IGUudG91Y2hlc1sxXS5wYWdlWSAtIHRoaXMueTEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC54ID0gaS54KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQueSA9IGkueSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnBpbmNoU3RhcnRMZW4gPSBZKHQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBvaW50U3RhcnQuZGlzcGF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5fcHJldmVudFRhcCA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5sb25nVGFwVGltZW91dCA9IHNldFRpbWVvdXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RhcC5kaXNwYXRjaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5fcHJldmVudFRhcCA9ICEwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA3NTBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm1vdmVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUudG91Y2hlcykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMucHJlVixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLnRvdWNoZXMubGVuZ3RoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUudG91Y2hlc1swXS5wYWdlWCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlLnRvdWNoZXNbMF0ucGFnZVk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHRoaXMuaXNEb3VibGVUYXAgPSAhMSksIGkgPiAxKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBlLnRvdWNoZXNbMV0ucGFnZVgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGUudG91Y2hlc1sxXS5wYWdlWSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0ge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4OiBlLnRvdWNoZXNbMV0ucGFnZVggLSBuLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB5OiBlLnRvdWNoZXNbMV0ucGFnZVkgLSBzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0LnggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5waW5jaFN0YXJ0TGVuID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKGUuem9vbSA9IFkocikgLyB0aGlzLnBpbmNoU3RhcnRMZW4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBpbmNoLmRpc3BhdGNoKGUsIHRoaXMuZWxlbWVudCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmFuZ2xlID0gcShyLCB0KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUuZGlzcGF0Y2goZSwgdGhpcy5lbGVtZW50KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQueCA9IHIueCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQueSA9IHIueSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy54MiAmJiBudWxsICE9PSB0aGlzLnN4MlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoZS5kZWx0YVggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAobiAtIHRoaXMueDIgKyBsIC0gdGhpcy5zeDIpIC8gMiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuZGVsdGFZID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMgLSB0aGlzLnkyICsgbyAtIHRoaXMuc3kyKSAvIDIpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgoZS5kZWx0YVggPSAwKSwgKGUuZGVsdGFZID0gMCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHdvRmluZ2VyUHJlc3NNb3ZlLmRpc3BhdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnN4MiA9IGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnN5MiA9IG8pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHRoaXMueDIpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5kZWx0YVggPSBuIC0gdGhpcy54MiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmRlbHRhWSA9IHMgLSB0aGlzLnkyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IE1hdGguYWJzKHRoaXMueDEgLSB0aGlzLngyKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCA9IE1hdGguYWJzKHRoaXMueTEgLSB0aGlzLnkyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoYSA+IDEwIHx8IGggPiAxMCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuX3ByZXZlbnRUYXAgPSAhMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgKGUuZGVsdGFYID0gMCksIChlLmRlbHRhWSA9IDApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVzc01vdmUuZGlzcGF0Y2goZSwgdGhpcy5lbGVtZW50KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW92ZS5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsTG9uZ1RhcCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueDIgPSBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnkyID0gcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID4gMSAmJiBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmNoYW5nZWRUb3VjaGVzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NhbmNlbExvbmdUYXAoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXMubGVuZ3RoIDwgMiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubXVsdGlwb2ludEVuZC5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc3gyID0gdGhpcy5zeTIgPSBudWxsKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54MiAmJiBNYXRoLmFicyh0aGlzLngxIC0gdGhpcy54MikgPiAzMCkgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnkyICYmIE1hdGguYWJzKHRoaXMueTEgLSB0aGlzLnkyKSA+IDMwKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChlLmRpcmVjdGlvbiA9IHRoaXMuX3N3aXBlRGlyZWN0aW9uKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueDEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54MixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkxLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueTJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc3dpcGVUaW1lb3V0ID0gc2V0VGltZW91dChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc3dpcGUuZGlzcGF0Y2goZSwgdC5lbGVtZW50KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLnRhcFRpbWVvdXQgPSBzZXRUaW1lb3V0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5fcHJldmVudFRhcCB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50YXAuZGlzcGF0Y2goZSwgdC5lbGVtZW50KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaXNEb3VibGVUYXAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5kb3VibGVUYXAuZGlzcGF0Y2goXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZWxlbWVudFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuaXNEb3VibGVUYXAgPSAhMSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmlzRG91YmxlVGFwIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuc2luZ2xlVGFwVGltZW91dCA9IHNldFRpbWVvdXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuc2luZ2xlVGFwLmRpc3BhdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbGVtZW50XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAyNTBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRW5kLmRpc3BhdGNoKGUsIHRoaXMuZWxlbWVudCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmVWLnggPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZVYueSA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuem9vbSA9IDEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucGluY2hTdGFydExlbiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueDEgPSB0aGlzLngyID0gdGhpcy55MSA9IHRoaXMueTIgPSBudWxsKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJjYW5jZWxBbGxcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5fcHJldmVudFRhcCA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2luZ2xlVGFwVGltZW91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRhcFRpbWVvdXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nVGFwVGltZW91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnN3aXBlVGltZW91dCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJjYW5jZWxcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxBbGwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b3VjaENhbmNlbC5kaXNwYXRjaChlLCB0aGlzLmVsZW1lbnQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiX2NhbmNlbExvbmdUYXBcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5sb25nVGFwVGltZW91dCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJfY2FuY2VsU2luZ2xlVGFwXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2luZ2xlVGFwVGltZW91dCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJfc3dpcGVEaXJlY3Rpb25cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKGUgLSB0KSA+PSBNYXRoLmFicyhpIC0gbilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBlIC0gdCA+IDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXFxcIkxlZnRcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJSaWdodFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBpIC0gbiA+IDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwiVXBcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIkRvd25cXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib25cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1tlXSAmJiB0aGlzW2VdLmFkZCh0KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm9mZlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzW2VdICYmIHRoaXNbZV0uZGVsKHQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZGVzdHJveVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlVGFwVGltZW91dCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc2luZ2xlVGFwVGltZW91dCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFwVGltZW91dCAmJiBjbGVhclRpbWVvdXQodGhpcy50YXBUaW1lb3V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sb25nVGFwVGltZW91dCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMubG9uZ1RhcFRpbWVvdXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXBlVGltZW91dCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuc3dpcGVUaW1lb3V0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2hzdGFydFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInRvdWNobW92ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2hlbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2hjYW5jZWxcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yb3RhdGUuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tdWx0aXBvaW50U3RhcnQuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwb2ludEVuZC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waW5jaC5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2lwZS5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50YXAuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlVGFwLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxvbmdUYXAuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlVGFwLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNzTW92ZS5kZWwoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50d29GaW5nZXJQcmVzc01vdmUuZGVsKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hNb3ZlLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRW5kLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoQ2FuY2VsLmRlbCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmVWID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGluY2hTdGFydExlbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb20gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0RvdWJsZVRhcCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbHRhID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGFzdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vdyA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcFRpbWVvdXQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaW5nbGVUYXBUaW1lb3V0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RhcFRpbWVvdXQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zd2lwZVRpbWVvdXQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54MSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngyID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueTEgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy55MiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVRhcFBvc2l0aW9uID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hTdGFydCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcG9pbnRTdGFydCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm11bHRpcG9pbnRFbmQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5waW5jaCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN3aXBlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlVGFwID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubG9uZ1RhcCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZVRhcCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXNzTW92ZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoTW92ZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdWNoRW5kID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudG91Y2hDYW5jZWwgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50d29GaW5nZXJQcmVzc01vdmUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzY3JvbGxcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FuY2VsQWxsSGFuZGxlclxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgZVxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgfSkoKTtcXHJcXG4gICAgZnVuY3Rpb24gVyhlKSB7XFxyXFxuICAgICAgICB2YXIgdCA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcImZha2VlbGVtZW50XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICBpID0ge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IFxcXCJ0cmFuc2l0aW9uZW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBPVHJhbnNpdGlvbjogXFxcIm9UcmFuc2l0aW9uRW5kXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBNb3pUcmFuc2l0aW9uOiBcXFwidHJhbnNpdGlvbmVuZFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgV2Via2l0VHJhbnNpdGlvbjogXFxcIndlYmtpdFRyYW5zaXRpb25FbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICAgICAgZm9yIChlIGluIGkpIGlmICh2b2lkIDAgIT09IHQuc3R5bGVbZV0pIHJldHVybiBpW2VdO1xcclxcbiAgICAgICAgICAgIH0pKCksXFxyXFxuICAgICAgICAgICAgaSA9XFxyXFxuICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCB8fFxcclxcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoLFxcclxcbiAgICAgICAgICAgIG4gPSBjKGUsIFxcXCJnc2xpZGUtbWVkaWFcXFwiKSA/IGUgOiBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSxcXHJcXG4gICAgICAgICAgICBzID0gdShuLCBcXFwiLmdpbm5lci1jb250YWluZXJcXFwiKSxcXHJcXG4gICAgICAgICAgICBsID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLWRlc2NyaXB0aW9uXFxcIik7XFxyXFxuICAgICAgICBpID4gNzY5ICYmIChuID0gcyksXFxyXFxuICAgICAgICAgICAgaChuLCBcXFwiZ3Jlc2V0XFxcIiksXFxyXFxuICAgICAgICAgICAgdihuLCBcXFwidHJhbnNsYXRlM2QoMCwgMCwgMClcXFwiKSxcXHJcXG4gICAgICAgICAgICBhKHQsIHtcXHJcXG4gICAgICAgICAgICAgICAgb25FbGVtZW50OiBuLFxcclxcbiAgICAgICAgICAgICAgICBvbmNlOiAhMCxcXHJcXG4gICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgZChuLCBcXFwiZ3Jlc2V0XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgKG4uc3R5bGUub3BhY2l0eSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICBsICYmIChsLnN0eWxlLm9wYWNpdHkgPSBcXFwiXFxcIik7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gQihlKSB7XFxyXFxuICAgICAgICBpZiAoZS5ldmVudHMuaGFzT3duUHJvcGVydHkoXFxcInRvdWNoXFxcIikpIHJldHVybiAhMTtcXHJcXG4gICAgICAgIHZhciB0LFxcclxcbiAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgbixcXHJcXG4gICAgICAgICAgICBzID0geSgpLFxcclxcbiAgICAgICAgICAgIGwgPSBzLndpZHRoLFxcclxcbiAgICAgICAgICAgIG8gPSBzLmhlaWdodCxcXHJcXG4gICAgICAgICAgICByID0gITEsXFxyXFxuICAgICAgICAgICAgYSA9IG51bGwsXFxyXFxuICAgICAgICAgICAgZyA9IG51bGwsXFxyXFxuICAgICAgICAgICAgZiA9IG51bGwsXFxyXFxuICAgICAgICAgICAgcCA9ICExLFxcclxcbiAgICAgICAgICAgIG0gPSAxLFxcclxcbiAgICAgICAgICAgIHggPSAxLFxcclxcbiAgICAgICAgICAgIGIgPSAhMSxcXHJcXG4gICAgICAgICAgICBTID0gITEsXFxyXFxuICAgICAgICAgICAgdyA9IG51bGwsXFxyXFxuICAgICAgICAgICAgVCA9IG51bGwsXFxyXFxuICAgICAgICAgICAgQyA9IG51bGwsXFxyXFxuICAgICAgICAgICAgayA9IG51bGwsXFxyXFxuICAgICAgICAgICAgRSA9IDAsXFxyXFxuICAgICAgICAgICAgQSA9IDAsXFxyXFxuICAgICAgICAgICAgTCA9ICExLFxcclxcbiAgICAgICAgICAgIEkgPSAhMSxcXHJcXG4gICAgICAgICAgICBPID0ge30sXFxyXFxuICAgICAgICAgICAgUCA9IHt9LFxcclxcbiAgICAgICAgICAgIE0gPSAwLFxcclxcbiAgICAgICAgICAgIHogPSAwLFxcclxcbiAgICAgICAgICAgIFggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcXFwiZ2xpZ2h0Ym94LXNsaWRlclxcXCIpLFxcclxcbiAgICAgICAgICAgIFkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIuZ292ZXJsYXlcXFwiKSxcXHJcXG4gICAgICAgICAgICBxID0gbmV3IF8oWCwge1xcclxcbiAgICAgICAgICAgICAgICB0b3VjaFN0YXJ0OiBmdW5jdGlvbiAodCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICgociA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAoYyh0LnRhcmdldFRvdWNoZXNbMF0udGFyZ2V0LCBcXFwiZ2lubmVyLWNvbnRhaW5lclxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUodC50YXJnZXRUb3VjaGVzWzBdLnRhcmdldCwgXFxcIi5nc2xpZGUtZGVzY1xcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJhXFxcIiA9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50YXJnZXRUb3VjaGVzWzBdLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAociA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB1KHQudGFyZ2V0VG91Y2hlc1swXS50YXJnZXQsIFxcXCIuZ3NsaWRlLWlubGluZVxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFjKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC50YXJnZXRUb3VjaGVzWzBdLnRhcmdldC5wYXJlbnROb2RlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdzbGlkZS1pbmxpbmVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcilcXHJcXG4gICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKChQID0gdC50YXJnZXRUb3VjaGVzWzBdKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKE8ucGFnZVggPSB0LnRhcmdldFRvdWNoZXNbMF0ucGFnZVgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoTy5wYWdlWSA9IHQudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChNID0gdC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoeiA9IHQudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGEgPSBlLmFjdGl2ZVNsaWRlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGcgPSBhLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuID0gYS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLWlubGluZVxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGYgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhnLCBcXFwiZ3NsaWRlLWltYWdlXFxcIikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChmID0gZy5xdWVyeVNlbGVjdG9yKFxcXCJpbWdcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh3aW5kb3cuaW5uZXJXaWR0aCB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoKSA+IDc2OSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGcgPSBhLnF1ZXJ5U2VsZWN0b3IoXFxcIi5naW5uZXItY29udGFpbmVyXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKFksIFxcXCJncmVzZXRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wYWdlWCA+IDIwICYmIHQucGFnZVggPCB3aW5kb3cuaW5uZXJXaWR0aCAtIDIwKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgdG91Y2hNb3ZlOiBmdW5jdGlvbiAocykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIgJiYgKChQID0gcy50YXJnZXRUb3VjaGVzWzBdKSwgIWIgJiYgIVMpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gJiYgbi5vZmZzZXRIZWlnaHQgPiBvKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gTy5wYWdlWCAtIFAucGFnZVg7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhhKSA8PSAxMykgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gITA7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBzLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IHMudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ID0gTSAtIGQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG0gPSB6IC0gYztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChNYXRoLmFicyh1KSA+IE1hdGguYWJzKG0pXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoTCA9ICExKSwgKEkgPSAhMCkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgoSSA9ICExKSwgKEwgPSAhMCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodCA9IFAucGFnZVggLSBPLnBhZ2VYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKEUgPSAoMTAwICogdCkgLyBsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSBQLnBhZ2VZIC0gTy5wYWdlWSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChBID0gKDEwMCAqIGkpIC8gbyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEwgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaCA9IDEgLSBNYXRoLmFicyhpKSAvIG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFkuc3R5bGUub3BhY2l0eSA9IGgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXR0aW5ncy50b3VjaEZvbGxvd0F4aXMgJiYgKEUgPSAwKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoaCA9IDEgLSBNYXRoLmFicyh0KSAvIGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGcuc3R5bGUub3BhY2l0eSA9IGgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXR0aW5ncy50b3VjaEZvbGxvd0F4aXMgJiYgKEEgPSAwKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICFmKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYoZywgXFxcInRyYW5zbGF0ZTNkKFxcXCIuY29uY2F0KEUsIFxcXCIlLCAwLCAwKVxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidHJhbnNsYXRlM2QoXFxcIi5jb25jYXQoRSwgXFxcIiUsIFxcXCIpLmNvbmNhdChBLCBcXFwiJSwgMClcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHRvdWNoRW5kOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBpZiAocikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoKHAgPSAhMSksIFMgfHwgYikpIHJldHVybiAoQyA9IHcpLCB2b2lkIChrID0gVCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBNYXRoLmFicyhwYXJzZUludChBKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBNYXRoLmFicyhwYXJzZUludChFKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA+IDI5ICYmIGYpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdCA8IDI5ICYmIGkgPCAyNVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoaChZLCBcXFwiZ3Jlc2V0XFxcIiksIChZLnN0eWxlLm9wYWNpdHkgPSAxKSwgVyhnKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdm9pZCAwO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgbXVsdGlwb2ludEVuZDogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgYiA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfSwgNTApO1xcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBtdWx0aXBvaW50U3RhcnQ6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIChiID0gITApLCAobSA9IHggfHwgMSk7XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIHBpbmNoOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmIHx8IHApIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIChiID0gITApLCAoZi5zY2FsZVggPSBmLnNjYWxlWSA9IG0gKiBlLnpvb20pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBtICogZS56b29tO1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKCgoUyA9ICEwKSwgdCA8PSAxKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoUyA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQgPSAxKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGsgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKEMgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHcgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKFQgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCBmLnNldEF0dHJpYnV0ZShcXFwic3R5bGVcXFwiLCBcXFwiXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgdCA+IDQuNSAmJiAodCA9IDQuNSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKGYuc3R5bGUudHJhbnNmb3JtID0gXFxcInNjYWxlM2QoXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHQsIFxcXCIsIFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodCwgXFxcIiwgMSlcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKHggPSB0KTtcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgcHJlc3NNb3ZlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgaWYgKFMgJiYgIWIpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IFAucGFnZVggLSBPLnBhZ2VYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gUC5wYWdlWSAtIE8ucGFnZVk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgQyAmJiAodCArPSBDKSwgayAmJiAoaSArPSBrKSwgKHcgPSB0KSwgKFQgPSBpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IFxcXCJ0cmFuc2xhdGUzZChcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodCwgXFxcInB4LCBcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KGksIFxcXCJweCwgMClcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB4ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuICs9IFxcXCIgc2NhbGUzZChcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHgsIFxcXCIsIFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHgsIFxcXCIsIDEpXFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2KGYsIG4pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBzd2lwZTogZnVuY3Rpb24gKHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGlmICghUylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYikgYiA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxcIkxlZnRcXFwiID09IHQuZGlyZWN0aW9uKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5pbmRleCA9PSBlLmVsZW1lbnRzLmxlbmd0aCAtIDEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFcoZyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm5leHRTbGlkZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXFwiUmlnaHRcXFwiID09IHQuZGlyZWN0aW9uKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PSBlLmluZGV4KSByZXR1cm4gVyhnKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldlNsaWRlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICBlLmV2ZW50cy50b3VjaCA9IHE7XFxyXFxuICAgIH1cXHJcXG4gICAgdmFyIEggPSAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGUoaSwgbikge1xcclxcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICBsID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1syXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1syXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XFxyXFxuICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0KHRoaXMsIGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW1nID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5zbGlkZSA9IG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMub25jbG9zZSA9IGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcuc2V0Wm9vbUV2ZW50cylcXHJcXG4gICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAodGhpcy5hY3RpdmUgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy56b29tZWRJbiA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmRyYWdnaW5nID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnhPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnlPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNlZG93blxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuZHJhZ1N0YXJ0KGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtb3VzZXVwXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5kcmFnRW5kKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtb3VzZW1vdmVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzLmRyYWcoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAhMVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcImNsaWNrXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5zbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoXFxcImRyYWdnaW5nLW5hdlxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChzLnpvb21PdXQoKSwgITEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHMuem9vbWVkSW5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdm9pZCAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnpvb21lZEluICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhcy5kcmFnZ2luZyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy56b29tT3V0KClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBzLnpvb21JbigpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbWcuc2V0Wm9vbUV2ZW50cyA9ICEwKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgbihlLCBbXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiem9vbUluXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMud2lkb3dXaWR0aCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0aGlzLnpvb21lZEluIHx8IGUgPD0gNzY4KSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzLmltZztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJkYXRhLXN0eWxlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5nZXRBdHRyaWJ1dGUoXFxcInN0eWxlXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnN0eWxlLm1heFdpZHRoID0gdC5uYXR1cmFsV2lkdGggKyBcXFwicHhcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5zdHlsZS5tYXhIZWlnaHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm5hdHVyYWxIZWlnaHQgKyBcXFwicHhcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lm5hdHVyYWxXaWR0aCA+IGUpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGUgLyAyIC0gdC5uYXR1cmFsV2lkdGggLyAyO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5wYXJlbnROb2RlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUuY2xhc3NMaXN0LmFkZChcXFwiem9vbWVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuem9vbWVkSW4gPSAhMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJ6b29tT3V0XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZShcXFwic3R5bGVcXFwiLCBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInN0eWxlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmltZy5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtc3R5bGVcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUuY2xhc3NMaXN0LnJlbW92ZShcXFwiem9vbWVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy56b29tZWRJbiA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRYID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy54T2Zmc2V0ID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy55T2Zmc2V0ID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2xvc2UgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZnVuY3Rpb25cXFwiID09IHR5cGVvZiB0aGlzLm9uY2xvc2UgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uY2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkcmFnU3RhcnRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21lZEluXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoXFxcInRvdWNoc3RhcnRcXFwiID09PSBlLnR5cGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgodGhpcy5pbml0aWFsWCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFggLVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueE9mZnNldCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFkgLVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueU9mZnNldCkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoKHRoaXMuaW5pdGlhbFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WCAtIHRoaXMueE9mZnNldCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRZIC0gdGhpcy55T2Zmc2V0KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldCA9PT0gdGhpcy5pbWcgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuYWN0aXZlID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLmNsYXNzTGlzdC5hZGQoXFxcImRyYWdnaW5nXFxcIikpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKHRoaXMuYWN0aXZlID0gITEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdFbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxYID0gdGhpcy5jdXJyZW50WCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9IHRoaXMuY3VycmVudFkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aXZlID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuZHJhZ2dpbmcgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LmltZy5pc0RyYWdnaW5nID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LmltZy5jbGFzc0xpc3QucmVtb3ZlKFxcXCJkcmFnZ2luZ1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkcmFnXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnByZXZlbnREZWZhdWx0KCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2htb3ZlXFxcIiA9PT0gZS50eXBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHRoaXMuY3VycmVudFggPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudG91Y2hlc1swXS5jbGllbnRYIC0gdGhpcy5pbml0aWFsWCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLmluaXRpYWxZKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICgodGhpcy5jdXJyZW50WCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRYIC0gdGhpcy5pbml0aWFsWCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRZIC0gdGhpcy5pbml0aWFsWSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IHRoaXMuY3VycmVudFgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IHRoaXMuY3VycmVudFkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW1nLmlzRHJhZ2dpbmcgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kcmFnZ2luZyA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW1nLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50WVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib25Nb3ZlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuem9vbWVkSW4pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZS5jbGllbnRYIC0gdGhpcy5pbWcubmF0dXJhbFdpZHRoIC8gMixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5jbGllbnRZIC0gdGhpcy5pbWcubmF0dXJhbEhlaWdodCAvIDI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRyYW5zbGF0ZSh0aGlzLmltZywgdCwgaSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzZXRUcmFuc2xhdGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnN0eWxlLnRyYW5zZm9ybSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidHJhbnNsYXRlM2QoXFxcIiArIHQgKyBcXFwicHgsIFxcXCIgKyBpICsgXFxcInB4LCAwKVxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwid2lkb3dXaWR0aFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5pbm5lcldpZHRoIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgfSkoKSxcXHJcXG4gICAgICAgIFYgPSAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgIG4gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDoge307XFxyXFxuICAgICAgICAgICAgICAgIHQodGhpcywgZSk7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBzID0gbi5kcmFnRWwsXFxyXFxuICAgICAgICAgICAgICAgICAgICBsID0gbi50b2xlcmFuY2VYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgbyA9IHZvaWQgMCA9PT0gbCA/IDQwIDogbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHIgPSBuLnRvbGVyYW5jZVksXFxyXFxuICAgICAgICAgICAgICAgICAgICBhID0gdm9pZCAwID09PSByID8gNjUgOiByLFxcclxcbiAgICAgICAgICAgICAgICAgICAgaCA9IG4uc2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICBkID0gdm9pZCAwID09PSBoID8gbnVsbCA6IGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICBjID0gbi5pbnN0YW5jZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHUgPSB2b2lkIDAgPT09IGMgPyBudWxsIDogYztcXHJcXG4gICAgICAgICAgICAgICAgKHRoaXMuZWwgPSBzKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGl2ZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmRyYWdnaW5nID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmN1cnJlbnRZID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnhPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnlPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmRpcmVjdGlvbiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMubGFzdERpcmVjdGlvbiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudG9sZXJhbmNlWCA9IG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudG9sZXJhbmNlWSA9IGEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudG9sZXJhbmNlUmVhY2hlZCA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmRyYWdDb250YWluZXIgPSB0aGlzLmVsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnNsaWRlID0gZCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbnN0YW5jZSA9IHUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtb3VzZWRvd25cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBpLmRyYWdTdGFydChlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICExXFxyXFxuICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtb3VzZXVwXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaS5kcmFnRW5kKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgITFcXHJcXG4gICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1vdXNlbW92ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkuZHJhZyhlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICExXFxyXFxuICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkcmFnU3RhcnRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zbGlkZS5jbGFzc0xpc3QuY29udGFpbnMoXFxcInpvb21lZFxcXCIpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2hzdGFydFxcXCIgPT09IGUudHlwZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKCh0aGlzLmluaXRpYWxYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRvdWNoZXNbMF0uY2xpZW50WCAtIHRoaXMueE9mZnNldCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFkgLSB0aGlzLnlPZmZzZXQpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLmluaXRpYWxYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFggLSB0aGlzLnhPZmZzZXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuY2xpZW50WSAtIHRoaXMueU9mZnNldCkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnRhcmdldC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFxcXCJub2RyYWdcXFwiKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdShlLnRhcmdldCwgXFxcIi5ub2RyYWdcXFwiKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLTEgIT09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiaW5wdXRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic2VsZWN0XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInRleHRhcmVhXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImJ1dHRvblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJhXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmluZGV4T2YodClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICh0aGlzLmFjdGl2ZSA9ICExKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGUucHJldmVudERlZmF1bHQoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnRhcmdldCA9PT0gdGhpcy5lbCB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcXFwiaW1nXFxcIiAhPT0gdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KGUudGFyZ2V0LCBcXFwiLmdzbGlkZS1pbmxpbmVcXFwiKSkpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLmFjdGl2ZSA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoXFxcImRyYWdnaW5nXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZHJhZ0NvbnRhaW5lciA9IHUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdpbm5lci1jb250YWluZXJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRyYWdFbmRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuaW5pdGlhbFggPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxZID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFkgPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluaXRpYWxYID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbml0aWFsWSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueU9mZnNldCA9IDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYWN0aXZlID0gITEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb1NsaWRlQ2hhbmdlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLmluc3RhbmNlLnByZXZlbnRPdXRzaWRlQ2xpY2sgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInJpZ2h0XFxcIiA9PSB0aGlzLmRvU2xpZGVDaGFuZ2UgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5wcmV2U2xpZGUoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibGVmdFxcXCIgPT0gdGhpcy5kb1NsaWRlQ2hhbmdlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UubmV4dFNsaWRlKCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kb1NsaWRlQ2xvc2UgJiYgdGhpcy5pbnN0YW5jZS5jbG9zZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2xlcmFuY2VSZWFjaGVkIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUcmFuc2xhdGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZHJhZ0NvbnRhaW5lcixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgITBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuaW5zdGFuY2UucHJldmVudE91dHNpZGVDbGljayA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQudG9sZXJhbmNlUmVhY2hlZCA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQubGFzdERpcmVjdGlvbiA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5kcmFnZ2luZyA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuZWwuaXNEcmFnZ2luZyA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5lbC5jbGFzc0xpc3QucmVtb3ZlKFxcXCJkcmFnZ2luZ1xcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnNsaWRlLmNsYXNzTGlzdC5yZW1vdmUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiZHJhZ2dpbmctbmF2XFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodC5kcmFnQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuZHJhZ0NvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gXFxcIlxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJkcmFnXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZS5jbGFzc0xpc3QuYWRkKFxcXCJkcmFnZ2luZy1uYXZcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidG91Y2htb3ZlXFxcIiA9PT0gZS50eXBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKCh0aGlzLmN1cnJlbnRYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50b3VjaGVzWzBdLmNsaWVudFggLVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXJyZW50WSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudG91Y2hlc1swXS5jbGllbnRZIC1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsWSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKCh0aGlzLmN1cnJlbnRYID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5jbGllbnRYIC0gdGhpcy5pbml0aWFsWCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuY3VycmVudFkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsaWVudFkgLSB0aGlzLmluaXRpYWxZKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMueE9mZnNldCA9IHRoaXMuY3VycmVudFgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnlPZmZzZXQgPSB0aGlzLmN1cnJlbnRZKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbC5pc0RyYWdnaW5nID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRyYWdnaW5nID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvU2xpZGVDaGFuZ2UgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZG9TbGlkZUNsb3NlID0gITEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBNYXRoLmFicyh0aGlzLmN1cnJlbnRYKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gTWF0aC5hYnModGhpcy5jdXJyZW50WSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID49IE1hdGguYWJzKHRoaXMuY3VycmVudFkpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCF0aGlzLmxhc3REaXJlY3Rpb24gfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInhcXFwiID09IHRoaXMubGFzdERpcmVjdGlvbilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnlPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubGFzdERpcmVjdGlvbiA9IFxcXCJ4XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQ29udGFpbmVyLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50WCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuc2hvdWxkQ2hhbmdlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIXRoaXMuaW5zdGFuY2Uuc2V0dGluZ3MuZHJhZ0F1dG9TbmFwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5kb1NsaWRlQ2hhbmdlID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5zdGFuY2Uuc2V0dGluZ3MuZHJhZ0F1dG9TbmFwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluc3RhbmNlLnByZXZlbnRPdXRzaWRlQ2xpY2sgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnRvbGVyYW5jZVJlYWNoZWQgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hY3RpdmUgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5pbnN0YW5jZS5wcmV2ZW50T3V0c2lkZUNsaWNrID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRyYWdFbmQobnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicmlnaHRcXFwiID09IG4gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnByZXZTbGlkZSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImxlZnRcXFwiID09IG4gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLm5leHRTbGlkZSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50b2xlcmFuY2VZID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA+PSB0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCF0aGlzLmxhc3REaXJlY3Rpb24gfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInlcXFwiID09IHRoaXMubGFzdERpcmVjdGlvbilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnhPZmZzZXQgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubGFzdERpcmVjdGlvbiA9IFxcXCJ5XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VHJhbnNsYXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kcmFnQ29udGFpbmVyLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IHRoaXMuc2hvdWxkQ2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5kcmFnQXV0b1NuYXAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmRvU2xpZGVDbG9zZSA9ICEwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldHRpbmdzXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRyYWdBdXRvU25hcCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5jbG9zZSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2hvdWxkQ2hhbmdlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnModGhpcy5jdXJyZW50WCkgPj0gdGhpcy50b2xlcmFuY2VYKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuY3VycmVudFggPiAwID8gXFxcInJpZ2h0XFxcIiA6IFxcXCJsZWZ0XFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoXFxcImxlZnRcXFwiID09IHQgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlICE9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlLnBhcmVudE5vZGUubGFzdENoaWxkKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChcXFwicmlnaHRcXFwiID09IHQgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZSAhPT1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGUucGFyZW50Tm9kZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5maXJzdENoaWxkKSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9IHQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNob3VsZENsb3NlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9ICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5jdXJyZW50WSkgPj0gdGhpcy50b2xlcmFuY2VZICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2V0VHJhbnNsYXRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQsIGkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDMgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzNdICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbM107XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnN0eWxlLnRyYW5zaXRpb24gPSBuID8gXFxcImFsbCAuMnMgZWFzZVxcXCIgOiBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5zdHlsZS50cmFuc2Zvcm0gPSBcXFwidHJhbnNsYXRlM2QoXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQodCwgXFxcInB4LCBcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoaSwgXFxcInB4LCAwKVxcXCIpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgfSkoKTtcXHJcXG4gICAgZnVuY3Rpb24gaihlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICB2YXIgcyA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgIGwgPSBuZXcgSW1hZ2UoKSxcXHJcXG4gICAgICAgICAgICBvID0gXFxcImdTbGlkZVRpdGxlX1xcXCIgKyBpLFxcclxcbiAgICAgICAgICAgIHIgPSBcXFwiZ1NsaWRlRGVzY19cXFwiICsgaTtcXHJcXG4gICAgICAgIGwuYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICAgICBcXFwibG9hZFxcXCIsXFxyXFxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICBUKG4pICYmIG4oKTtcXHJcXG4gICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICExXFxyXFxuICAgICAgICApLFxcclxcbiAgICAgICAgICAgIChsLnNyYyA9IHQuaHJlZiksXFxyXFxuICAgICAgICAgICAgXFxcIlxcXCIgIT0gdC5zaXplcyAmJlxcclxcbiAgICAgICAgICAgICAgICBcXFwiXFxcIiAhPSB0LnNyY3NldCAmJlxcclxcbiAgICAgICAgICAgICAgICAoKGwuc2l6ZXMgPSB0LnNpemVzKSwgKGwuc3Jjc2V0ID0gdC5zcmNzZXQpKSxcXHJcXG4gICAgICAgICAgICAobC5hbHQgPSBcXFwiXFxcIiksXFxyXFxuICAgICAgICAgICAgSSh0LmFsdCkgfHwgXFxcIlxcXCIgPT09IHQuYWx0IHx8IChsLmFsdCA9IHQuYWx0KSxcXHJcXG4gICAgICAgICAgICBcXFwiXFxcIiAhPT0gdC50aXRsZSAmJiBsLnNldEF0dHJpYnV0ZShcXFwiYXJpYS1sYWJlbGxlZGJ5XFxcIiwgbyksXFxyXFxuICAgICAgICAgICAgXFxcIlxcXCIgIT09IHQuZGVzY3JpcHRpb24gJiYgbC5zZXRBdHRyaWJ1dGUoXFxcImFyaWEtZGVzY3JpYmVkYnlcXFwiLCByKSxcXHJcXG4gICAgICAgICAgICB0Lmhhc093blByb3BlcnR5KFxcXCJfaGFzQ3VzdG9tV2lkdGhcXFwiKSAmJlxcclxcbiAgICAgICAgICAgICAgICB0Ll9oYXNDdXN0b21XaWR0aCAmJlxcclxcbiAgICAgICAgICAgICAgICAobC5zdHlsZS53aWR0aCA9IHQud2lkdGgpLFxcclxcbiAgICAgICAgICAgIHQuaGFzT3duUHJvcGVydHkoXFxcIl9oYXNDdXN0b21IZWlnaHRcXFwiKSAmJlxcclxcbiAgICAgICAgICAgICAgICB0Ll9oYXNDdXN0b21IZWlnaHQgJiZcXHJcXG4gICAgICAgICAgICAgICAgKGwuc3R5bGUuaGVpZ2h0ID0gdC5oZWlnaHQpLFxcclxcbiAgICAgICAgICAgIHMuaW5zZXJ0QmVmb3JlKGwsIHMuZmlyc3RDaGlsZCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gRihlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICB2YXIgcyA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgbCA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdpbm5lci1jb250YWluZXJcXFwiKSxcXHJcXG4gICAgICAgICAgICBvID0gXFxcImd2aWRlb1xcXCIgKyBpLFxcclxcbiAgICAgICAgICAgIHIgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSxcXHJcXG4gICAgICAgICAgICBhID0gdGhpcy5nZXRBbGxQbGF5ZXJzKCk7XFxyXFxuICAgICAgICBoKGwsIFxcXCJndmlkZW8tY29udGFpbmVyXFxcIiksXFxyXFxuICAgICAgICAgICAgci5pbnNlcnRCZWZvcmUoXFxyXFxuICAgICAgICAgICAgICAgIG0oJzxkaXYgY2xhc3M9XFxcImd2aWRlby13cmFwcGVyXFxcIj48L2Rpdj4nKSxcXHJcXG4gICAgICAgICAgICAgICAgci5maXJzdENoaWxkXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgIHZhciBkID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ZpZGVvLXdyYXBwZXJcXFwiKTtcXHJcXG4gICAgICAgIFModGhpcy5zZXR0aW5ncy5wbHlyLmNzcywgXFxcIlBseXJcXFwiKTtcXHJcXG4gICAgICAgIHZhciBjID0gdC5ocmVmLFxcclxcbiAgICAgICAgICAgIHUgPSBsb2NhdGlvbi5wcm90b2NvbC5yZXBsYWNlKFxcXCI6XFxcIiwgXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgIGcgPSBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICB2ID0gXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgZiA9ICExO1xcclxcbiAgICAgICAgXFxcImZpbGVcXFwiID09IHUgJiYgKHUgPSBcXFwiaHR0cFxcXCIpLFxcclxcbiAgICAgICAgICAgIChyLnN0eWxlLm1heFdpZHRoID0gdC53aWR0aCksXFxyXFxuICAgICAgICAgICAgUyh0aGlzLnNldHRpbmdzLnBseXIuanMsIFxcXCJQbHlyXFxcIiwgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICBpZiAoYy5tYXRjaCgvdmltZW9cXFxcLmNvbVxcXFwvKFswLTldKikvKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSAvdmltZW8uKlxcXFwvKFxcXFxkKykvaS5leGVjKGMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgKGcgPSBcXFwidmltZW9cXFwiKSwgKHYgPSBsWzFdKTtcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICBjLm1hdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8oeW91dHViZVxcXFwuY29tfHlvdXR1YmUtbm9jb29raWVcXFxcLmNvbSlcXFxcL3dhdGNoXFxcXD92PShbYS16QS1aMC05XFxcXC1fXSspL1xcclxcbiAgICAgICAgICAgICAgICAgICAgKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgYy5tYXRjaCgveW91dHVcXFxcLmJlXFxcXC8oW2EtekEtWjAtOVxcXFwtX10rKS8pIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICBjLm1hdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8oeW91dHViZVxcXFwuY29tfHlvdXR1YmUtbm9jb29raWVcXFxcLmNvbSlcXFxcL2VtYmVkXFxcXC8oW2EtekEtWjAtOVxcXFwtX10rKS9cXHJcXG4gICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IChmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gXFxcIlxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKD58PCkvZ2ksIFxcXCJcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNwbGl0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8odmlcXFxcL3x2PXxcXFxcL3ZcXFxcL3x5b3V0dVxcXFwuYmVcXFxcL3xcXFxcL2VtYmVkXFxcXC8pL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlbMl1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKHQgPSBlWzJdLnNwbGl0KC9bXjAtOWEtel9cXFxcLV0vaSkpWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICB9KShjKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIChnID0gXFxcInlvdXR1YmVcXFwiKSwgKHYgPSByKTtcXHJcXG4gICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gYy5tYXRjaCgvXFxcXC4obXA0fG9nZ3x3ZWJtfG1vdikkLykpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgIGcgPSBcXFwibG9jYWxcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSAnPHZpZGVvIGlkPVxcXCInICsgbyArICdcXFwiICc7XFxyXFxuICAgICAgICAgICAgICAgICAgICAodSArPSAnc3R5bGU9XFxcImJhY2tncm91bmQ6IzAwMDsgbWF4LXdpZHRoOiAnLmNvbmNhdChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0LndpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICc7XFxcIiAnXFxyXFxuICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAodSArPSAncHJlbG9hZD1cXFwibWV0YWRhdGFcXFwiICcpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh1ICs9ICd4LXdlYmtpdC1haXJwbGF5PVxcXCJhbGxvd1xcXCIgJyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgKHUgKz0gXFxcInBsYXlzaW5saW5lIFxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICh1ICs9IFxcXCJjb250cm9scyBcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAodSArPSAnY2xhc3M9XFxcImd2aWRlby1sb2NhbFxcXCI+Jyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGMudG9Mb3dlckNhc2UoKS5zcGxpdChcXFwiLlxcXCIpLnBvcCgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHkgPSB7IG1wNDogXFxcIlxcXCIsIG9nZzogXFxcIlxcXCIsIHdlYm06IFxcXCJcXFwiIH07XFxyXFxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4IGluICgoeVsocCA9IFxcXCJtb3ZcXFwiID09IHAgPyBcXFwibXA0XFxcIiA6IHApXSA9IGMpLCB5KSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeS5oYXNPd25Qcm9wZXJ0eSh4KSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgUyA9IHlbeF07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaGFzT3duUHJvcGVydHkoeCkgJiYgKFMgPSB0W3hdKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJcXFwiICE9PSBTICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgKz0gJzxzb3VyY2Ugc3JjPVxcXCInXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoUywgJ1xcXCIgdHlwZT1cXFwidmlkZW8vJylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCh4LCAnXFxcIj4nKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgZiA9IG0oKHUgKz0gXFxcIjwvdmlkZW8+XFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgIHZhciB3ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgIGYgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgIG0oXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XFxcIidcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdChvLCAnXFxcIiBkYXRhLXBseXItcHJvdmlkZXI9XFxcIicpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoZywgJ1xcXCIgZGF0YS1wbHlyLWVtYmVkLWlkPVxcXCInKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY29uY2F0KHYsICdcXFwiPjwvZGl2PicpXFxyXFxuICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICBoKGQsIFxcXCJcXFwiLmNvbmNhdChnLCBcXFwiLXZpZGVvIGd2aWRlb1xcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGQuYXBwZW5kQ2hpbGQodyksXFxyXFxuICAgICAgICAgICAgICAgICAgICBkLnNldEF0dHJpYnV0ZShcXFwiZGF0YS1pZFxcXCIsIG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgZC5zZXRBdHRyaWJ1dGUoXFxcImRhdGEtaW5kZXhcXFwiLCBpKTtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIEMgPSBPKHMuc2V0dGluZ3MucGx5ciwgXFxcImNvbmZpZ1xcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzLnNldHRpbmdzLnBseXIuY29uZmlnXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgOiB7fSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGsgPSBuZXcgUGx5cihcXFwiI1xcXCIgKyBvLCBDKTtcXHJcXG4gICAgICAgICAgICAgICAgay5vbihcXFwicmVhZHlcXFwiLCBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLmRldGFpbC5wbHlyO1xcclxcbiAgICAgICAgICAgICAgICAgICAgKGFbb10gPSB0KSwgVChuKSAmJiBuKCk7XFxyXFxuICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgYihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnF1ZXJ5U2VsZWN0b3IoXFxcImlmcmFtZVxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidHJ1ZVxcXCIgPT1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnF1ZXJ5U2VsZWN0b3IoXFxcImlmcmFtZVxcXCIpLmRhdGFzZXQucmVhZHlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5yZXNpemUoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGsub24oXFxcImVudGVyZnVsbHNjcmVlblxcXCIsIFIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgay5vbihcXFwiZXhpdGZ1bGxzY3JlZW5cXFwiLCBSKTtcXHJcXG4gICAgICAgICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgICBmdW5jdGlvbiBSKGUpIHtcXHJcXG4gICAgICAgIHZhciB0ID0gdShlLnRhcmdldCwgXFxcIi5nc2xpZGUtbWVkaWFcXFwiKTtcXHJcXG4gICAgICAgIFxcXCJlbnRlcmZ1bGxzY3JlZW5cXFwiID09IGUudHlwZSAmJiBoKHQsIFxcXCJmdWxsc2NyZWVuXFxcIiksXFxyXFxuICAgICAgICAgICAgXFxcImV4aXRmdWxsc2NyZWVuXFxcIiA9PSBlLnR5cGUgJiYgZCh0LCBcXFwiZnVsbHNjcmVlblxcXCIpO1xcclxcbiAgICB9XFxyXFxuICAgIGZ1bmN0aW9uIEcoZSwgdCwgaSwgbikge1xcclxcbiAgICAgICAgdmFyIHMsXFxyXFxuICAgICAgICAgICAgbCA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgbyA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgIHIgPSAhKCFPKHQsIFxcXCJocmVmXFxcIikgfHwgIXQuaHJlZikgJiYgdC5ocmVmLnNwbGl0KFxcXCIjXFxcIikucG9wKCkudHJpbSgpLFxcclxcbiAgICAgICAgICAgIGQgPSAhKCFPKHQsIFxcXCJjb250ZW50XFxcIikgfHwgIXQuY29udGVudCkgJiYgdC5jb250ZW50O1xcclxcbiAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgIGQgJiZcXHJcXG4gICAgICAgICAgICAoQyhkKSAmJlxcclxcbiAgICAgICAgICAgICAgICAocyA9IG0oJzxkaXYgY2xhc3M9XFxcImdpbmxpbmVkLWNvbnRlbnRcXFwiPicuY29uY2F0KGQsIFxcXCI8L2Rpdj5cXFwiKSkpLFxcclxcbiAgICAgICAgICAgIGsoZCkpXFxyXFxuICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICBcXFwibm9uZVxcXCIgPT0gZC5zdHlsZS5kaXNwbGF5ICYmIChkLnN0eWxlLmRpc3BsYXkgPSBcXFwiYmxvY2tcXFwiKTtcXHJcXG4gICAgICAgICAgICB2YXIgYyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcImRpdlxcXCIpO1xcclxcbiAgICAgICAgICAgIChjLmNsYXNzTmFtZSA9IFxcXCJnaW5saW5lZC1jb250ZW50XFxcIiksIGMuYXBwZW5kQ2hpbGQoZCksIChzID0gYyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBpZiAocikge1xcclxcbiAgICAgICAgICAgIHZhciB1ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocik7XFxyXFxuICAgICAgICAgICAgaWYgKCF1KSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgdmFyIGcgPSB1LmNsb25lTm9kZSghMCk7XFxyXFxuICAgICAgICAgICAgKGcuc3R5bGUuaGVpZ2h0ID0gdC5oZWlnaHQpLFxcclxcbiAgICAgICAgICAgICAgICAoZy5zdHlsZS5tYXhXaWR0aCA9IHQud2lkdGgpLFxcclxcbiAgICAgICAgICAgICAgICBoKGcsIFxcXCJnaW5saW5lZC1jb250ZW50XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgIChzID0gZyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBpZiAoIXMpXFxyXFxuICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcXFwiVW5hYmxlIHRvIGFwcGVuZCBpbmxpbmUgc2xpZGUgY29udGVudFxcXCIsIHQpLCAhMVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAoby5zdHlsZS5oZWlnaHQgPSB0LmhlaWdodCksXFxyXFxuICAgICAgICAgICAgKG8uc3R5bGUud2lkdGggPSB0LndpZHRoKSxcXHJcXG4gICAgICAgICAgICBvLmFwcGVuZENoaWxkKHMpLFxcclxcbiAgICAgICAgICAgICh0aGlzLmV2ZW50c1tcXFwiaW5saW5lY2xvc2VcXFwiICsgcl0gPSBhKFxcXCJjbGlja1xcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgb25FbGVtZW50OiBvLnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5ndHJpZ2dlci1jbG9zZVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCksIGwuY2xvc2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICB9KSksXFxyXFxuICAgICAgICAgICAgVChuKSAmJiBuKCk7XFxyXFxuICAgIH1cXHJcXG4gICAgZnVuY3Rpb24gWihlLCB0LCBpLCBuKSB7XFxyXFxuICAgICAgICB2YXIgcyA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmdzbGlkZS1tZWRpYVxcXCIpLFxcclxcbiAgICAgICAgICAgIGwgPSAoZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIHQgPSBlLnVybCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGkgPSBlLmFsbG93LFxcclxcbiAgICAgICAgICAgICAgICAgICAgbiA9IGUuY2FsbGJhY2ssXFxyXFxuICAgICAgICAgICAgICAgICAgICBzID0gZS5hcHBlbmRUbyxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFxcXCJpZnJhbWVcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgIChsLmNsYXNzTmFtZSA9IFxcXCJ2aW1lby12aWRlbyBndmlkZW9cXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIChsLnNyYyA9IHQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKGwuc3R5bGUud2lkdGggPSBcXFwiMTAwJVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKGwuc3R5bGUuaGVpZ2h0ID0gXFxcIjEwMCVcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIGkgJiYgbC5zZXRBdHRyaWJ1dGUoXFxcImFsbG93XFxcIiwgaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAobC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaChsLCBcXFwibm9kZS1yZWFkeVxcXCIpLCBUKG4pICYmIG4oKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgcyAmJiBzLmFwcGVuZENoaWxkKGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgbFxcclxcbiAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIH0pKHsgdXJsOiB0LmhyZWYsIGNhbGxiYWNrOiBuIH0pO1xcclxcbiAgICAgICAgKHMucGFyZW50Tm9kZS5zdHlsZS5tYXhXaWR0aCA9IHQud2lkdGgpLFxcclxcbiAgICAgICAgICAgIChzLnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0ID0gdC5oZWlnaHQpLFxcclxcbiAgICAgICAgICAgIHMuYXBwZW5kQ2hpbGQobCk7XFxyXFxuICAgIH1cXHJcXG4gICAgdmFyICQgPSAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgIGZ1bmN0aW9uIGUoKSB7XFxyXFxuICAgICAgICAgICAgICAgIHZhciBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHt9O1xcclxcbiAgICAgICAgICAgICAgICB0KHRoaXMsIGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZGVmYXVsdHMgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaHJlZjogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZXM6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyY3NldDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHQ6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NQb3NpdGlvbjogXFxcImJvdHRvbVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBcXFwiXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAhMSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB6b29tYWJsZTogITAsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiAhMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgTChpKSAmJiAodGhpcy5kZWZhdWx0cyA9IGwodGhpcy5kZWZhdWx0cywgaSkpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzb3VyY2VUeXBlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsICE9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBlLnRvTG93ZXJDYXNlKCkpLm1hdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC9cXFxcLihqcGVnfGpwZ3xqcGV8Z2lmfHBuZ3xhcG58d2VicHxhdmlmfHN2ZykvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaW1hZ2VcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1hdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8oeW91dHViZVxcXFwuY29tfHlvdXR1YmUtbm9jb29raWVcXFxcLmNvbSlcXFxcL3dhdGNoXFxcXD92PShbYS16QS1aMC05XFxcXC1fXSspL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5tYXRjaCgveW91dHVcXFxcLmJlXFxcXC8oW2EtekEtWjAtOVxcXFwtX10rKS8pIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1hdGNoKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8oeW91dHViZVxcXFwuY29tfHlvdXR1YmUtbm9jb29raWVcXFxcLmNvbSlcXFxcL2VtYmVkXFxcXC8oW2EtekEtWjAtOVxcXFwtX10rKS9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJ2aWRlb1xcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLm1hdGNoKC92aW1lb1xcXFwuY29tXFxcXC8oWzAtOV0qKS8pKSByZXR1cm4gXFxcInZpZGVvXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubWF0Y2goL1xcXFwuKG1wNHxvZ2d8d2VibXxtb3YpLykpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInZpZGVvXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubWF0Y2goL1xcXFwuKG1wM3x3YXZ8d21hfGFhY3xvZ2cpLykpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcImF1ZGlvXFxcIjtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbmRleE9mKFxcXCIjXFxcIikgPiAtMSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIlxcXCIgIT09IHQuc3BsaXQoXFxcIiNcXFwiKS5wb3AoKS50cmltKClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFxcXCJpbmxpbmVcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5pbmRleE9mKFxcXCJnb2FqYXg9dHJ1ZVxcXCIpID4gLTFcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXFxcImFqYXhcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJleHRlcm5hbFxcXCI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwicGFyc2VDb25maWdcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IGRlc2NQb3NpdGlvbjogdC5kZXNjUG9zaXRpb24gfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRzXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTChlKSAmJiAhayhlKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyhlLCBcXFwidHlwZVxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKE8oZSwgXFxcImNvbnRlbnRcXFwiKSAmJiBlLmNvbnRlbnRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoZS50eXBlID0gXFxcImlubGluZVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogTyhlLCBcXFwiaHJlZlxcXCIpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUudHlwZSA9IHRoaXMuc291cmNlVHlwZShlLmhyZWYpKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9IGwobiwgZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRTaXplKHMsIHQpLCBzO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID0gZS5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtZ2xpZ2h0Ym94XFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoID0gZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoXFxcImFcXFwiID09PSBoICYmIChyID0gZS5ocmVmKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJpbWdcXFwiID09PSBoICYmICgociA9IGUuc3JjKSwgKG4uYWx0ID0gZS5hbHQpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChuLmhyZWYgPSByKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obiwgZnVuY3Rpb24gKHMsIGwpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPKHQsIGwpICYmIFxcXCJ3aWR0aFxcXCIgIT09IGwgJiYgKG5bbF0gPSB0W2xdKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGUuZGF0YXNldFtsXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKG8pIHx8IChuW2xdID0gaS5zYW5pdGl6ZVZhbHVlKG8pKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5jb250ZW50ICYmIChuLnR5cGUgPSBcXFwiaW5saW5lXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhbi50eXBlICYmIHIgJiYgKG4udHlwZSA9IHRoaXMuc291cmNlVHlwZShyKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKGEpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi50aXRsZSAmJiBcXFwiYVxcXCIgPT0gaCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkID0gZS50aXRsZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJKGQpIHx8IFxcXCJcXFwiID09PSBkIHx8IChuLnRpdGxlID0gZCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4udGl0bGUgJiYgXFxcImltZ1xcXCIgPT0gaCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjID0gZS5hbHQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSShjKSB8fCBcXFwiXFxcIiA9PT0gYyB8fCAobi50aXRsZSA9IGMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHUgPSBbXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8obiwgZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1LnB1c2goXFxcIjtcXFxcXFxcXHM/XFxcIiArIHQpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUgPSB1LmpvaW4oXFxcIlxcXFxcXFxccz86fFxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiXFxcIiAhPT0gYS50cmltKCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuLCBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBhLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBuZXcgUmVnRXhwKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicz9cXFwiICtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInM/OnM/KC4qPykoXFxcIiArXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ICtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzPzp8JClcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gcy5tYXRjaChsKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvICYmIG8ubGVuZ3RoICYmIG9bMV0pIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgciA9IG9bMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRyaW0oKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvO1xcXFxzKiQvLCBcXFwiXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblt0XSA9IGkuc2FuaXRpemVWYWx1ZShyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5kZXNjcmlwdGlvbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5cXFwiID09PSBuLmRlc2NyaXB0aW9uLnN1YnN0cmluZygwLCAxKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBnO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5kZXNjcmlwdGlvblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuaW5uZXJIVE1MO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pKSB0aHJvdyBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyAmJiAobi5kZXNjcmlwdGlvbiA9IGcpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbi5kZXNjcmlwdGlvbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nbGlnaHRib3gtZGVzY1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdiAmJiAobi5kZXNjcmlwdGlvbiA9IHYuaW5uZXJIVE1MKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTaXplKG4sIHQsIGUpLCAodGhpcy5zbGlkZUNvbmZpZyA9IG4pLCBuXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2V0U2l6ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzJdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ2aWRlb1xcXCIgPT0gZS50eXBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gdGhpcy5jaGVja1NpemUodC52aWRlb3NXaWR0aClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmNoZWNrU2l6ZSh0LndpZHRoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMgPSB0aGlzLmNoZWNrU2l6ZSh0LmhlaWdodCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS53aWR0aCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyhlLCBcXFwid2lkdGhcXFwiKSAmJiBcXFwiXFxcIiAhPT0gZS53aWR0aFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuY2hlY2tTaXplKGUud2lkdGgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5oZWlnaHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oZSwgXFxcImhlaWdodFxcXCIpICYmIFxcXCJcXFwiICE9PSBlLmhlaWdodFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuY2hlY2tTaXplKGUuaGVpZ2h0KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJpbWFnZVxcXCIgPT0gZS50eXBlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKChlLl9oYXNDdXN0b21XaWR0aCA9ICEhaS5kYXRhc2V0LndpZHRoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZS5faGFzQ3VzdG9tSGVpZ2h0ID0gISFpLmRhdGFzZXQuaGVpZ2h0KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiY2hlY2tTaXplXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE0oZSkgPyBcXFwiXFxcIi5jb25jYXQoZSwgXFxcInB4XFxcIikgOiBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNhbml0aXplVmFsdWVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXFxcInRydWVcXFwiICE9PSBlICYmIFxcXCJmYWxzZVxcXCIgIT09IGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcXFwidHJ1ZVxcXCIgPT09IGU7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgIF0pLFxcclxcbiAgICAgICAgICAgICAgICBlXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgIH0pKCksXFxyXFxuICAgICAgICBVID0gKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICBmdW5jdGlvbiBlKGksIG4sIHMpIHtcXHJcXG4gICAgICAgICAgICAgICAgdCh0aGlzLCBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnQgPSBpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmluc3RhbmNlID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5pbmRleCA9IHMpO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICBuKGUsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzZXRDb250ZW50XFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMV0gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMV07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjKHQsIFxcXCJsb2FkZWRcXFwiKSkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IHRoaXMuaW5zdGFuY2Uuc2V0dGluZ3MsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gdGhpcy5zbGlkZUNvbmZpZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB3KCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQobi5iZWZvcmVTbGlkZUxvYWQpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmJlZm9yZVNsaWRlTG9hZCh7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiAhMSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IHMudHlwZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBzLmRlc2NQb3NpdGlvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgPSB0LnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSB0LnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtdGl0bGVcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSB0LnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtZGVzY1xcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IHQucXVlcnlTZWxlY3RvcihcXFwiLmdkZXNjLWlubmVyXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ID0gaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYgPSBcXFwiZ1NsaWRlVGl0bGVfXFxcIiArIHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwID0gXFxcImdTbGlkZURlc2NfXFxcIiArIHRoaXMuaW5kZXg7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChUKG4uYWZ0ZXJTbGlkZUxvYWQpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHYgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQoaSkgJiYgaSgpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5hZnRlclNsaWRlTG9hZCh7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGUuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBlLmluc3RhbmNlLmdldFNsaWRlUGxheWVySW5zdGFuY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiXFxcIiA9PSBzLnRpdGxlICYmIFxcXCJcXFwiID09IHMuZGVzY3JpcHRpb25cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGcgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGcucGFyZW50Tm9kZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogKGQgJiYgXFxcIlxcXCIgIT09IHMudGl0bGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/ICgoZC5pZCA9IGYpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGQuaW5uZXJIVE1MID0gcy50aXRsZSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBkLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1ICYmIFxcXCJcXFwiICE9PSBzLmRlc2NyaXB0aW9uXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoKHUuaWQgPSBwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgJiYgbi5tb3JlTGVuZ3RoID4gMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChzLnNtYWxsRGVzY3JpcHRpb24gPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVTaG9ydERlc2MoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZGVzY3JpcHRpb24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ubW9yZUxlbmd0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5tb3JlVGV4dFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHUuaW5uZXJIVE1MID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnNtYWxsRGVzY3JpcHRpb24pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXNjcmlwdGlvbkV2ZW50cyh1LCBzKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICh1LmlubmVySFRNTCA9IHMuZGVzY3JpcHRpb24pKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChhLnBhcmVudE5vZGUsIFxcXCJkZXNjLVxcXCIuY29uY2F0KHIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wYXJlbnROb2RlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJkZXNjcmlwdGlvbi1cXFwiLmNvbmNhdChyKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKGEsIFxcXCJnc2xpZGUtXFxcIi5jb25jYXQobykpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCh0LCBcXFwibG9hZGVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwidmlkZW9cXFwiICE9PSBvKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXFwiZXh0ZXJuYWxcXFwiICE9PSBvKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiaW5saW5lXFxcIiA9PT0gb1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChHLmFwcGx5KHRoaXMuaW5zdGFuY2UsIFtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5kcmFnZ2FibGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFYoe1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhZ0VsOiB0LnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGUtaW5saW5lXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvbGVyYW5jZVg6IG4uZHJhZ1RvbGVyYW5jZVgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2xlcmFuY2VZOiBuLmRyYWdUb2xlcmFuY2VZLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZTogdGhpcy5pbnN0YW5jZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHZvaWQgKFxcXCJpbWFnZVxcXCIgIT09IG9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBUKHYpICYmIHYoKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGooXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJpbWdcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuZHJhZ2dhYmxlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFYoe1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmFnRWw6IGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvbGVyYW5jZVg6XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLmRyYWdUb2xlcmFuY2VYLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2xlcmFuY2VZOlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5kcmFnVG9sZXJhbmNlWSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlOlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5pbnN0YW5jZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLnpvb21hYmxlICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkubmF0dXJhbFdpZHRoID5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkub2Zmc2V0V2lkdGggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGgoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInpvb21hYmxlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgSChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuaW5zdGFuY2UucmVzaXplKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQodikgJiYgdigpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBaLmFwcGx5KHRoaXMsIFt0LCBzLCB0aGlzLmluZGV4LCB2XSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRi5hcHBseSh0aGlzLmluc3RhbmNlLCBbdCwgcywgdGhpcy5pbmRleCwgdl0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNsaWRlU2hvcnREZXNjXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiA1MCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAyICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMl0gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMl0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcXFwiZGl2XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaW5uZXJIVE1MID0gZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuLmlubmVyVGV4dCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSBpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGUgPSBzLnRyaW0oKSkubGVuZ3RoIDw9IHQpIHJldHVybiBlO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGUuc3Vic3RyKDAsIHQgLSAxKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKChuID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy4uLiA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiZGVzYy1tb3JlXFxcIj4nICtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgK1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIjwvYT5cXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRlc2NyaXB0aW9uRXZlbnRzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmRlc2MtbW9yZVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIW4pIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYShcXFwiY2xpY2tcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IG4sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uIChlLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gZG9jdW1lbnQuYm9keSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IHUobiwgXFxcIi5nc2xpZGUtZGVzY1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbCkgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChsLmlubmVySFRNTCA9IHQuZGVzY3JpcHRpb24pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHMsIFxcXCJnZGVzYy1vcGVuXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG8gPSBhKFxcXCJjbGlja1xcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbGVtZW50OiBbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdShsLCBcXFwiLmdzbGlkZS1kZXNjcmlwdGlvblxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uIChlLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiYVxcXCIgIT09XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS50YXJnZXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChkKHMsIFxcXCJnZGVzYy1vcGVuXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChzLCBcXFwiZ2Rlc2MtY2xvc2VkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwuaW5uZXJIVE1MID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5zbWFsbERlc2NyaXB0aW9uKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmRlc2NyaXB0aW9uRXZlbnRzKGwsIHQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKHMsIFxcXCJnZGVzYy1jbG9zZWRcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCA0MDApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8uZGVzdHJveSgpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImNyZWF0ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG0odGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5zbGlkZUhUTUwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldENvbmZpZ1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgayh0aGlzLmVsZW1lbnQpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuaGFzT3duUHJvcGVydHkoXFxcImRyYWdnYWJsZVxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50LmRyYWdnYWJsZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5kcmFnZ2FibGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyAkKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnN0YW5jZS5zZXR0aW5ncy5zbGlkZUV4dHJhQXR0cmlidXRlc1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2xpZGVDb25maWcgPSBlLnBhcnNlQ29uZmlnKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluc3RhbmNlLnNldHRpbmdzXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVDb25maWdcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgXSksXFxyXFxuICAgICAgICAgICAgICAgIGVcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgfSkoKSxcXHJcXG4gICAgICAgIEogPSB3KCksXFxyXFxuICAgICAgICBLID1cXHJcXG4gICAgICAgICAgICBudWxsICE9PSB3KCkgfHxcXHJcXG4gICAgICAgICAgICB2b2lkIDAgIT09IGRvY3VtZW50LmNyZWF0ZVRvdWNoIHx8XFxyXFxuICAgICAgICAgICAgXFxcIm9udG91Y2hzdGFydFxcXCIgaW4gd2luZG93IHx8XFxyXFxuICAgICAgICAgICAgXFxcIm9ubXNnZXN0dXJlY2hhbmdlXFxcIiBpbiB3aW5kb3cgfHxcXHJcXG4gICAgICAgICAgICBuYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyxcXHJcXG4gICAgICAgIFEgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcXFwiaHRtbFxcXCIpWzBdLFxcclxcbiAgICAgICAgZWUgPSB7XFxyXFxuICAgICAgICAgICAgc2VsZWN0b3I6IFxcXCIuZ2xpZ2h0Ym94XFxcIixcXHJcXG4gICAgICAgICAgICBlbGVtZW50czogbnVsbCxcXHJcXG4gICAgICAgICAgICBza2luOiBcXFwiY2xlYW5cXFwiLFxcclxcbiAgICAgICAgICAgIHRoZW1lOiBcXFwiY2xlYW5cXFwiLFxcclxcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uOiAhMCxcXHJcXG4gICAgICAgICAgICBzdGFydEF0OiBudWxsLFxcclxcbiAgICAgICAgICAgIGF1dG9wbGF5VmlkZW9zOiAhMCxcXHJcXG4gICAgICAgICAgICBhdXRvZm9jdXNWaWRlb3M6ICEwLFxcclxcbiAgICAgICAgICAgIGRlc2NQb3NpdGlvbjogXFxcImJvdHRvbVxcXCIsXFxyXFxuICAgICAgICAgICAgd2lkdGg6IFxcXCI5MDBweFxcXCIsXFxyXFxuICAgICAgICAgICAgaGVpZ2h0OiBcXFwiNTA2cHhcXFwiLFxcclxcbiAgICAgICAgICAgIHZpZGVvc1dpZHRoOiBcXFwiOTYwcHhcXFwiLFxcclxcbiAgICAgICAgICAgIGJlZm9yZVNsaWRlQ2hhbmdlOiBudWxsLFxcclxcbiAgICAgICAgICAgIGFmdGVyU2xpZGVDaGFuZ2U6IG51bGwsXFxyXFxuICAgICAgICAgICAgYmVmb3JlU2xpZGVMb2FkOiBudWxsLFxcclxcbiAgICAgICAgICAgIGFmdGVyU2xpZGVMb2FkOiBudWxsLFxcclxcbiAgICAgICAgICAgIHNsaWRlSW5zZXJ0ZWQ6IG51bGwsXFxyXFxuICAgICAgICAgICAgc2xpZGVSZW1vdmVkOiBudWxsLFxcclxcbiAgICAgICAgICAgIHNsaWRlRXh0cmFBdHRyaWJ1dGVzOiBudWxsLFxcclxcbiAgICAgICAgICAgIG9uT3BlbjogbnVsbCxcXHJcXG4gICAgICAgICAgICBvbkNsb3NlOiBudWxsLFxcclxcbiAgICAgICAgICAgIGxvb3A6ICExLFxcclxcbiAgICAgICAgICAgIHpvb21hYmxlOiAhMCxcXHJcXG4gICAgICAgICAgICBkcmFnZ2FibGU6ICEwLFxcclxcbiAgICAgICAgICAgIGRyYWdBdXRvU25hcDogITEsXFxyXFxuICAgICAgICAgICAgZHJhZ1RvbGVyYW5jZVg6IDQwLFxcclxcbiAgICAgICAgICAgIGRyYWdUb2xlcmFuY2VZOiA2NSxcXHJcXG4gICAgICAgICAgICBwcmVsb2FkOiAhMCxcXHJcXG4gICAgICAgICAgICBvbmVTbGlkZVBlck9wZW46ICExLFxcclxcbiAgICAgICAgICAgIHRvdWNoTmF2aWdhdGlvbjogITAsXFxyXFxuICAgICAgICAgICAgdG91Y2hGb2xsb3dBeGlzOiAhMCxcXHJcXG4gICAgICAgICAgICBrZXlib2FyZE5hdmlnYXRpb246ICEwLFxcclxcbiAgICAgICAgICAgIGNsb3NlT25PdXRzaWRlQ2xpY2s6ICEwLFxcclxcbiAgICAgICAgICAgIHBsdWdpbnM6ICExLFxcclxcbiAgICAgICAgICAgIHBseXI6IHtcXHJcXG4gICAgICAgICAgICAgICAgY3NzOiBcXFwiaHR0cHM6Ly9jZG4ucGx5ci5pby8zLjYuOC9wbHlyLmNzc1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgIGpzOiBcXFwiaHR0cHM6Ly9jZG4ucGx5ci5pby8zLjYuOC9wbHlyLmpzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgY29uZmlnOiB7XFxyXFxuICAgICAgICAgICAgICAgICAgICByYXRpbzogXFxcIjE2OjlcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgZnVsbHNjcmVlbjogeyBlbmFibGVkOiAhMCwgaW9zTmF0aXZlOiAhMCB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgeW91dHViZToge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vQ29va2llOiAhMCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICByZWw6IDAsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd2luZm86IDAsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgaXZfbG9hZF9wb2xpY3k6IDMsXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgdmltZW86IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBieWxpbmU6ICExLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcnRyYWl0OiAhMSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogITEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNwYXJlbnQ6ICExLFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIG9wZW5FZmZlY3Q6IFxcXCJ6b29tXFxcIixcXHJcXG4gICAgICAgICAgICBjbG9zZUVmZmVjdDogXFxcInpvb21cXFwiLFxcclxcbiAgICAgICAgICAgIHNsaWRlRWZmZWN0OiBcXFwic2xpZGVcXFwiLFxcclxcbiAgICAgICAgICAgIG1vcmVUZXh0OiBcXFwiU2VlIG1vcmVcXFwiLFxcclxcbiAgICAgICAgICAgIG1vcmVMZW5ndGg6IDYwLFxcclxcbiAgICAgICAgICAgIGNzc0VmZWN0czoge1xcclxcbiAgICAgICAgICAgICAgICBmYWRlOiB7IGluOiBcXFwiZmFkZUluXFxcIiwgb3V0OiBcXFwiZmFkZU91dFxcXCIgfSxcXHJcXG4gICAgICAgICAgICAgICAgem9vbTogeyBpbjogXFxcInpvb21JblxcXCIsIG91dDogXFxcInpvb21PdXRcXFwiIH0sXFxyXFxuICAgICAgICAgICAgICAgIHNsaWRlOiB7IGluOiBcXFwic2xpZGVJblJpZ2h0XFxcIiwgb3V0OiBcXFwic2xpZGVPdXRMZWZ0XFxcIiB9LFxcclxcbiAgICAgICAgICAgICAgICBzbGlkZUJhY2s6IHsgaW46IFxcXCJzbGlkZUluTGVmdFxcXCIsIG91dDogXFxcInNsaWRlT3V0UmlnaHRcXFwiIH0sXFxyXFxuICAgICAgICAgICAgICAgIG5vbmU6IHsgaW46IFxcXCJub25lXFxcIiwgb3V0OiBcXFwibm9uZVxcXCIgfSxcXHJcXG4gICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgIHN2Zzoge1xcclxcbiAgICAgICAgICAgICAgICBjbG9zZTogJzxzdmcgdmVyc2lvbj1cXFwiMS4xXFxcIiB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHhtbG5zOnhsaW5rPVxcXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXFxcIiB4PVxcXCIwcHhcXFwiIHk9XFxcIjBweFxcXCIgdmlld0JveD1cXFwiMCAwIDUxMiA1MTJcXFwiIHhtbDpzcGFjZT1cXFwicHJlc2VydmVcXFwiPjxnPjxnPjxwYXRoIGQ9XFxcIk01MDUuOTQzLDYuMDU4Yy04LjA3Ny04LjA3Ny0yMS4xNzItOC4wNzctMjkuMjQ5LDBMNi4wNTgsNDc2LjY5M2MtOC4wNzcsOC4wNzctOC4wNzcsMjEuMTcyLDAsMjkuMjQ5QzEwLjA5Niw1MDkuOTgyLDE1LjM5LDUxMiwyMC42ODMsNTEyYzUuMjkzLDAsMTAuNTg2LTIuMDE5LDE0LjYyNS02LjA1OUw1MDUuOTQzLDM1LjMwNkM1MTQuMDE5LDI3LjIzLDUxNC4wMTksMTQuMTM1LDUwNS45NDMsNi4wNTh6XFxcIi8+PC9nPjwvZz48Zz48Zz48cGF0aCBkPVxcXCJNNTA1Ljk0Miw0NzYuNjk0TDM1LjMwNiw2LjA1OWMtOC4wNzYtOC4wNzctMjEuMTcyLTguMDc3LTI5LjI0OCwwYy04LjA3Nyw4LjA3Ni04LjA3NywyMS4xNzEsMCwyOS4yNDhsNDcwLjYzNiw0NzAuNjM2YzQuMDM4LDQuMDM5LDkuMzMyLDYuMDU4LDE0LjYyNSw2LjA1OGM1LjI5MywwLDEwLjU4Ny0yLjAxOSwxNC42MjQtNi4wNTdDNTE0LjAxOCw0OTcuODY2LDUxNC4wMTgsNDg0Ljc3MSw1MDUuOTQyLDQ3Ni42OTR6XFxcIi8+PC9nPjwvZz48L3N2Zz4nLFxcclxcbiAgICAgICAgICAgICAgICBuZXh0OiAnPHN2ZyB2ZXJzaW9uPVxcXCIxLjFcXFwiIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgeG1sbnM6eGxpbms9XFxcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcXFwiIHg9XFxcIjBweFxcXCIgeT1cXFwiMHB4XFxcIiB2aWV3Qm94PVxcXCIwIDAgNDc3LjE3NSA0NzcuMTc1XFxcIiB4bWw6c3BhY2U9XFxcInByZXNlcnZlXFxcIj4gPGc+PHBhdGggZD1cXFwiTTM2MC43MzEsMjI5LjA3NWwtMjI1LjEtMjI1LjFjLTUuMy01LjMtMTMuOC01LjMtMTkuMSwwcy01LjMsMTMuOCwwLDE5LjFsMjE1LjUsMjE1LjVsLTIxNS41LDIxNS41Yy01LjMsNS4zLTUuMywxMy44LDAsMTkuMWMyLjYsMi42LDYuMSw0LDkuNSw0YzMuNCwwLDYuOS0xLjMsOS41LTRsMjI1LjEtMjI1LjFDMzY1LjkzMSwyNDIuODc1LDM2NS45MzEsMjM0LjI3NSwzNjAuNzMxLDIyOS4wNzV6XFxcIi8+PC9nPjwvc3ZnPicsXFxyXFxuICAgICAgICAgICAgICAgIHByZXY6ICc8c3ZnIHZlcnNpb249XFxcIjEuMVxcXCIgeG1sbnM9XFxcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXFxcIiB4bWxuczp4bGluaz1cXFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1xcXCIgeD1cXFwiMHB4XFxcIiB5PVxcXCIwcHhcXFwiIHZpZXdCb3g9XFxcIjAgMCA0NzcuMTc1IDQ3Ny4xNzVcXFwiIHhtbDpzcGFjZT1cXFwicHJlc2VydmVcXFwiPjxnPjxwYXRoIGQ9XFxcIk0xNDUuMTg4LDIzOC41NzVsMjE1LjUtMjE1LjVjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFzLTEzLjgtNS4zLTE5LjEsMGwtMjI1LjEsMjI1LjFjLTUuMyw1LjMtNS4zLDEzLjgsMCwxOS4xbDIyNS4xLDIyNWMyLjYsMi42LDYuMSw0LDkuNSw0czYuOS0xLjMsOS41LTRjNS4zLTUuMyw1LjMtMTMuOCwwLTE5LjFMMTQ1LjE4OCwyMzguNTc1elxcXCIvPjwvZz48L3N2Zz4nLFxcclxcbiAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgc2xpZGVIVE1MOlxcclxcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cXFwiZ3NsaWRlXFxcIj5cXFxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnc2xpZGUtaW5uZXItY29udGVudFxcXCI+XFxcXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImdpbm5lci1jb250YWluZXJcXFwiPlxcXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3NsaWRlLW1lZGlhXFxcIj5cXFxcbiAgICAgICAgICAgIDwvZGl2PlxcXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZ3NsaWRlLWRlc2NyaXB0aW9uXFxcIj5cXFxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJnZGVzYy1pbm5lclxcXCI+XFxcXG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cXFwiZ3NsaWRlLXRpdGxlXFxcIj48L2g0PlxcXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJnc2xpZGUtZGVzY1xcXCI+PC9kaXY+XFxcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxcXG4gICAgICAgICAgICA8L2Rpdj5cXFxcbiAgICAgICAgPC9kaXY+XFxcXG4gICAgPC9kaXY+XFxcXG48L2Rpdj4nLFxcclxcbiAgICAgICAgICAgIGxpZ2h0Ym94SFRNTDpcXHJcXG4gICAgICAgICAgICAgICAgJzxkaXYgaWQ9XFxcImdsaWdodGJveC1ib2R5XFxcIiBjbGFzcz1cXFwiZ2xpZ2h0Ym94LWNvbnRhaW5lclxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIiByb2xlPVxcXCJkaWFsb2dcXFwiIGFyaWEtaGlkZGVuPVxcXCJmYWxzZVxcXCI+XFxcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ2xvYWRlciB2aXNpYmxlXFxcIj48L2Rpdj5cXFxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnb3ZlcmxheVxcXCI+PC9kaXY+XFxcXG4gICAgPGRpdiBjbGFzcz1cXFwiZ2NvbnRhaW5lclxcXCI+XFxcXG4gICAgPGRpdiBpZD1cXFwiZ2xpZ2h0Ym94LXNsaWRlclxcXCIgY2xhc3M9XFxcImdzbGlkZXJcXFwiPjwvZGl2PlxcXFxuICAgIDxidXR0b24gY2xhc3M9XFxcImdjbG9zZSBnYnRuXFxcIiBhcmlhLWxhYmVsPVxcXCJDbG9zZVxcXCIgZGF0YS10YWJvcmRlcj1cXFwiM1xcXCI+e2Nsb3NlU1ZHfTwvYnV0dG9uPlxcXFxuICAgIDxidXR0b24gY2xhc3M9XFxcImdwcmV2IGdidG5cXFwiIGFyaWEtbGFiZWw9XFxcIlByZXZpb3VzXFxcIiBkYXRhLXRhYm9yZGVyPVxcXCIyXFxcIj57cHJldlNWR308L2J1dHRvbj5cXFxcbiAgICA8YnV0dG9uIGNsYXNzPVxcXCJnbmV4dCBnYnRuXFxcIiBhcmlhLWxhYmVsPVxcXCJOZXh0XFxcIiBkYXRhLXRhYm9yZGVyPVxcXCIxXFxcIj57bmV4dFNWR308L2J1dHRvbj5cXFxcbjwvZGl2PlxcXFxuPC9kaXY+JyxcXHJcXG4gICAgICAgIH0sXFxyXFxuICAgICAgICB0ZSA9IChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgZnVuY3Rpb24gZSgpIHtcXHJcXG4gICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIDoge307XFxyXFxuICAgICAgICAgICAgICAgIHQodGhpcywgZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5jdXN0b21PcHRpb25zID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAodGhpcy5zZXR0aW5ncyA9IGwoZWUsIGkpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLmVmZmVjdHNDbGFzc2VzID0gdGhpcy5nZXRBbmltYXRpb25DbGFzc2VzKCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmlkZW9QbGF5ZXJzID0ge30pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuYXBpRXZlbnRzID0gW10pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMuZnVsbEVsZW1lbnRzTGlzdCA9ICExKTtcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgbihlLCBbXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiaW5pdFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IHRoaXMuZ2V0U2VsZWN0b3IoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYmFzZUV2ZW50cyA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWxlbWVudDogdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aXRoQ2FsbGJhY2s6IGZ1bmN0aW9uICh0LCBpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgZS5vcGVuKGkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5lbGVtZW50cyA9IHRoaXMuZ2V0RWxlbWVudHMoKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwib3BlblxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IG51bGw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09IHRoaXMuZWxlbWVudHMubGVuZ3RoKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmFjdGl2ZVNsaWRlID0gbnVsbCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleCA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJldkFjdGl2ZVNsaWRlID0gbnVsbCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gTSh0KSA/IHQgOiB0aGlzLnNldHRpbmdzLnN0YXJ0QXQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IGUuZ2V0QXR0cmlidXRlKFxcXCJkYXRhLWdhbGxlcnlcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuZnVsbEVsZW1lbnRzTGlzdCA9IHRoaXMuZWxlbWVudHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnRzID0gdGhpcy5nZXRHYWxsZXJ5RWxlbWVudHMoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSShpKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IHRoaXMuZ2V0RWxlbWVudEluZGV4KGUpKSA8IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkgPSAwKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBNKGkpIHx8IChpID0gMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJ1aWxkKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibm9uZVxcXCIgPT0gdGhpcy5zZXR0aW5ncy5vcGVuRWZmZWN0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXFxcIm5vbmVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMuZmFkZS5pblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBkb2N1bWVudC5ib2R5LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmlubmVyV2lkdGggLVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPiAwKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXFxcInN0eWxlXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoby50eXBlID0gXFxcInRleHQvY3NzXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8uY2xhc3NOYW1lID0gXFxcImdjc3Mtc3R5bGVzXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG8uaW5uZXJUZXh0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2Nyb2xsYmFyLWZpeGVyIHttYXJnaW4tcmlnaHQ6IFxcXCIuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJweH1cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChzLCBcXFwiZ3Njcm9sbGJhci1maXhlclxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgocywgXFxcImdsaWdodGJveC1vcGVuXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKFEsIFxcXCJnbGlnaHRib3gtb3BlblxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChoKGRvY3VtZW50LmJvZHksIFxcXCJnbGlnaHRib3gtbW9iaWxlXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3Muc2xpZGVFZmZlY3QgPSBcXFwic2xpZGVcXFwiKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dTbGlkZShpLCAhMCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxID09IHRoaXMuZWxlbWVudHMubGVuZ3RoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAoaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZCdXR0b24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1idXR0b24taGlkZGVuXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnbGlnaHRib3gtYnV0dG9uLWhpZGRlblxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAoZChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZCdXR0b24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1idXR0b24taGlkZGVuXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnbGlnaHRib3gtYnV0dG9uLWhpZGRlblxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubGlnaHRib3hPcGVuID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFxcXCJvcGVuXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUKHRoaXMuc2V0dGluZ3Mub25PcGVuKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub25PcGVuKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBLICYmIHRoaXMuc2V0dGluZ3MudG91Y2hOYXZpZ2F0aW9uICYmIEIodGhpcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmtleWJvYXJkTmF2aWdhdGlvbiAmJiBYKHRoaXMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm9wZW5BdFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcGVuKG51bGwsIGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNob3dTbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDAsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzFdICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzFdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmKHRoaXMubG9hZGVyKSwgKHRoaXMuaW5kZXggPSBwYXJzZUludCh0KSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXFxcIi5jdXJyZW50XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gJiYgZChuLCBcXFwiY3VycmVudFxcXCIpLCB0aGlzLnNsaWRlQW5pbWF0ZU91dCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcyA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVt0XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGMocywgXFxcImxvYWRlZFxcXCIpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZUFuaW1hdGVJbihzLCBpKSwgcCh0aGlzLmxvYWRlcik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZih0aGlzLmxvYWRlcik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IHRoaXMuZWxlbWVudHNbdF0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXMuaW5kZXgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiBzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IHMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ29uZmlnOiBsLnNsaWRlQ29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBsLm5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogbnVsbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFxcXCJzbGlkZV9iZWZvcmVfbG9hZFxcXCIsIG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwuaW5zdGFuY2Uuc2V0Q29udGVudChzLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHAoZS5sb2FkZXIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5yZXNpemUoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2xpZGVBbmltYXRlSW4ocywgaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRyaWdnZXIoXFxcInNsaWRlX2FmdGVyX2xvYWRcXFwiLCBvKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zbGlkZURlc2NyaXB0aW9uID0gcy5xdWVyeVNlbGVjdG9yKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGUtZGVzY3JpcHRpb25cXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2xpZGVEZXNjcmlwdGlvbkNvbnRhaW5lZCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZURlc2NyaXB0aW9uICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZURlc2NyaXB0aW9uLnBhcmVudE5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnc2xpZGUtbWVkaWFcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnByZWxvYWQgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5wcmVsb2FkU2xpZGUodCArIDEpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJlbG9hZFNsaWRlKHQgLSAxKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5hdmlnYXRpb25DbGFzc2VzKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5hY3RpdmVTbGlkZSA9IHMpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInByZWxvYWRTbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPCAwIHx8IGUgPiB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChJKHRoaXMuZWxlbWVudHNbZV0pKSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW2VdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyhpLCBcXFwibG9hZGVkXFxcIikpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG4gPSB0aGlzLmVsZW1lbnRzW2VdLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IG4udHlwZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGwgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVOb2RlOiBpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ29uZmlnOiBuLnNsaWRlQ29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcjogbi5ub2RlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogbnVsbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcXFwic2xpZGVfYmVmb3JlX2xvYWRcXFwiLCBsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJ2aWRlb1xcXCIgPT0gcyB8fCBcXFwiZXh0ZXJuYWxcXFwiID09IHNcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uaW5zdGFuY2Uuc2V0Q29udGVudChpLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQudHJpZ2dlcihcXFwic2xpZGVfYWZ0ZXJfbG9hZFxcXCIsIGwpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMjAwKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbi5pbnN0YW5jZS5zZXRDb250ZW50KGksIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRyaWdnZXIoXFxcInNsaWRlX2FmdGVyX2xvYWRcXFwiLCBsKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInByZXZTbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nb1RvU2xpZGUodGhpcy5pbmRleCAtIDEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm5leHRTbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nb1RvU2xpZGUodGhpcy5pbmRleCArIDEpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdvVG9TbGlkZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzBdICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5wcmV2QWN0aXZlU2xpZGUgPSB0aGlzLmFjdGl2ZVNsaWRlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4ID0gdGhpcy5pbmRleCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhdGhpcy5sb29wKCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA8IDAgfHwgZSA+IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSkpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA8IDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGUgPSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IGUgPj0gdGhpcy5lbGVtZW50cy5sZW5ndGggJiYgKGUgPSAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NsaWRlKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImluc2VydFNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHt9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDEgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2b2lkIDAgIT09IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1sxXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC0xO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0IDwgMCAmJiAodCA9IHRoaXMuZWxlbWVudHMubGVuZ3RoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSBuZXcgVShlLCB0aGlzLCB0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4gPSBpLmdldENvbmZpZygpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IGwoe30sIG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IGkuY3JlYXRlKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5pbmRleCA9IHQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMubm9kZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChzLmluc3RhbmNlID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocy5zbGlkZUNvbmZpZyA9IG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5zcGxpY2UodCwgMCwgcyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gbnVsbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGggPSBudWxsO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zbGlkZXNDb250YWluZXIpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ID4gcikgdGhpcy5zbGlkZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiLmdzbGlkZVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVt0XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlc0NvbnRhaW5lci5pbnNlcnRCZWZvcmUobywgZCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoKHRoaXMuc2V0dGluZ3MucHJlbG9hZCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT0gdGhpcy5pbmRleCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDAgPT0gdCkgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4IC0gMSA9PSB0IHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleCArIDEgPT0gdCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRTbGlkZSh0KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09IHRoaXMuaW5kZXggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA9PSB0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmluZGV4ID0gMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVOYXZpZ2F0aW9uQ2xhc3NlcygpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW3RdKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaCA9IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZSh0KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHMuc2xpZGVOb2RlID0gYSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFxcXCJzbGlkZV9pbnNlcnRlZFxcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IGEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IGEsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNvbmZpZzogbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQodGhpcy5zZXR0aW5ncy5zbGlkZUluc2VydGVkKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2xpZGVJbnNlcnRlZCh7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogYSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiBoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInJlbW92ZVNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYXJndW1lbnRzWzBdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAtMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUgPCAwIHx8IGUgPiB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDEpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzQ29udGFpbmVyICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVtlXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZ2V0QWN0aXZlU2xpZGVJbmRleCgpID09IGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoZSA9PSB0aGlzLmVsZW1lbnRzLmxlbmd0aCAtIDFcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnByZXZTbGlkZSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5uZXh0U2xpZGUoKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5zcGxpY2UoZSwgMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXFxcInNsaWRlX3JlbW92ZWRcXFwiLCBlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQodGhpcy5zZXR0aW5ncy5zbGlkZVJlbW92ZWQpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zbGlkZVJlbW92ZWQoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2xpZGVBbmltYXRlSW5cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSwgdCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLW1lZGlhXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLWRlc2NyaXB0aW9uXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0ge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiB0aGlzLnByZXZBY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlSW5kZXg6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlQ29uZmlnOiBJKHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZWxlbWVudHNbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLnNsaWRlQ29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IEkodGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5lbGVtZW50c1tcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0ubm9kZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZTogdGhpcy5hY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IHRoaXMuYWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDb25maWc6XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHNbdGhpcy5pbmRleF0uc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzW3RoaXMuaW5kZXhdLm5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheWVyOiB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG4ub2Zmc2V0V2lkdGggPiAwICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwKHMpLCAocy5zdHlsZS5kaXNwbGF5ID0gXFxcIlxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoZSwgdGhpcy5lZmZlY3RzQ2xhc3NlcyksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHNbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mub3BlbkVmZmVjdFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uaW4sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNldHRpbmdzLmF1dG9wbGF5VmlkZW9zICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNsaWRlUGxheWVyUGxheShlKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkudHJpZ2dlcihcXFwic2xpZGVfY2hhbmdlZFxcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2OiBsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQ6IG8sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQoaS5zZXR0aW5ncy5hZnRlclNsaWRlQ2hhbmdlKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuc2V0dGluZ3MuYWZ0ZXJTbGlkZUNoYW5nZS5hcHBseShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2wsIG9dXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gdGhpcy5zZXR0aW5ncy5zbGlkZUVmZmVjdCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm5vbmVcXFwiICE9PSByXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3MuY3NzRWZlY3RzW3JdLmluXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHI7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4ID4gdGhpcy5pbmRleCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzbGlkZVxcXCIgPT0gdGhpcy5zZXR0aW5ncy5zbGlkZUVmZmVjdCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChhID0gdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMuc2xpZGVCYWNrLmluKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKGUsIGEsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zZXR0aW5ncy5hdXRvcGxheVZpZGVvcyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zbGlkZVBsYXllclBsYXkoZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnRyaWdnZXIoXFxcInNsaWRlX2NoYW5nZWRcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldjogbCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50OiBvLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUKGkuc2V0dGluZ3MuYWZ0ZXJTbGlkZUNoYW5nZSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnNldHRpbmdzLmFmdGVyU2xpZGVDaGFuZ2UuYXBwbHkoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtsLCBvXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnJlc2l6ZShlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgoZSwgXFxcImN1cnJlbnRcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzbGlkZUFuaW1hdGVPdXRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcmV2QWN0aXZlU2xpZGUpIHJldHVybiAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSB0aGlzLnByZXZBY3RpdmVTbGlkZTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZChlLCB0aGlzLmVmZmVjdHNDbGFzc2VzKSwgaChlLCBcXFwicHJldlxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHRoaXMuc2V0dGluZ3Muc2xpZGVFZmZlY3QsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibm9uZVxcXCIgIT09IHRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnNldHRpbmdzLmNzc0VmZWN0c1t0XS5vdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNsaWRlUGxheWVyUGF1c2UoZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXFxcInNsaWRlX2JlZm9yZV9jaGFuZ2VcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldjoge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZU5vZGU6IHRoaXMucHJldkFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUluZGV4OiB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZUNvbmZpZzogSShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJldkFjdGl2ZVNsaWRlSW5kZXhcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBudWxsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMuZWxlbWVudHNbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZBY3RpdmVTbGlkZUluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uc2xpZGVDb25maWcsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyaWdnZXI6IEkodGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gbnVsbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLmVsZW1lbnRzW1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLm5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudDoge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGU6IHRoaXMuYWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlTm9kZTogdGhpcy5hY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVJbmRleDogdGhpcy5pbmRleCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVDb25maWc6XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnRzW3RoaXMuaW5kZXhdXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWRlQ29uZmlnLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0aGlzLmVsZW1lbnRzW3RoaXMuaW5kZXhdLm5vZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQodGhpcy5zZXR0aW5ncy5iZWZvcmVTbGlkZUNoYW5nZSkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmJlZm9yZVNsaWRlQ2hhbmdlLmFwcGx5KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHRoaXNcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByZXZBY3RpdmVTbGlkZUluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiB0aGlzLnByZXZBY3RpdmVTbGlkZSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5ZXI6IHRoaXMuZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4OiB0aGlzLmluZGV4LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlOiB0aGlzLmFjdGl2ZVNsaWRlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXllcjogdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlU2xpZGVJbmRleCA+IHRoaXMuaW5kZXggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic2xpZGVcXFwiID09IHRoaXMuc2V0dGluZ3Muc2xpZGVFZmZlY3QgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaSA9IHRoaXMuc2V0dGluZ3MuY3NzRWZlY3RzLnNsaWRlQmFjay5vdXQpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyhlLCBpLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5xdWVyeVNlbGVjdG9yKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ2lubmVyLWNvbnRhaW5lclxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nc2xpZGUtbWVkaWFcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IGUucXVlcnlTZWxlY3RvcihcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlLWRlc2NyaXB0aW9uXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0LnN0eWxlLnRyYW5zZm9ybSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkuc3R5bGUudHJhbnNmb3JtID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKGksIFxcXCJncmVzZXRcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGkuc3R5bGUub3BhY2l0eSA9IFxcXCJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiAmJiAobi5zdHlsZS5vcGFjaXR5ID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKGUsIFxcXCJwcmV2XFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJnZXRBbGxQbGF5ZXJzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWRlb1BsYXllcnM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0U2xpZGVQbGF5ZXJJbnN0YW5jZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gXFxcImd2aWRlb1xcXCIgKyBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IHRoaXMuZ2V0QWxsUGxheWVycygpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gISghTyhpLCB0KSB8fCAhaVt0XSkgJiYgaVt0XTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzdG9wU2xpZGVWaWRlb1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmd2aWRlby13cmFwcGVyXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChlID0gdC5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtaW5kZXhcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3RvcFNsaWRlVmlkZW8gaXMgZGVwcmVjYXRlZCwgdXNlIHNsaWRlUGxheWVyUGF1c2VcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIGkucGxheWluZyAmJiBpLnBhdXNlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwic2xpZGVQbGF5ZXJQYXVzZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmd2aWRlby13cmFwcGVyXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChlID0gdC5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtaW5kZXhcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgaS5wbGF5aW5nICYmIGkucGF1c2UoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJwbGF5U2xpZGVWaWRlb1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrKGUpKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IGUucXVlcnlTZWxlY3RvcihcXFwiLmd2aWRlby13cmFwcGVyXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ICYmIChlID0gdC5nZXRBdHRyaWJ1dGUoXFxcImRhdGEtaW5kZXhcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicGxheVNsaWRlVmlkZW8gaXMgZGVwcmVjYXRlZCwgdXNlIHNsaWRlUGxheWVyUGxheVxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmdldFNsaWRlUGxheWVySW5zdGFuY2UoZSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgJiYgIWkucGxheWluZyAmJiBpLnBsYXkoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJzbGlkZVBsYXllclBsYXlcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoayhlKSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSBlLnF1ZXJ5U2VsZWN0b3IoXFxcIi5ndmlkZW8td3JhcHBlclxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCAmJiAoZSA9IHQuZ2V0QXR0cmlidXRlKFxcXCJkYXRhLWluZGV4XFxcIikpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gdGhpcy5nZXRTbGlkZVBsYXllckluc3RhbmNlKGUpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaS5wbGF5aW5nICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5wbGF5KCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmF1dG9mb2N1c1ZpZGVvcyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZWxlbWVudHMuY29udGFpbmVyLmZvY3VzKCkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInNldEVsZW1lbnRzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB0aGlzO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmVsZW1lbnRzID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0gW107XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUubGVuZ3RoICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKGUsIGZ1bmN0aW9uIChlLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMgPSBuZXcgVShlLCB0LCBuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyA9IHMuZ2V0Q29uZmlnKCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBsKHt9LCBvKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5zbGlkZUNvbmZpZyA9IG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5pbnN0YW5jZSA9IHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5pbmRleCA9IG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnB1c2gocik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmVsZW1lbnRzID0gaSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0Ym94T3BlbiAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgodGhpcy5zbGlkZXNDb250YWluZXIuaW5uZXJIVE1MID0gXFxcIlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudHMubGVuZ3RoICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChvKHRoaXMuZWxlbWVudHMsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbSh0LnNldHRpbmdzLnNsaWRlSFRNTCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnNsaWRlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChlKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1NsaWRlKDAsICEwKSkpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEVsZW1lbnRJbmRleFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHRoaXMuZWxlbWVudHMsIGZ1bmN0aW9uIChpLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE8oaSwgXFxcIm5vZGVcXFwiKSAmJiBpLm5vZGUgPT0gZSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh0ID0gbiksICEwO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiZ2V0RWxlbWVudHNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBbXTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudHMgPSB0aGlzLmVsZW1lbnRzXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuZWxlbWVudHNcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogW10pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIUkodGhpcy5zZXR0aW5ncy5lbGVtZW50cykgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFKHRoaXMuc2V0dGluZ3MuZWxlbWVudHMpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5lbGVtZW50cy5sZW5ndGggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHRoaXMuc2V0dGluZ3MuZWxlbWVudHMsIGZ1bmN0aW9uIChpLCBuKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IFUoaSwgZSwgbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gcy5nZXRDb25maWcoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSBsKHt9LCBvKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIubm9kZSA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyLmluZGV4ID0gbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5pbnN0YW5jZSA9IHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIuc2xpZGVDb25maWcgPSBvKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHVzaChyKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAhMTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0U2VsZWN0b3IoKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTZWxlY3RvcigpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobyhpLCBmdW5jdGlvbiAoaSwgbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzID0gbmV3IFUoaSwgZSwgbiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBzLmdldENvbmZpZygpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gbCh7fSwgbyk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHIubm9kZSA9IGkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5pbmRleCA9IG4pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5pbnN0YW5jZSA9IHMpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5zbGlkZUNvbmZpZyA9IG8pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoci5nYWxsZXJ5ID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuZ2V0QXR0cmlidXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJkYXRhLWdhbGxlcnlcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wdXNoKHIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0KVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEdhbGxlcnlFbGVtZW50c1xcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlLCB0KSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZpbHRlcihmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2FsbGVyeSA9PSB0O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJnZXRTZWxlY3RvclxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnNldHRpbmdzLmVsZW1lbnRzICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5zZXR0aW5ncy5zZWxlY3RvciAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImRhdGEtXFxcIiA9PVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc2VsZWN0b3Iuc3Vic3RyaW5nKDAsIDUpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBcXFwiKltcXFwiLmNvbmNhdCh0aGlzLnNldHRpbmdzLnNlbGVjdG9yLCBcXFwiXVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNldHRpbmdzLnNlbGVjdG9yKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEFjdGl2ZVNsaWRlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zbGlkZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ3NsaWRlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApW3RoaXMuaW5kZXhdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEFjdGl2ZVNsaWRlSW5kZXhcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImdldEFuaW1hdGlvbkNsYXNzZXNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gW107XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIHQgaW4gdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMuaGFzT3duUHJvcGVydHkodCkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHRoaXMuc2V0dGluZ3MuY3NzRWZlY3RzW3RdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaChcXFwiZ1xcXCIuY29uY2F0KGkuaW4pKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wdXNoKFxcXCJnXFxcIi5jb25jYXQoaS5vdXQpKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuam9pbihcXFwiIFxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImJ1aWxkXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXM7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1aWx0KSByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gZG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSA9IFtdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHQsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnBhcmVudE5vZGUgPT0gZG9jdW1lbnQuYm9keSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIjXFxcIiAhPT0gZS5ub2RlTmFtZS5jaGFyQXQoMCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmhhc0F0dHJpYnV0ZSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICFlLmhhc0F0dHJpYnV0ZShcXFwiYXJpYS1oaWRkZW5cXFwiKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChpLnB1c2goZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5zZXRBdHRyaWJ1dGUoXFxcImFyaWEtaGlkZGVuXFxcIiwgXFxcInRydWVcXFwiKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9IE8odGhpcy5zZXR0aW5ncy5zdmcsIFxcXCJuZXh0XFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3Muc3ZnLm5leHRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IE8odGhpcy5zZXR0aW5ncy5zdmcsIFxcXCJwcmV2XFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3Muc3ZnLnByZXZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9IE8odGhpcy5zZXR0aW5ncy5zdmcsIFxcXCJjbG9zZVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnNldHRpbmdzLnN2Zy5jbG9zZVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogXFxcIlxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gdGhpcy5zZXR0aW5ncy5saWdodGJveEhUTUw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gbShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gKHIgPSAociA9IHIucmVwbGFjZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAve25leHRTVkd9L2csXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSkucmVwbGFjZSgve3ByZXZTVkd9L2csIHMpKS5yZXBsYWNlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC97Y2xvc2VTVkd9L2csXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxcXCJnbGlnaHRib3gtYm9keVxcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGFsID0gZDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBkLnF1ZXJ5U2VsZWN0b3IoXFxcIi5nY2xvc2VcXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMucHJldkJ1dHRvbiA9IGQucXVlcnlTZWxlY3RvcihcXFwiLmdwcmV2XFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubmV4dEJ1dHRvbiA9IGQucXVlcnlTZWxlY3RvcihcXFwiLmduZXh0XFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMub3ZlcmxheSA9IGQucXVlcnlTZWxlY3RvcihcXFwiLmdvdmVybGF5XFxcIikpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMubG9hZGVyID0gZC5xdWVyeVNlbGVjdG9yKFxcXCIuZ2xvYWRlclxcXCIpKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNsaWRlc0NvbnRhaW5lciA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnbGlnaHRib3gtc2xpZGVyXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuYm9keUhpZGRlbkNoaWxkRWxtcyA9IGkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRzID0ge30pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGFsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnbGlnaHRib3gtXFxcIiArIHRoaXMuc2V0dGluZ3Muc2tpblxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2xvc2VCdXR0b24gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRzLmNsb3NlID0gYShcXFwiY2xpY2tcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uRWxlbWVudDogZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBlLmNsb3NlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF0aGlzLnNldHRpbmdzLmNsb3NlQnV0dG9uICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZy5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGcpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uZXh0QnV0dG9uICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZXZlbnRzLm5leHQgPSBhKFxcXCJjbGlja1xcXCIsIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbGVtZW50OiB0aGlzLm5leHRCdXR0b24sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKHQsIGkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQucHJldmVudERlZmF1bHQoKSwgZS5uZXh0U2xpZGUoKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZCdXR0b24gJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5ldmVudHMucHJldiA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IHRoaXMucHJldkJ1dHRvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5wcmV2ZW50RGVmYXVsdCgpLCBlLnByZXZTbGlkZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2xvc2VPbk91dHNpZGVDbGljayAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmV2ZW50cy5vdXRDbG9zZSA9IGEoXFxcImNsaWNrXFxcIiwge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkVsZW1lbnQ6IGQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhDYWxsYmFjazogZnVuY3Rpb24gKHQsIGkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudE91dHNpZGVDbGljayB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJnbGlnaHRib3gtbW9iaWxlXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0LnRhcmdldCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5naW5uZXItY29udGFpbmVyXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1KHQudGFyZ2V0LCBcXFwiLmdidG5cXFwiKSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGModC50YXJnZXQsIFxcXCJnbmV4dFxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyh0LnRhcmdldCwgXFxcImdwcmV2XFxcIikgfHxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmNsb3NlKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyh0aGlzLmVsZW1lbnRzLCBmdW5jdGlvbiAodCwgaSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2xpZGVzQ29udGFpbmVyLmFwcGVuZENoaWxkKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lmluc3RhbmNlLmNyZWF0ZSgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHQuc2xpZGVOb2RlID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2xpZGVzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIi5nc2xpZGVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApW2ldKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSyAmJiBoKGRvY3VtZW50LmJvZHksIFxcXCJnbGlnaHRib3gtdG91Y2hcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmV2ZW50cy5yZXNpemUgPSBhKFxcXCJyZXNpemVcXFwiLCB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25FbGVtZW50OiB3aW5kb3csXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2l0aENhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucmVzaXplKCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLmJ1aWx0ID0gITApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInJlc2l6ZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgdm9pZCAwICE9PSBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogbnVsbDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBlIHx8IHRoaXMuYWN0aXZlU2xpZGUpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhYyhlLCBcXFwiem9vbWVkXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdCA9IHkoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3ZpZGVvLXdyYXBwZXJcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuID0gZS5xdWVyeVNlbGVjdG9yKFxcXCIuZ3NsaWRlLWltYWdlXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcyA9IHRoaXMuc2xpZGVEZXNjcmlwdGlvbixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsID0gdC53aWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5oZWlnaHQ7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGwgPD0gNzY4XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gaChkb2N1bWVudC5ib2R5LCBcXFwiZ2xpZ2h0Ym94LW1vYmlsZVxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZChkb2N1bWVudC5ib2R5LCBcXFwiZ2xpZ2h0Ym94LW1vYmlsZVxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgfHwgbilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByID0gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocyAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGMocywgXFxcImRlc2NyaXB0aW9uLWJvdHRvbVxcXCIpIHx8XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyhzLCBcXFwiZGVzY3JpcHRpb24tdG9wXFxcIikpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhYyhzLCBcXFwiZ2Fic29sdXRlXFxcIikgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChyID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGwgPD0gNzY4KSBuLnF1ZXJ5U2VsZWN0b3IoXFxcImltZ1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChyKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYSA9IHMub2Zmc2V0SGVpZ2h0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHUgPSBuLnF1ZXJ5U2VsZWN0b3IoXFxcImltZ1xcXCIpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInN0eWxlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibWF4LWhlaWdodDogY2FsYygxMDB2aCAtIFxcXCIuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicHgpXFxcIlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJzdHlsZVxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtYXgtd2lkdGg6IFxcXCIuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdS5vZmZzZXRXaWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJweDtcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcgPSBPKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wbHlyLmNvbmZpZyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJyYXRpb1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnNldHRpbmdzLnBseXIuY29uZmlnLnJhdGlvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFxcXCJcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWcpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2ID0gaS5jbGllbnRXaWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmID0gaS5jbGllbnRIZWlnaHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHYgLyBmO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IFxcXCJcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNvbmNhdCh2IC8gcCwgXFxcIjpcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jb25jYXQoZiAvIHApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gZy5zcGxpdChcXFwiOlxcXCIpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IHRoaXMuc2V0dGluZ3MudmlkZW9zV2lkdGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gdGhpcy5zZXR0aW5ncy52aWRlb3NXaWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFMgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChiID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTSh4KSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtMSAhPT0geC5pbmRleE9mKFxcXCJweFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHBhcnNlSW50KHgpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IC0xICE9PSB4LmluZGV4T2YoXFxcInZ3XFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGwgKiBwYXJzZUludCh4KSkgL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLTEgIT09IHguaW5kZXhPZihcXFwidmhcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAobyAqIHBhcnNlSW50KHgpKSAvXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEwMFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAtMSAhPT0geC5pbmRleE9mKFxcXCIlXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gKGwgKiBwYXJzZUludCh4KSkgL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAxMDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcGFyc2VJbnQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmNsaWVudFdpZHRoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICkpIC9cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAocGFyc2VJbnQobVswXSkgL1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZUludChtWzFdKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoUyA9IE1hdGguZmxvb3IoUykpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciAmJiAobyAtPSBzLm9mZnNldEhlaWdodCksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID4gbCB8fCBTID4gbyB8fCAobyA8IFMgJiYgbCA+IGIpKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gaS5vZmZzZXRXaWR0aCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBUID0gaS5vZmZzZXRIZWlnaHQsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQyA9IG8gLyBULFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsgPSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiB3ICogQyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBUICogQyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5wYXJlbnROb2RlLnNldEF0dHJpYnV0ZShcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtYXgtd2lkdGg6IFxcXCIuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrLndpZHRoLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwicHhcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHMuc2V0QXR0cmlidXRlKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInN0eWxlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCJtYXgtd2lkdGg6IFxcXCIuY29uY2F0KFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsud2lkdGgsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcInB4O1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoaS5wYXJlbnROb2RlLnN0eWxlLm1heFdpZHRoID1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiXFxcIi5jb25jYXQoeCkpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcy5zZXRBdHRyaWJ1dGUoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwic3R5bGVcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIm1heC13aWR0aDogXFxcIi5jb25jYXQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiO1xcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIClcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJyZWxvYWRcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInVwZGF0ZU5hdmlnYXRpb25DbGFzc2VzXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IHRoaXMubG9vcCgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKHRoaXMubmV4dEJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKHRoaXMucHJldkJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAwID09IHRoaXMuaW5kZXggJiYgdGhpcy5lbGVtZW50cy5sZW5ndGggLSAxID09IDBcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IChoKHRoaXMucHJldkJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoKHRoaXMubmV4dEJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIikpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAwICE9PSB0aGlzLmluZGV4IHx8IGVcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuaW5kZXggIT09IHRoaXMuZWxlbWVudHMubGVuZ3RoIC0gMSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZSB8fFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaCh0aGlzLm5leHRCdXR0b24sIFxcXCJkaXNhYmxlZFxcXCIpXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBoKHRoaXMucHJldkJ1dHRvbiwgXFxcImRpc2FibGVkXFxcIik7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwibG9vcFxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBPKHRoaXMuc2V0dGluZ3MsIFxcXCJsb29wQXRFbmRcXFwiKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnNldHRpbmdzLmxvb3BBdEVuZFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUgPSBPKHRoaXMuc2V0dGluZ3MsIFxcXCJsb29wXFxcIilcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuc2V0dGluZ3MubG9vcFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogZSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiY2xvc2VcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gdGhpcztcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxpZ2h0Ym94T3Blbikge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZXZlbnRzKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgdCBpbiB0aGlzLmV2ZW50cylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudHMuaGFzT3duUHJvcGVydHkodCkgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzW3RdLmRlc3Ryb3koKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50cyA9IG51bGw7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gITE7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2xvc2luZykgcmV0dXJuICExO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5jbG9zaW5nID0gITApLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zbGlkZVBsYXllclBhdXNlKHRoaXMuYWN0aXZlU2xpZGUpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mdWxsRWxlbWVudHNMaXN0ICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZWxlbWVudHMgPSB0aGlzLmZ1bGxFbGVtZW50c0xpc3QpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib2R5SGlkZGVuQ2hpbGRFbG1zLmxlbmd0aCAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG8odGhpcy5ib2R5SGlkZGVuQ2hpbGRFbG1zLCBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLnJlbW92ZUF0dHJpYnV0ZShcXFwiYXJpYS1oaWRkZW5cXFwiKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGgodGhpcy5tb2RhbCwgXFxcImdsaWdodGJveC1jbG9zaW5nXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwibm9uZVxcXCIgPT0gdGhpcy5zZXR0aW5ncy5vcGVuRWZmZWN0XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gXFxcIm5vbmVcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHMuZmFkZS5vdXRcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2xpZGUsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jc3NFZmVjdHNbXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuY2xvc2VFZmZlY3RcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLm91dCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgoZS5hY3RpdmVTbGlkZSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUucHJldkFjdGl2ZVNsaWRlSW5kZXggPSBudWxsKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLnByZXZBY3RpdmVTbGlkZSA9IG51bGwpLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKGUuYnVpbHQgPSAhMSksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLmV2ZW50cylcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB0IGluIGUuZXZlbnRzKVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZXZlbnRzLmhhc093blByb3BlcnR5KHQpICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZXZlbnRzW3RdLmRlc3Ryb3koKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuZXZlbnRzID0gbnVsbDtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGRvY3VtZW50LmJvZHk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQoUSwgXFxcImdsaWdodGJveC1vcGVuXFxcIiksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcImdsaWdodGJveC1vcGVuIHRvdWNoaW5nIGdkZXNjLW9wZW4gZ2xpZ2h0Ym94LXRvdWNoIGdsaWdodGJveC1tb2JpbGUgZ3Njcm9sbGJhci1maXhlclxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICksXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlLm1vZGFsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5tb2RhbFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUudHJpZ2dlcihcXFwiY2xvc2VcXFwiKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFQoZS5zZXR0aW5ncy5vbkNsb3NlKSAmJlxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc2V0dGluZ3Mub25DbG9zZSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbiA9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIuZ2Nzcy1zdHlsZXNcXFwiXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuICYmIG4ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChuKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmxpZ2h0Ym94T3BlbiA9ICExKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChlLmNsb3NpbmcgPSBudWxsKTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcImRlc3Ryb3lcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJBbGxFdmVudHMoKSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYmFzZUV2ZW50cyAmJiB0aGlzLmJhc2VFdmVudHMuZGVzdHJveSgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcIm9uXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzLmxlbmd0aCA+IDIgJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvaWQgMCAhPT0gYXJndW1lbnRzWzJdICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMl07XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZSB8fCAhVCh0KSlcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXFxcIkV2ZW50IG5hbWUgYW5kIGNhbGxiYWNrIG11c3QgYmUgZGVmaW5lZFxcXCJcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBpRXZlbnRzLnB1c2goe1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZ0OiBlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25jZTogaSxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiB0LFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFxcXCJvbmNlXFxcIixcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGUsIHQpIHtcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbihlLCB0LCAhMCk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwidHJpZ2dlclxcXCIsXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ID0gdGhpcyxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPVxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAxICYmXFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdm9pZCAwICE9PSBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMV1cXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbiA9IFtdO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKHRoaXMuYXBpRXZlbnRzLCBmdW5jdGlvbiAodCwgcykge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSB0LmV2dCxcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvID0gdC5vbmNlLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPSB0LmNhbGxiYWNrO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbCA9PSBlICYmIChyKGkpLCBvICYmIG4ucHVzaChzKSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5sZW5ndGggJiZcXHJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvKG4sIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0LmFwaUV2ZW50cy5zcGxpY2UoZSwgMSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcXHJcXG4gICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBcXFwiY2xlYXJBbGxFdmVudHNcXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBpRXZlbnRzLnNwbGljZSgwLCB0aGlzLmFwaUV2ZW50cy5sZW5ndGgpO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICAgICAge1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogXFxcInZlcnNpb25cXFwiLFxcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBcXFwiMy4xLjFcXFwiO1xcclxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXFxyXFxuICAgICAgICAgICAgICAgICAgICB9LFxcclxcbiAgICAgICAgICAgICAgICBdKSxcXHJcXG4gICAgICAgICAgICAgICAgZVxcclxcbiAgICAgICAgICAgICk7XFxyXFxuICAgICAgICB9KSgpO1xcclxcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdmFyIGUgPVxcclxcbiAgICAgICAgICAgICAgICBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiB2b2lkIDAgIT09IGFyZ3VtZW50c1swXVxcclxcbiAgICAgICAgICAgICAgICAgICAgPyBhcmd1bWVudHNbMF1cXHJcXG4gICAgICAgICAgICAgICAgICAgIDoge30sXFxyXFxuICAgICAgICAgICAgdCA9IG5ldyB0ZShlKTtcXHJcXG4gICAgICAgIHJldHVybiB0LmluaXQoKSwgdDtcXHJcXG4gICAgfTtcXHJcXG59KTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9nbGlnaHRib3guanM/XCIpO1xuICAgICAgLyoqKi9cbiAgICB9LFxuXG4gICAgLyoqKi9cbiAgICBcIi4vc3JjL2pzL21haW4uanNcIjpcbiAgICAvKiEqKioqKioqKioqKioqKioqKioqKioqKiohKlxcXG4gICAgICAhKioqIC4vc3JjL2pzL21haW4uanMgKioqIVxuICAgICAgXFwqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAvKioqL1xuICAgIGZ1bmN0aW9uIHNyY0pzTWFpbkpzKF9fdW51c2VkX3dlYnBhY2tfbW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG4gICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgZXZhbChcIl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcXG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2dhbGxlcnlfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oLyohIC4vZ2FsbGVyeS5qcyAqLyBcXFwiLi9zcmMvanMvZ2FsbGVyeS5qc1xcXCIpO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2FsbGVyeV9qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fX2RlZmF1bHQgPSAvKiNfX1BVUkVfXyovX193ZWJwYWNrX3JlcXVpcmVfXy5uKF9nYWxsZXJ5X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfZ2xpZ2h0Ym94X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2dsaWdodGJveC5qcyAqLyBcXFwiLi9zcmMvanMvZ2xpZ2h0Ym94LmpzXFxcIik7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9nbGlnaHRib3hfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfZ2xpZ2h0Ym94X2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfYWNjb3JkaW9uX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL2FjY29yZGlvbi5qcyAqLyBcXFwiLi9zcmMvanMvYWNjb3JkaW9uLmpzXFxcIik7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9hY2NvcmRpb25fanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX19kZWZhdWx0ID0gLyojX19QVVJFX18qL19fd2VicGFja19yZXF1aXJlX18ubihfYWNjb3JkaW9uX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8yX18pO1xcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfdGVzdGltb25pYWxzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8zX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Rlc3RpbW9uaWFscy5qcyAqLyBcXFwiLi9zcmMvanMvdGVzdGltb25pYWxzLmpzXFxcIik7XFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuXFxyXFxuY29uc3QgdG9nZ2xlckJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi5tYWluLW5hdi0tdG9nZ2xlclxcXCIpO1xcclxcbmNvbnN0IGxpbmtzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLm1haW4tbmF2X19saW5rcy1jb250YWluZXJcXFwiKTtcXHJcXG5jb25zdCBoYW1idXJnZXJMaW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5tYWluLW5hdi0tdG9nZ2xlci1saW5lXFxcIik7XFxyXFxuY29uc3QgZ2FsbGVyeUl0ZW1zQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcXHJcXG4gICAgXFxcIi5zZWN0aW9uLWdhbGxlcnlfX2NvbnRlbnRcXFwiXFxyXFxuKTtcXHJcXG5cXHJcXG5jb25zdCBsaWdodGJveCA9IEdMaWdodGJveCh7XFxyXFxuICAgIHRvdWNoTmF2aWdhdGlvbjogdHJ1ZSxcXHJcXG4gICAgc2VsZWN0b3I6IFxcXCIuZ2xpZ2h0Ym94M1xcXCIsXFxyXFxufSk7XFxyXFxuXFxyXFxudG9nZ2xlckJ0bi5hZGRFdmVudExpc3RlbmVyKFxcXCJjbGlja1xcXCIsIChlKSA9PiB7XFxyXFxuICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgaGFtYnVyZ2VyTGluZXMuZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC50b2dnbGUoXFxcImFjdGl2ZVxcXCIpKTtcXHJcXG4gICAgbGlua3NDb250YWluZXIuY2xhc3NMaXN0LnRvZ2dsZShcXFwiYWN0aXZlXFxcIik7XFxyXFxufSk7XFxyXFxuXFxyXFxubGlua3NDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcXFwiY2xpY2tcXFwiLCAoZSkgPT4ge1xcclxcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgIGlmIChbLi4uaGFtYnVyZ2VyTGluZXNdLnNvbWUoKGVsKSA9PiBlbC5jbGFzc0xpc3QuY29udGFpbnMoXFxcImFjdGl2ZVxcXCIpKSkge1xcclxcbiAgICAgICAgaGFtYnVyZ2VyTGluZXMuZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5yZW1vdmUoXFxcImFjdGl2ZVxcXCIpKTtcXHJcXG4gICAgICAgIGxpbmtzQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXFxcImFjdGl2ZVxcXCIpO1xcclxcbiAgICB9XFxyXFxufSk7XFxyXFxuXFxyXFxuZ2FsbGVyeUl0ZW1zQ29udGFpbmVyLmZvckVhY2goKGNvbnRhaW5lcikgPT4ge1xcclxcbiAgICBjb25zdCBpbWFnZXNDb3VudHMgPSBbLi4uY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXFxcIi5nbGlnaHRib3gzXFxcIildO1xcclxcbiAgICBjb25zdCBzcGFuID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXFxcIi5zZWN0aW9uLWdhbGxlcnktLWl0ZW0tY291bnRcXFwiKTtcXHJcXG4gICAgY29uc29sZS5sb2coc3Bhbik7XFxyXFxuXFxyXFxuICAgIGNvbnN0IERFRkFVTFRfSU1HX0NPVU5UID0gMjtcXHJcXG4gICAgaWYgKHNwYW4pIHtcXHJcXG4gICAgICAgIGNvbnN0IGNvdW50ID0gaW1hZ2VzQ291bnRzLmxlbmd0aCAtIERFRkFVTFRfSU1HX0NPVU5UO1xcclxcbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xcclxcbiAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSBgKyR7Y291bnR9YDtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgfVxcclxcbn0pO1xcclxcblxcclxcbi8vIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXFxcIkRPTUNvbnRlbnRMb2FkZWRcXFwiLCAoKSA9PiB7XFxyXFxuLy8gICAgIFsuLi5hY2NvcmRpb25Db250ZW50c10uZm9yRWFjaCgoZWwpID0+IGVsLmNsYXNzTGlzdC5hZGQoXFxcImhpZGRlblxcXCIpKTtcXHJcXG4vLyB9KTtcXHJcXG5cXG5cXG4vLyMgc291cmNlVVJMPXdlYnBhY2s6Ly9ndWxwc3RhcnRlci8uL3NyYy9qcy9tYWluLmpzP1wiKTtcbiAgICAgIC8qKiovXG4gICAgfSxcblxuICAgIC8qKiovXG4gICAgXCIuL3NyYy9qcy9yZXZpZXdzLmpzXCI6XG4gICAgLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAgICAgISoqKiAuL3NyYy9qcy9yZXZpZXdzLmpzICoqKiFcbiAgICAgIFxcKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gICAgLyoqKi9cbiAgICBmdW5jdGlvbiBzcmNKc1Jldmlld3NKcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgIGV2YWwoXCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XFxuLyogaGFybW9ueSBleHBvcnQgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIHtcXG4vKiBoYXJtb255IGV4cG9ydCAqLyAgIFxcXCJyZXZpZXdzXFxcIjogKCkgPT4gKC8qIGJpbmRpbmcgKi8gcmV2aWV3cylcXG4vKiBoYXJtb255IGV4cG9ydCAqLyB9KTtcXG5jb25zdCByZXZpZXdzID0gW1xcclxcbiAgICB7XFxyXFxuICAgICAgICBpZDogMSxcXHJcXG4gICAgICAgIG5hbWU6IFxcXCJDYXQgT25lXFxcIixcXHJcXG4gICAgICAgIGpvYjogXFxcIlVYXFxcIixcXHJcXG4gICAgICAgIGltZzogXFxcImltZy9jYXQtMS5qcGdcXFwiLFxcclxcbiAgICAgICAgdGV4dDogXFxcIk9kbGnEjWFuIHBvc2FvIG5hIG5hxaFvaiBrdcSHaSB1IFZpbmnFocSHdSwgaXp1emV0bm8gc21vIHphZG92b2xqbmkga3ZhbGl0ZXRvbSBpIHJhZG9tLlxcXCIsXFxyXFxuICAgIH0sXFxyXFxuICAgIHtcXHJcXG4gICAgICAgIGlkOiAyLFxcclxcbiAgICAgICAgbmFtZTogXFxcIkNhdCBUd29cXFwiLFxcclxcbiAgICAgICAgam9iOiBcXFwiR3JhcGhpY3NcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiaW1nL2NhdC0yLmpwZ1xcXCIsXFxyXFxuICAgICAgICB0ZXh0OiBcXFwiVGhpcyBpcyBzb21lIHJhbmRvbSB0ZXh0XFxcIixcXHJcXG4gICAgfSxcXHJcXG4gICAge1xcclxcbiAgICAgICAgaWQ6IDMsXFxyXFxuICAgICAgICBuYW1lOiBcXFwiQ2F0IE9uZVxcXCIsXFxyXFxuICAgICAgICBqb2I6IFxcXCJUZXN0ZXJcXFwiLFxcclxcbiAgICAgICAgaW1nOiBcXFwiaW1nL2NhdC0zLmpwZ1xcXCIsXFxyXFxuICAgICAgICB0ZXh0OiBcXFwiVGhpcyBpcyBzb21lIHJhbmRvbSB0ZXh0XFxcIixcXHJcXG4gICAgfSxcXHJcXG5dO1xcclxcblxcblxcbi8vIyBzb3VyY2VVUkw9d2VicGFjazovL2d1bHBzdGFydGVyLy4vc3JjL2pzL3Jldmlld3MuanM/XCIpO1xuICAgICAgLyoqKi9cbiAgICB9LFxuXG4gICAgLyoqKi9cbiAgICBcIi4vc3JjL2pzL3Rlc3RpbW9uaWFscy5qc1wiOlxuICAgIC8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqISpcXFxuICAgICAgISoqKiAuL3NyYy9qcy90ZXN0aW1vbmlhbHMuanMgKioqIVxuICAgICAgXFwqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAgIC8qKiovXG4gICAgZnVuY3Rpb24gc3JjSnNUZXN0aW1vbmlhbHNKcyhfX3VudXNlZF93ZWJwYWNrX21vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgIGV2YWwoXCJfX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XFxuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9yZXZpZXdzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKC8qISAuL3Jldmlld3MuanMgKi8gXFxcIi4vc3JjL2pzL3Jldmlld3MuanNcXFwiKTtcXG5cXHJcXG5cXHJcXG5jb25zdCB0ZXN0aW1vbmlhbENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi50ZXN0aW1vbmlhbHNcXFwiKTtcXHJcXG5jb25zdCB0ZXN0aW1vbmlhbEltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxcIi50ZXN0aW1vbmlhbHNfX2ltZ1xcXCIpO1xcclxcbmNvbnN0IHRlc3RpbW9uaWFsVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxcXCIudGVzdGltb25pYWxzX190aXRsZVxcXCIpO1xcclxcbmNvbnN0IHRlc3RpbW9uaWFsSm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLnRlc3RpbW9uaWFsc19fam9iXFxcIik7XFxyXFxuY29uc3QgdGVzdGltb25pYWxJbmZvID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXFwiLnRlc3RpbW9uaWFsc19faW5mb1xcXCIpO1xcclxcbmNvbnN0IGJ0blRlc3RpbW9uaWFsTGVmdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXFxyXFxuICAgIFxcXCIudGVzdGltb25pYWxzX19idXR0b24tLWxlZnRcXFwiXFxyXFxuKTtcXHJcXG5jb25zdCBidG5UZXN0aW1vbmlhbFJpZ2h0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcXHJcXG4gICAgXFxcIi50ZXN0aW1vbmlhbHNfX2J1dHRvbi0tcmlnaHRcXFwiXFxyXFxuKTtcXHJcXG5cXHJcXG4vLyBTdGF0ZVxcclxcbmxldCBjdXJyZW50TnVtYmVyID0gMDtcXHJcXG5jb25zdCBpbnRlcnZhbFRpbWluZyA9IDIyNTA7XFxyXFxubGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gaW50ZXJ2YWxTZXR1cCgpLCBpbnRlcnZhbFRpbWluZyk7XFxyXFxuXFxyXFxuLy8gRXZlbnQgTGlzdGVuZXJzXFxyXFxudGVzdGltb25pYWxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcXFwibW91c2VvdmVyXFxcIiwgKCkgPT4ge1xcclxcbiAgICBjb25zb2xlLmxvZyhcXFwiaGlcXFwiKTtcXHJcXG4gICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XFxyXFxufSk7XFxyXFxuXFxyXFxudGVzdGltb25pYWxDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcXFwibW91c2VvdXRcXFwiLCAoKSA9PiB7XFxyXFxuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gaW50ZXJ2YWxTZXR1cCgpLCBpbnRlcnZhbFRpbWluZyk7XFxyXFxufSk7XFxyXFxuXFxyXFxuYnRuVGVzdGltb25pYWxMZWZ0LmFkZEV2ZW50TGlzdGVuZXIoXFxcImNsaWNrXFxcIiwgKGUpID0+IHtcXHJcXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICBjdXJyZW50TnVtYmVyLS07XFxyXFxuICAgIG1vdmVJdGVtKCk7XFxyXFxufSk7XFxyXFxuXFxyXFxuYnRuVGVzdGltb25pYWxSaWdodC5hZGRFdmVudExpc3RlbmVyKFxcXCJjbGlja1xcXCIsIChlKSA9PiB7XFxyXFxuICAgIGUucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgY3VycmVudE51bWJlcisrO1xcclxcbiAgICBtb3ZlSXRlbSgpO1xcclxcbn0pO1xcclxcblxcclxcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFxcXCJET01Db250ZW50TG9hZGVkXFxcIiwgKCkgPT4ge1xcclxcbiAgICBjb25zdCBpdGVtID0gX3Jldmlld3NfanNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXy5yZXZpZXdzW2N1cnJlbnROdW1iZXJdO1xcclxcbiAgICBzZXRQcm9wZXJ0aWVzKGl0ZW0pO1xcclxcbn0pO1xcclxcblxcclxcbi8vIExvZ2ljIC0gRnVuY3Rpb25zXFxyXFxuZnVuY3Rpb24gYWRqdXN0TnVtYmVyKG51bSkge1xcclxcbiAgICBpZiAobnVtIDwgMCkge1xcclxcbiAgICAgICAgY3VycmVudE51bWJlciA9IF9yZXZpZXdzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ucmV2aWV3cy5sZW5ndGggLSAxO1xcclxcbiAgICAgICAgcmV0dXJuIGN1cnJlbnROdW1iZXI7XFxyXFxuICAgIH1cXHJcXG4gICAgaWYgKG51bSA+IF9yZXZpZXdzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ucmV2aWV3cy5sZW5ndGggLSAxKSB7XFxyXFxuICAgICAgICBjdXJyZW50TnVtYmVyID0gMDtcXHJcXG4gICAgICAgIHJldHVybiBjdXJyZW50TnVtYmVyO1xcclxcbiAgICB9XFxyXFxufVxcclxcblxcclxcbmZ1bmN0aW9uIGludGVydmFsU2V0dXAoKSB7XFxyXFxuICAgIGN1cnJlbnROdW1iZXIrKztcXHJcXG4gICAgbW92ZUl0ZW0oKTtcXHJcXG59XFxyXFxuXFxyXFxuZnVuY3Rpb24gbW92ZUl0ZW0oKSB7XFxyXFxuICAgIGlmIChpc1ZhbGlkTnVtYmVyKGN1cnJlbnROdW1iZXIpKSB7XFxyXFxuICAgICAgICBzZXRQcm9wZXJ0aWVzKF9yZXZpZXdzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ucmV2aWV3c1tjdXJyZW50TnVtYmVyXSk7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG4gICAgYWRqdXN0TnVtYmVyKGN1cnJlbnROdW1iZXIpO1xcclxcbiAgICBzZXRQcm9wZXJ0aWVzKF9yZXZpZXdzX2pzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18ucmV2aWV3c1tjdXJyZW50TnVtYmVyXSk7XFxyXFxufVxcclxcblxcclxcbmZ1bmN0aW9uIGlzVmFsaWROdW1iZXIobnVtKSB7XFxyXFxuICAgIHJldHVybiBOdW1iZXIuaXNGaW5pdGUobnVtKSAmJiBudW0gPj0gMCAmJiBudW0gPCBfcmV2aWV3c19qc19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fLnJldmlld3MubGVuZ3RoO1xcclxcbn1cXHJcXG5cXHJcXG5mdW5jdGlvbiBzZXRQcm9wZXJ0aWVzKGl0ZW0pIHtcXHJcXG4gICAgdGVzdGltb25pYWxJbWcuc3JjID0gaXRlbS5pbWc7XFxyXFxuICAgIHRlc3RpbW9uaWFsVGl0bGUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XFxyXFxuICAgIHRlc3RpbW9uaWFsSm9iLnRleHRDb250ZW50ID0gaXRlbS5qb2I7XFxyXFxuICAgIHRlc3RpbW9uaWFsSW5mby50ZXh0Q29udGVudCA9IGl0ZW0udGV4dDtcXHJcXG59XFxyXFxuXFxuXFxuLy8jIHNvdXJjZVVSTD13ZWJwYWNrOi8vZ3VscHN0YXJ0ZXIvLi9zcmMvanMvdGVzdGltb25pYWxzLmpzP1wiKTtcbiAgICAgIC8qKiovXG4gICAgfVxuICAgIC8qKioqKiovXG5cbiAgfTtcbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKioqKioqL1xuICAvLyBUaGUgbW9kdWxlIGNhY2hlXG5cbiAgLyoqKioqKi9cblxuICB2YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG4gIC8qKioqKiovXG5cbiAgLyoqKioqKi9cbiAgLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cblxuICAvKioqKioqL1xuXG4gIGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbiAgICAvKioqKioqL1xuICAgIC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXG4gICAgLyoqKioqKi9cbiAgICB2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcbiAgICAvKioqKioqL1xuXG4gICAgaWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvKioqKioqL1xuICAgICAgcmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuICAgICAgLyoqKioqKi9cbiAgICB9XG4gICAgLyoqKioqKi9cbiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXG4gICAgLyoqKioqKi9cblxuXG4gICAgdmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG4gICAgICAvKioqKioqL1xuICAgICAgLy8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXG4gICAgICAvKioqKioqL1xuICAgICAgLy8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblxuICAgICAgLyoqKioqKi9cbiAgICAgIGV4cG9ydHM6IHt9XG4gICAgICAvKioqKioqL1xuXG4gICAgfTtcbiAgICAvKioqKioqL1xuXG4gICAgLyoqKioqKi9cbiAgICAvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblxuICAgIC8qKioqKiovXG5cbiAgICBfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbiAgICAvKioqKioqL1xuXG4gICAgLyoqKioqKi9cbiAgICAvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXG4gICAgLyoqKioqKi9cblxuXG4gICAgcmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuICAgIC8qKioqKiovXG4gIH1cbiAgLyoqKioqKi9cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIC8qKioqKiovXG5cbiAgLyogd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQgKi9cblxuICAvKioqKioqL1xuXG5cbiAgKGZ1bmN0aW9uICgpIHtcbiAgICAvKioqKioqL1xuICAgIC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5cbiAgICAvKioqKioqL1xuICAgIF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uIChtb2R1bGUpIHtcbiAgICAgIC8qKioqKiovXG4gICAgICB2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiAgICAgIC8qKioqKiovXG4gICAgICBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTtcbiAgICAgIH0gOlxuICAgICAgLyoqKioqKi9cbiAgICAgIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG1vZHVsZTtcbiAgICAgIH07XG4gICAgICAvKioqKioqL1xuXG4gICAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7XG4gICAgICAgIGE6IGdldHRlclxuICAgICAgfSk7XG4gICAgICAvKioqKioqL1xuXG5cbiAgICAgIHJldHVybiBnZXR0ZXI7XG4gICAgICAvKioqKioqL1xuICAgIH07XG4gICAgLyoqKioqKi9cblxuICB9KSgpO1xuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG5cbiAgLyogd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzICovXG5cbiAgLyoqKioqKi9cblxuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqKioqKi9cbiAgICAvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5cbiAgICAvKioqKioqL1xuICAgIF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uIChleHBvcnRzLCBkZWZpbml0aW9uKSB7XG4gICAgICAvKioqKioqL1xuICAgICAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHtcbiAgICAgICAgLyoqKioqKi9cbiAgICAgICAgaWYgKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuICAgICAgICAgIC8qKioqKiovXG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwge1xuICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGdldDogZGVmaW5pdGlvbltrZXldXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgLyoqKioqKi9cbiAgICAgICAgfVxuICAgICAgICAvKioqKioqL1xuXG4gICAgICB9XG4gICAgICAvKioqKioqL1xuXG4gICAgfTtcbiAgICAvKioqKioqL1xuXG4gIH0pKCk7XG4gIC8qKioqKiovXG5cbiAgLyoqKioqKi9cblxuICAvKiB3ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kICovXG5cbiAgLyoqKioqKi9cblxuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqKioqKi9cbiAgICBfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbiAob2JqLCBwcm9wKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCk7XG4gICAgfTtcbiAgICAvKioqKioqL1xuXG4gIH0pKCk7XG4gIC8qKioqKiovXG5cbiAgLyoqKioqKi9cblxuICAvKiB3ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0ICovXG5cbiAgLyoqKioqKi9cblxuXG4gIChmdW5jdGlvbiAoKSB7XG4gICAgLyoqKioqKi9cbiAgICAvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5cbiAgICAvKioqKioqL1xuICAgIF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uIChleHBvcnRzKSB7XG4gICAgICAvKioqKioqL1xuICAgICAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuICAgICAgICAvKioqKioqL1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7XG4gICAgICAgICAgdmFsdWU6ICdNb2R1bGUnXG4gICAgICAgIH0pO1xuICAgICAgICAvKioqKioqL1xuICAgICAgfVxuICAgICAgLyoqKioqKi9cblxuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7XG4gICAgICAgIHZhbHVlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIC8qKioqKiovXG4gICAgfTtcbiAgICAvKioqKioqL1xuXG4gIH0pKCk7XG4gIC8qKioqKiovXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG4gIC8vIHN0YXJ0dXBcblxuICAvKioqKioqL1xuICAvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcblxuICAvKioqKioqL1xuICAvLyBUaGlzIGVudHJ5IG1vZHVsZSBjYW4ndCBiZSBpbmxpbmVkIGJlY2F1c2UgdGhlIGV2YWwgZGV2dG9vbCBpcyB1c2VkLlxuXG4gIC8qKioqKiovXG5cblxuICB2YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oXCIuL3NyYy9qcy9tYWluLmpzXCIpO1xuICAvKioqKioqL1xuXG4gIC8qKioqKiovXG5cbn0pKCk7Il0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVzX18iLCIuL3NyYy9qcy9hY2NvcmRpb24uanMiLCJzcmNKc0FjY29yZGlvbkpzIiwiZXZhbCIsIi4vc3JjL2pzL2dhbGxlcnkuanMiLCJzcmNKc0dhbGxlcnlKcyIsIi4vc3JjL2pzL2dsaWdodGJveC5qcyIsInNyY0pzR2xpZ2h0Ym94SnMiLCJtb2R1bGUiLCIuL3NyYy9qcy9tYWluLmpzIiwic3JjSnNNYWluSnMiLCJfX3VudXNlZF93ZWJwYWNrX21vZHVsZSIsIl9fd2VicGFja19leHBvcnRzX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiLi9zcmMvanMvcmV2aWV3cy5qcyIsInNyY0pzUmV2aWV3c0pzIiwiLi9zcmMvanMvdGVzdGltb25pYWxzLmpzIiwic3JjSnNUZXN0aW1vbmlhbHNKcyIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsImNhbGwiLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkFBQUEsYUFZQSxDQUFBLFdBSUUsSUFBSUEsb0JBQXNCLENBRXhCQyx3QkFNQSxTQUFTQyxtQkFDUEMsS0FBSywyd0NBQXV5QyxDQUU5eUMsRUFHQUMsc0JBTUEsU0FBU0MsaUJBQ1BGLEtBQUssdW1MQUFxc0wsQ0FFNXNMLEVBR0FHLHdCQU1BLFNBQVNDLGlCQUFpQkMsUUFDeEJMLEtBQUssa3N6S0FBOC8xSyxDQUVyZzJLLEVBR0FNLG1CQU1BLFNBQVNDLFlBQVlDLHdCQUF5QkMsb0JBQXFCQyxxQkFHakVWLEtBQUssK3BGQUF1c0YsQ0FFOXNGLEVBR0FXLHNCQU1BLFNBQVNDLGVBQWVKLHdCQUF5QkMsb0JBQXFCQyxxQkFHcEVWLEtBQUssdTFCQUFpM0IsQ0FFeDNCLEVBR0FhLDJCQU1BLFNBQVNDLG9CQUFvQk4sd0JBQXlCQyxvQkFBcUJDLHFCQUd6RVYsS0FBSyw0eUZBQXcwRixDQUUvMEYsQ0FHRixFQVFJZSx5QkFBMkIsR0FRL0IsU0FBU0wsb0JBQW9CTSxHQUszQixJQUFJQyxFQUFlRix5QkFBeUJDLEdBRzVDLE9BQXFCRSxLQUFBQSxJQUFqQkQsSUFXQVosRUFBU1UseUJBQXlCQyxHQUFZLENBUWhERyxRQUFTLEVBR1gsRUFRQXRCLG9CQUFvQm1CLEdBQVVJLEtBQUtmLEVBQU9jLFFBQVNkLEVBQVFBLEVBQU9jLFFBQVNULG1CQUFtQixHQTVCckZPLEVBQWFFLE9BdUN4QixDQWlCRVQsb0JBQW9CVyxFQUFJLFNBQVVoQixHQUVoQyxJQUFJaUIsRUFBU2pCLEdBQVVBLEVBQU9rQixXQUU5QixXQUNFLE9BQU9sQixFQUFnQixPQUN6QixFQUVBLFdBQ0UsT0FBT0EsQ0FDVCxFQVNBLE9BTkFLLG9CQUFvQmMsRUFBRUYsRUFBUSxDQUM1QkcsRUFBR0gsQ0FDTCxDQUFDLEVBSU1BLENBRVQsRUFrQkFaLG9CQUFvQmMsRUFBSSxTQUFVTCxFQUFTTyxHQUV6QyxJQUFLLElBQUlDLEtBQU9ELEVBRVZoQixvQkFBb0JrQixFQUFFRixFQUFZQyxDQUFHLEdBQUssQ0FBQ2pCLG9CQUFvQmtCLEVBQUVULEVBQVNRLENBQUcsR0FFL0VFLE9BQU9DLGVBQWVYLEVBQVNRLEVBQUssQ0FDbENJLFdBQVksQ0FBQSxFQUNaQyxJQUFLTixFQUFXQyxFQUNsQixDQUFDLENBUVAsRUFlQWpCLG9CQUFvQmtCLEVBQUksU0FBVUssRUFBS0MsR0FDckMsT0FBT0wsT0FBT00sVUFBVUMsZUFBZWhCLEtBQUthLEVBQUtDLENBQUksQ0FDdkQsRUFrQkF4QixvQkFBb0IyQixFQUFJLFNBQVVsQixHQUVWLGFBQWxCLE9BQU9tQixRQUEwQkEsT0FBT0MsYUFFMUNWLE9BQU9DLGVBQWVYLEVBQVNtQixPQUFPQyxZQUFhLENBQ2pEQyxNQUFPLFFBQ1QsQ0FBQyxFQU1IWCxPQUFPQyxlQUFlWCxFQUFTLGFBQWMsQ0FDM0NxQixNQUFPLENBQUEsQ0FDVCxDQUFDLENBRUgsRUFzQkYsSUFBSS9CLG9CQUFzQkMsb0JBQW9CLGtCQUFrQixDQUtqRSxFQUFFIn0=
